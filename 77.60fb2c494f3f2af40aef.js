(function(){(this||window).webpackJsonp.registerAbsMids({"esri/renderers/support/heatmapUtils":1788,"esri/views/2d/layers/features/processors/BaseProcessor":1863,"esri/views/2d/layers/features/processors/HeatmapProcessor":2782})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1788:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(61),r(33)],void 0===(o=function(e,t,r,f){function l(e,t,r,n,o){for(var a=new Uint32Array(e*e),i=("buffer"in t?t:new Float64Array(t)),l=("buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer)),p=l.length/(o-n),u=0;u<i.length;u++){var s=i[u],c=Math.floor((s-n)*p);a[u]=l[f.clamp(c,0,l.length-1)]}return a.buffer}function S(e){for(var t=Math.round(3*e),r=2*e*e,n=new Float64Array(2*t+1),o=0;o<=n.length;o++)n[o]=Math.exp(-Math.pow(o-t,2)/r)/Math.sqrt(2*Math.PI)*(e/2);return n}function T(t,r){return"function"==typeof t?t:t?"string"==typeof r?function(e){return-1*e[t]}:function(e){return+e[t]+r}:function(){return 1}}Object.defineProperty(t,"__esModule",{value:!0}),t.generateGradient=function(){if(!("document"in r))return function(){return null};var l=document.createElement("canvas"),p=l.getContext("2d");return l.height=512,l.width=1,function(e){p.clearRect(0,0,1,l.height);for(var t=p.createLinearGradient(0,0,0,l.height),r=0,n=e.colorStops;r<n.length;r++){var o=n[r],a=o.ratio,i=o.color;t.addColorStop(Math.max(a,.001),"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")")}return p.fillStyle=t,p.fillRect(0,0,1,l.height),p.getImageData(0,0,1,l.height).data}}(),t.calculateHeatmapIntensityInfo=function(e,t,r,n){for(var o,a=t.blurRadius,i=t.fieldOffset,l=t.field,p=new Float64Array(r*n),u=S(a),s=Math.round(3*a),c=Number.NEGATIVE_INFINITY,f=T(l,i),d=0,y=e;d<y.length;d++)for(var h=y[d],v=h.geometry,g=h.attributes,m=v.x-s,w=v.y-s,b=Math.max(0,m),O=Math.max(0,w),I=Math.min(n,v.y+s),M=Math.min(r,v.x+s),x=+f(g),R=O;R<I;R++)for(var U=u[R-w],A=b;A<M;A++){var P=u[A-m];c<(o=p[R*r+A]+=U*P*x)&&(c=o)}return{matrix:p.buffer,max:c}},t.drawHeatmap=function(e,t,r,n,o,a){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);var i=e.getImageData(0,0,t,t);r&&n&&i.data.set(new Uint8ClampedArray(l(t,r,n,o,a))),e.putImageData(i,0,0)},t.createHeatmapImageData=l,t.createKernel=S,t.createValueFunction=T}.apply(null,n))||(e.exports=o)},1863:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(1),r(0),r(9),r(10),r(206),r(2)],void 0===(o=function(e,t,r,n,o,a,i,l){Object.defineProperty(t,"__esModule",{value:!0});var p,u=(p=l.declared(i.HandleOwner),r(s,p),s.prototype.initialize=function(){},s.prototype.destroy=function(){},Object.defineProperty(s.prototype,"supportsTileUpdates",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"spatialReference",{get:function(){var e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null},enumerable:!0,configurable:!0}),n([l.property({readOnly:!0})],s.prototype,"supportsTileUpdates",null),n([l.property({constructOnly:!0})],s.prototype,"remoteClient",void 0),n([l.property({constructOnly:!0})],s.prototype,"service",void 0),n([l.property({dependsOn:["tileStore.tileScheme.spatialReference"]})],s.prototype,"spatialReference",null),n([l.property({constructOnly:!0})],s.prototype,"tileInfo",void 0),n([l.property({constructOnly:!0})],s.prototype,"tileStore",void 0),n([l.subclass("esri.views.2d.layers.features.processors.BaseProcessor")],s));function s(){return null!==p&&p.apply(this,arguments)||this}t.default=u}.apply(null,n))||(e.exports=o)},2782:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(1),r(0),r(9),r(10),r(2),r(1788),r(1863)],void 0===(o=function(e,t,r,n,o,a,i,l,p){Object.defineProperty(t,"__esModule",{value:!0});var u,s=(u=i.declared(p.default),r(c,u),c.prototype.update=function(t){return a(this,void 0,void 0,function(){return o(this,function(e){return this._set("config",t),[2]})})},c.prototype.onTileData=function(e,t,r){if(t&&t.addOrUpdate&&0<t.addOrUpdate.length){var n=l.calculateHeatmapIntensityInfo(t.addOrUpdate,this.config.renderer,512,512);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.key.id,intensityInfo:n},{transferList:[n.matrix]})}return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.key.id,intensityInfo:null},r)},c.prototype.onTileError=function(e,t,r){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:t},r)},n([i.property()],c.prototype,"config",void 0),n([i.property()],c.prototype,"updating",void 0),n([i.subclass("esri.views.2d.layers.features.processors.HeatmapProcessor")],c));function c(){var e=null!==u&&u.apply(this,arguments)||this;return e.type="heatmap",e.updating=!1,e}t.default=s}.apply(null,n))||(e.exports=o)}}]);