(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/operations/PBFWorker":1568,"esri/tasks/operations/query":1569,"esri/widgets/Feature":1607,"esri/tasks/operations/urlUtils":1632,"esri/tasks/operations/pbfQueryUtils":1634,"esri/tasks/operations/pbfFeatureServiceParser":1643,"esri/tasks/operations/pbfDehydratedFeatureSet":1644,"esri/tasks/operations/pbfOptimizedFeatureSet":1645,"esri/tasks/operations/queryAttachments":1651,"esri/tasks/QueryTask":1655,"esri/tasks/operations/queryRelatedRecords":1656,"esri/core/throttle":1794,"esri/widgets/Feature/support/featureUtils":1911,"dojo/i18n!esri/widgets/Feature/nls/Feature":2469,"esri/widgets/Feature/nls/ar/Feature":2470,"esri/widgets/Feature/nls/bs/Feature":2471,"esri/widgets/Feature/nls/ca/Feature":2472,"esri/widgets/Feature/nls/cs/Feature":2473,"esri/widgets/Feature/nls/da/Feature":2474,"esri/widgets/Feature/nls/de/Feature":2475,"esri/widgets/Feature/nls/el/Feature":2476,"esri/widgets/Feature/nls/es/Feature":2477,"esri/widgets/Feature/nls/et/Feature":2478,"esri/widgets/Feature/nls/fi/Feature":2479,"esri/widgets/Feature/nls/fr/Feature":2480,"esri/widgets/Feature/nls/hr/Feature":2481,"esri/widgets/Feature/nls/hu/Feature":2482,"esri/widgets/Feature/nls/he/Feature":2483,"esri/widgets/Feature/nls/id/Feature":2484,"esri/widgets/Feature/nls/it/Feature":2485,"esri/widgets/Feature/nls/ja/Feature":2486,"esri/widgets/Feature/nls/ko/Feature":2487,"esri/widgets/Feature/nls/lv/Feature":2488,"esri/widgets/Feature/nls/lt/Feature":2489,"esri/widgets/Feature/nls/nl/Feature":2490,"esri/widgets/Feature/nls/nb/Feature":2491,"esri/widgets/Feature/nls/pl/Feature":2492,"esri/widgets/Feature/nls/pt-br/Feature":2493,"esri/widgets/Feature/nls/pt-pt/Feature":2494,"esri/widgets/Feature/nls/ro/Feature":2495,"esri/widgets/Feature/nls/ru/Feature":2496,"esri/widgets/Feature/nls/sl/Feature":2497,"esri/widgets/Feature/nls/sr/Feature":2498,"esri/widgets/Feature/nls/sv/Feature":2499,"esri/widgets/Feature/nls/th/Feature":2500,"esri/widgets/Feature/nls/tr/Feature":2501,"esri/widgets/Feature/nls/uk/Feature":2502,"esri/widgets/Feature/nls/vi/Feature":2503,"esri/widgets/Feature/nls/zh-cn/Feature":2504,"esri/widgets/Feature/nls/zh-hk/Feature":2505,"esri/widgets/Feature/nls/zh-tw/Feature":2506,"esri/widgets/Feature/nls/Feature":2507,"esri/widgets/Feature/FeatureViewModel":2508,"esri/widgets/Feature/support/RelatedFeatures":2509,"esri/widgets/Feature/support/attachmentUtils":2510,"esri/widgets/support/chartUtils":2511,"esri/widgets/support/uriUtils":2512,"dojo/i18n!esri/widgets/support/nls/uriUtils":2513,"esri/widgets/support/nls/ar/uriUtils":2514,"esri/widgets/support/nls/bs/uriUtils":2515,"esri/widgets/support/nls/ca/uriUtils":2516,"esri/widgets/support/nls/cs/uriUtils":2517,"esri/widgets/support/nls/da/uriUtils":2518,"esri/widgets/support/nls/de/uriUtils":2519,"esri/widgets/support/nls/el/uriUtils":2520,"esri/widgets/support/nls/es/uriUtils":2521,"esri/widgets/support/nls/et/uriUtils":2522,"esri/widgets/support/nls/fi/uriUtils":2523,"esri/widgets/support/nls/fr/uriUtils":2524,"esri/widgets/support/nls/he/uriUtils":2525,"esri/widgets/support/nls/hr/uriUtils":2526,"esri/widgets/support/nls/hu/uriUtils":2527,"esri/widgets/support/nls/id/uriUtils":2528,"esri/widgets/support/nls/it/uriUtils":2529,"esri/widgets/support/nls/ja/uriUtils":2530,"esri/widgets/support/nls/ko/uriUtils":2531,"esri/widgets/support/nls/lv/uriUtils":2532,"esri/widgets/support/nls/lt/uriUtils":2533,"esri/widgets/support/nls/nl/uriUtils":2534,"esri/widgets/support/nls/nb/uriUtils":2535,"esri/widgets/support/nls/pl/uriUtils":2536,"esri/widgets/support/nls/pt-br/uriUtils":2537,"esri/widgets/support/nls/pt-pt/uriUtils":2538,"esri/widgets/support/nls/ro/uriUtils":2539,"esri/widgets/support/nls/ru/uriUtils":2540,"esri/widgets/support/nls/sl/uriUtils":2541,"esri/widgets/support/nls/sr/uriUtils":2542,"esri/widgets/support/nls/sv/uriUtils":2543,"esri/widgets/support/nls/th/uriUtils":2544,"esri/widgets/support/nls/tr/uriUtils":2545,"esri/widgets/support/nls/uk/uriUtils":2546,"esri/widgets/support/nls/vi/uriUtils":2547,"esri/widgets/support/nls/zh-cn/uriUtils":2548,"esri/widgets/support/nls/zh-hk/uriUtils":2549,"esri/widgets/support/nls/zh-tw/uriUtils":2550,"esri/widgets/support/nls/uriUtils":2551})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[35,61,69],{1568:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(11),r(89),r(4),r(304),r(208),r(31),r(205),r(1634),r.dj.m(e)],void 0===(a=function(e,t,r,l,a,i,n,u,d,s,o){Object.defineProperty(t,"__esModule",{value:!0});var p,c=(y.prototype._parseFeatureQuery=function(e){var t=s.parsePBFFeatureQuery(e.buffer,e.options);if(e.options&&"dehydrated"===e.options.type){var r=t;if(t.spatialReference=r.spatialReference.toJSON(),r.fields)for(var i=0;i<r.fields.length;i++)r.fields[i]=r.fields[i].toJSON()}return a.resolve(t)},y),f=(r(h,p=c),h.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},h.prototype.parseFeatureQuery=function(e,o){return e&&0!==e.byteLength?this._thread?this._thread.invoke("_parseFeatureQuery",{buffer:e,options:o},{transferList:[e]}).then(function(e){if(o&&"dehydrated"===o.type){var t=e;if(t.spatialReference=u.fromJSON(t.spatialReference),t.fields)for(var r=0;r<t.fields.length;r++)t.fields[r]=d.fromJSON(t.fields[r]);for(var i=t.spatialReference,a=0,n=t.features;a<n.length;a++){var s=n[a];s.uid=l.generateUID(),s.geometry&&(s.geometry.spatialReference=i)}}return e}):a.resolve(s.parsePBFFeatureQuery(e,o)):a.resolve(null)},h);function h(){var t=p.call(this)||this;return t._thread=void 0,n.open(i.getAbsMid("./PBFWorker",e,o),{strategy:"dedicated"}).then(function(e){void 0===t._thread?t._thread=e:e.close()}),t}function y(){}t.PBFWorker=f,t.default=function(){return new c}}.apply(null,i))||(e.exports=a)},1569:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(5),r(29),r(12),r(22),r(38),r(485),r(1634),r(1568),r(1632),r(47)],void 0===(a=function(e,t,l,u,d,r,p,c,n,s,f){function h(e,t){var r=e.geometry,i=e.toJSON(),a=i;if(r&&(a.geometry=JSON.stringify(r),a.geometryType=p.getJsonType(r),a.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),i.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(a.objectIds=i.objectIds.join(",")),i.orderByFields&&(a.orderByFields=i.orderByFields.join(",")),!i.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete a.outFields:-1!==i.outFields.indexOf("*")?a.outFields="*":a.outFields=i.outFields.join(","),i.outSR?a.outSR=i.outSR.wkid||JSON.stringify(i.outSR):r&&(i.returnGeometry||i.returnCentroid)&&(a.outSR=a.inSR),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(a.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(a.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(a.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.source&&(a.layer=JSON.stringify({source:i.source}),delete i.source),i.timeExtent){var n=i.timeExtent,s=n.start,o=n.end;null==s&&null==o||(a.time=s===o?s:(null==s?"null":s)+","+(null==o?"null":o)),delete i.timeExtent}return a}function o(e,i,a,n,s){void 0===n&&(n={});var o="string"==typeof e?r.urlToObject(e):e,t=i.geometry?[i.geometry]:[];return n.responseType="pbf"===a?"array-buffer":"json",c.normalizeCentralMeridian(t,null,n).then(function(e){var t=e&&e[0];d.isSome(t)&&((i=i.clone()).geometry=t);var r=f.mapParameters(l({},o.query,{f:a},s,h(i,s)));return u(o.path+"/query",l({},n,{query:r}))})}Object.defineProperty(t,"__esModule",{value:!0});var y,i="Layer does not support extent calculation.";t.queryToQueryStringParameters=h,t.executeQuery=function(e,t,r){return o(e,t,"json",r)},t.executeQueryPBF=function(e,t,i,r){var a=i.useWorker?(null==y&&(y=new s.PBFWorker),y):null;return o(e,t,"pbf",r).then(function(r){function t(e){var t=r;return t.data=e,t}return i.useWorker?a.parseFeatureQuery(r.data,i).then(function(e){return t(e)}):t(n.parsePBFFeatureQuery(r.data,i))})},t.executeQueryForIds=function(e,t,r){return o(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){return o(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){return o(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(i);if(t.hasOwnProperty("count"))throw new Error(i);return e})}}.apply(null,i))||(e.exports=a)},1607:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(1),r(0),r(5),r(9),r(10),r(2469),r(95),r(79),r(16),r(2),r(39),r(2508),r(2510),r(2511),r(2512),r(32),r(169)],void 0===(a=function(e,t,r,i,a,n,s,g,o,l,u,d,p,c,b,f,h,_,y){var m,v="esri-icon-font-fallback-text",x="esri-icon-loading-indicator esri-rotating",w="esri-icon-left-triangle-arrow",F="esri-icon-right-triangle-arrow",I="esri-widget__table",k="esri-widget",T="esri-feature",C="esri-feature__size-container",A="esri-feature__title",E="esri-feature__main-container",S="esri-feature__button",M="esri-feature__icon",L="esri-feature__content-element",j="esri-feature__text",P="esri-feature__last-edited-info",U="esri-feature--media-pagination-visible",R="esri-feature__attachments",N="esri-feature__attachments--list",O="esri-feature__attachments--preview",B="esri-feature__attachments-title",z="esri-feature__attachments-items",q="esri-feature__attachments-item",D="esri-feature__attachment-item-mask",V="esri-feature__attachment-item-mask--icon",G="esri-feature__attachments-image",Q="esri-feature__attachments-image-overlay",J="esri-feature__attachments-link-icon esri-icon-link-external",K="esri-feature__attachments-image--resizable",W="esri-feature__attachments-filename",H="esri-feature__attachments-item-link",$="esri-feature__fields",Z="esri-feature__field-header",X="esri-feature__field-data",Y="esri-feature__field-data--date",ee="esri-feature__media",te="esri-feature__media-container",re="esri-feature__media-item-container",ie="esri-feature__media-item",ae="esri-feature__media-item-title",ne="esri-feature__media-item-caption",se="esri-feature__media-previous",oe="esri-feature__media-previous-icon",le="esri-feature__media-previous-icon--rtl",ue="esri-feature__media-next",de="esri-feature__media-next-icon",pe="esri-feature__media-next-icon--rtl",ce="esri-feature__media-chart",fe="esri-feature__loading-container",he="esri-feature__loading-spinner",ye={title:!0,content:!0,lastEditedInfo:!0};return m=d.declared(p),r(me,m),me.prototype.postInitialize=function(){var e=this;this.own(u.init(this,"viewModel.content",function(){return e._setupMediaRefreshTimers()}))},me.prototype.destroy=function(){this._clearMediaRefreshTimers(),this._activeMediaMap.clear(),this._activeMediaMap=null,this._destroyCharts()},me.prototype.destroyCharts=function(){return this._destroyCharts()},me.prototype.castVisibleElements=function(e){return a({},ye,e)},me.prototype.render=function(){var e=_.tsx("div",{key:"loading-container",class:fe},_.tsx("span",{class:this.classes(x,he)})),t=this.visibleElements,r=this.viewModel,i=r.waitingForContent,a=r.title,n=t.title?_.tsx("h4",{class:A,innerHTML:a}):null,s=t.content?_.tsx("div",{class:E},[this._renderContent(),this._renderLastEditInfo()]):null;return _.tsx("div",{class:this.classes(T,k)},_.tsx("div",{class:C},n,i?e:s))},me.prototype.goToMedia=function(e,t){this._setContentElementMedia(e,t)},me.prototype.nextMedia=function(e){this._pageContentElementMedia(e,"next")},me.prototype.previousMedia=function(e){this._pageContentElementMedia(e,"previous")},me.prototype._buildKey=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e+"__"+(this.get("viewModel.graphic.uid")||"0")+"-"+t.join("-")},me.prototype._destroyCharts=function(){return s(this,void 0,void 0,function(){var t;return n(this,function(e){switch(e.label){case 0:return(t=this._loadingChartsModule)?[4,t]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._chartMap.forEach(function(e){return e.dispose()}),this._chartMap.clear(),[2]}})})},me.prototype._renderContent=function(){var e=this.viewModel.content;return e?"string"==typeof e?_.tsx("div",{key:"content-string",innerHTML:e}):_.isWidget(e)?_.tsx("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?_.tsx("div",{key:"content-html-element",bind:e,afterCreate:this._attachToNode}):_.isWidgetBase(e)?_.tsx("div",{key:"content-dijit",bind:e.domNode,afterCreate:this._attachToNode}):Array.isArray(e)&&e.length?_.tsx("div",{key:"content-content-elements"},e.map(this._renderContentElement,this)):null:null},me.prototype._renderContentElement=function(e,t){var r=this.visibleElements;if("boolean"!=typeof r.content&&!r.content[e.type])return null;switch(e.type){case"attachments":return this._renderAttachments(e);case"fields":return this._renderFields(e,t);case"media":return this._renderMedia(e,t);case"text":return this._renderText(e,t);default:return null}},me.prototype._renderAttachmentInfo=function(e){var t,r,i=e.attachmentInfo,a=e.supportsResizeAttachments,n=e.contentElement.displayType,s=i.contentType,o=i.orientationInfo,l=i.name,u=i.url,d="list"===n?48:400,p=o?[o.rotation?"rotate("+o.rotation+"deg)":"",o.mirrored?"scaleX(-1)":""].join(" "):"",c=p?{transform:p}:{},f=a&&b.isSupportedImage(s),h=-1===u.indexOf("?")?"?":"&",y=f?u+h+"w="+d:b.getIconPath(s),m=((t={})[V]=!f,t),v=((r={})[K]=a,r);return _.tsx("li",{class:q,key:i},_.tsx("a",{class:H,href:u,rel:"noreferrer",target:"_blank"},_.tsx("div",{class:this.classes(m,D)},_.tsx("img",{styles:c,alt:"",class:this.classes(v,G),src:y}),_.tsx("span",{class:Q},_.tsx("span",{"aria-hidden":"true",class:J}))),_.tsx("span",{class:W},l||g.noTitle)))},me.prototype._renderAttachments=function(r){var e,i=this,t=r.displayType,a=r.attachmentInfos,n=a&&a.length,s=this.get("graphic.layer.capabilities.operations.supportsResizeAttachments"),o=((e={})[N]="preview"!==t,e[O]="preview"===t,e);return n?_.tsx("div",{key:"attachments-element",class:this.classes(R,L,o)},_.tsx("div",{class:B},g.attach),_.tsx("ul",{class:z},a.map(function(e,t){return i._renderAttachmentInfo({attachmentInfo:e,attachmentInfoIndex:t,supportsResizeAttachments:s,contentElement:r})}))):null},me.prototype._forceLTR=function(e){return"&lrm;"+e},me.prototype._renderFieldInfo=function(e,t){var r,i=this.viewModel.formattedAttributes,a=i?i.content[t]||i.global:null,n=e.fieldName,s=e.label||n,o=a?null==a[n]?"":a[n]:"",l=!(!e.format||!e.format.dateFormat),u="number"!=typeof o||l?h.autoLink(o):this._forceLTR(o),d=((r={})[Y]=l,r);return _.tsx("tr",{key:this._buildKey("fields-element-info-row",t)},_.tsx("th",{key:this._buildKey("fields-element-info-row-header",t),class:Z,innerHTML:s}),_.tsx("td",{key:this._buildKey("fields-element-info-row-data",t),class:this.classes(X,d),innerHTML:u}))},me.prototype._renderFields=function(e,t){var r=this,i=e.fieldInfos;return i?_.tsx("div",{key:this._buildKey("fields-element",t),class:this.classes($,L)},_.tsx("table",{class:I,summary:g.fieldsSummary,key:this._buildKey("fields-element-table",t)},_.tsx("tbody",{key:this._buildKey("fields-element-table-body",t)},i.map(function(e){return r._renderFieldInfo(e,t)})))):null},me.prototype._shouldOpenInNewTab=function(e){if(void 0===e&&(e=""),e)return!/^(?:mailto:|tel:)/.test(e.trim().toLowerCase())},me.prototype._clearMediaRefreshTimers=function(){this._refreshTimers.forEach(function(e){return clearTimeout(e)}),this._refreshTimers.clear()},me.prototype._clearMediaRefreshTimer=function(e){var t=this._refreshTimers.get(e);t&&(clearTimeout(t),this._refreshTimers.delete(e))},me.prototype._getImageSource=function(e,t){var r=-1!==e.indexOf("?")?"&":"?",i=e.split("#"),a=i[0],n=i[1],s=void 0===n?"":n;return a+r+"timestamp="+t+(s?"#":"")+s},me.prototype._setupMediaRefreshTimer=function(e){var t=this.get("viewModel.content");if(Array.isArray(t)){var r=t[e];if(r&&"media"===r.type){var i=this._activeMediaMap.get(e);isNaN(i)&&(i=0);var a=r.mediaInfos[i];a&&"image"===a.type&&a.refreshInterval&&this._setRefreshTimeout(e,a)}}},me.prototype._setupMediaRefreshTimers=function(){var r=this;this._clearMediaRefreshTimers();var e=this.get("viewModel.content");Array.isArray(e)&&e.forEach(function(e,t){return r._setupMediaRefreshTimer(t)})},me.prototype._updateMediaInfoTimestamp=function(e,t){var r=Date.now();this._mediaInfo.set(t,{timestamp:r,sourceURL:this._getImageSource(e,r)}),this.scheduleRender()},me.prototype._setRefreshTimeout=function(e,t){var r=this,i=t.refreshInterval,a=t.value;if(i){var n=6e4*i;this._updateMediaInfoTimestamp(a.sourceURL,e);var s=setInterval(function(){r._updateMediaInfoTimestamp(a.sourceURL,e)},n);this._refreshTimers.set(e,s)}},me.prototype._renderMediaInfoType=function(e){var t=e.mediaInfo,r=e.contentElementIndex,i=e.activeMediaIndex,a=t.title,n=void 0===a?"":a;if("image"===t.type){var s=t.value,o=t.refreshInterval,l=s.sourceURL,u=s.linkURL,d=this._shouldOpenInNewTab(u)?"_blank":"_self",p="_blank"==d?"noreferrer":"",c=o?this._mediaInfo.get(r):null,f=c?c.timestamp:0,h=c?c.sourceURL:l,y=_.tsx("img",{alt:n,key:this._buildKey("media-image",r,i,f),src:h});return(u?_.tsx("a",{title:n,href:u,rel:p,target:d},y):null)||y}if(-1!==t.type.indexOf("chart"))return _.tsx("div",{key:this._buildKey("media-chart",r,i),bind:this,"data-media-info":t,"data-content-element-index":r,class:ce,afterCreate:this._getChartDependencies})},me.prototype._getChartDependencies=function(t){var r=this,e=t["data-media-info"],i=t["data-content-element-index"],a=this._chartMap.get(i);a&&a.dispose();var n=e.value,s=e.type;this._loadingChartsModule=f.loadChartsModule().then(function(e){return r._renderChart({chartDiv:t,contentElementIndex:i,type:s,value:n,chartsModule:e})})},me.prototype._createPieChart=function(e){var t=e.chartDiv,r=e.chartsModule,i=r.am4core,a=r.am4charts,n=i.create(t,a.PieChart);n.rtl=y.isRTL();var s=n.series.push(new a.PieSeries);return s.labels.template.disabled=!0,s.ticks.template.disabled=!0,s.dataFields.value="y",s.dataFields.category="x",s.tooltip.label.wrap=!0,s.tooltip.label.maxWidth=200,s.tooltip.label.rtl=n.rtl,n},me.prototype._createXYChart=function(e){var t=e.chartDiv,r=e.type,i=e.value,a=e.chartsModule,n=a.am4core,s=a.am4charts,o=n.create(t,s.XYChart);o.rtl=y.isRTL();var l=15<i.series.length;if("column-chart"===r){var u=o.xAxes.push(new s.CategoryAxis);u.dataFields.category="x",u.renderer.labels.template.disabled=!0,u.tooltip.label.wrap=!0,u.tooltip.label.maxWidth=200,u.tooltip.label.rtl=o.rtl,u.tooltip.events.on("sizechanged",function(){u.tooltip.dy=-u.tooltip.contentHeight});var d=(c=o.yAxes.push(new s.ValueAxis)).renderer.labels.template;c.renderer.minLabelPosition=.05,c.renderer.maxLabelPosition=.95,d.wrap=!0,(f=o.series.push(new s.ColumnSeries)).dataFields.valueY="y",f.dataFields.categoryX="x",o.cursor=new s.XYCursor,l&&(o.scrollbarX=new n.Scrollbar)}if("bar-chart"===r){var p=o.yAxes.push(new s.CategoryAxis);p.dataFields.category="x",p.renderer.inversed=!0,p.renderer.labels.template.disabled=!0,p.tooltip.label.wrap=!0,p.tooltip.label.maxWidth=200,p.tooltip.label.rtl=o.rtl,p.tooltip.events.on("sizechanged",function(){p.tooltip.dx=p.tooltip.contentWidth}),d=(c=o.xAxes.push(new s.ValueAxis)).renderer.labels.template,c.renderer.minLabelPosition=.05,c.renderer.maxLabelPosition=.95,d.wrap=!0,(f=o.series.push(new s.ColumnSeries)).dataFields.valueX="y",f.dataFields.categoryY="x",o.cursor=new s.XYCursor,l&&(o.scrollbarY=new n.Scrollbar)}if("line-chart"===r){var c,f,h=o.xAxes.push(new s.CategoryAxis);h.dataFields.category="x",h.renderer.labels.template.disabled=!0,h.tooltip.label.wrap=!0,h.tooltip.label.maxWidth=200,h.tooltip.label.rtl=o.rtl,h.tooltip.events.on("sizechanged",function(){h.tooltip.dy=-h.tooltip.contentHeight}),d=(c=o.yAxes.push(new s.ValueAxis)).renderer.labels.template,c.renderer.minLabelPosition=.05,c.renderer.maxLabelPosition=.95,d.wrap=!0,(f=o.series.push(new s.LineSeries)).dataFields.categoryX="x",f.dataFields.valueY="y",o.cursor=new s.XYCursor,l&&(o.scrollbarX=new n.Scrollbar)}return o},me.prototype._renderChart=function(e){var t=e.contentElementIndex,r=e.type,i=e.value,a=e.chartsModule;a.am4core.useTheme(a.am4themes_animated);var n="pie-chart"===r?this._createPieChart(e):this._createXYChart(e);n.data=i.series.map(function(e){return{x:e.tooltip,y:e.y}}),this._chartMap.set(t,n)},me.prototype._renderMediaInfo=function(e){var t=e.mediaInfo,r=e.contentElementIndex,i=e.activeMediaIndex,a=this._renderMediaInfoType({mediaInfo:t,contentElementIndex:r,activeMediaIndex:i}),n=t.title?_.tsx("div",{key:this._buildKey("media-title",r),class:ae,innerHTML:t.title}):null,s=t.caption?_.tsx("div",{key:this._buildKey("media-caption",r),class:ne,innerHTML:t.caption}):null;return _.tsx("div",{key:this._buildKey("media-container",r),class:re},_.tsx("div",{key:this._buildKey("media-item-container",r),class:ie},a),n,s)},me.prototype._renderMediaPageButton=function(e,t){var r="previous"===e,i=r?g.previous:g.next,a=r?this.classes(S,se):this.classes(S,ue),n=r?this.classes(M,oe,w):this.classes(M,de,F),s=r?this.classes(M,le,F):this.classes(M,pe,w),o=r?"media-previous":"media-next",l=r?this._previousClick:this._nextClick;return _.tsx("div",{key:this._buildKey(o,t),title:i,tabIndex:0,role:"button",class:a,"data-content-element-index":t,bind:this,onkeydown:l,onclick:l},_.tsx("span",{"aria-hidden":"true",class:n}),_.tsx("span",{"aria-hidden":"true",class:s}),_.tsx("span",{class:v},i))},me.prototype._handleMediaKeyup=function(e){var t=e.currentTarget["data-content-element-index"],r=l.eventKey(e);"ArrowLeft"===r&&(e.stopPropagation(),this.previousMedia(t)),"ArrowRight"===r&&(e.stopPropagation(),this.nextMedia(t))},me.prototype._renderMedia=function(e,t){var r,i=e.mediaInfos,a=i&&i.length||0,n=((r={})[U]=1<a,r),s=this._renderMediaPageButton("previous",t),o=this._renderMediaPageButton("next",t),l=this._activeMediaMap.get(t);return isNaN(l)&&(this._activeMediaMap.set(t,0),l=0),a?_.tsx("div",{key:this._buildKey("media-element",t),"data-content-element-index":t,bind:this,onkeyup:this._handleMediaKeyup,class:this.classes(ee,L,n)},_.tsx("div",{key:this._buildKey("media-element-container",t),class:te},s,this._renderMediaInfo({mediaInfo:i[l],contentElementIndex:t,activeMediaIndex:l}),o)):null},me.prototype._renderLastEditInfo=function(){var e=this.visibleElements,t=this.viewModel.lastEditInfo;if(!t||!e.lastEditedInfo)return null;var r=t.date,i=t.user,a="edit"===t.type?i?g.lastEditedByUser:g.lastEdited:i?g.lastCreatedByUser:g.lastCreated,n=o.substitute(a,{date:r,user:i});return _.tsx("div",{key:"edit-info-element",class:this.classes(P,L)},n)},me.prototype._renderText=function(e,t){return e.text?_.tsx("div",{key:this._buildKey("text-element",t),innerHTML:e.text,class:this.classes(j,L)}):null},me.prototype._attachToNode=function(e){e.appendChild(this)},me.prototype._setContentElementMedia=function(e,t){this._clearMediaRefreshTimer(e);var r=this.viewModel.content,i=r&&r[e],a=i&&i.mediaInfos;if(a&&a.length){var n=(t+a.length)%a.length;this._activeMediaMap.set(e,n),this._setupMediaRefreshTimer(e),this.scheduleRender()}},me.prototype._pageContentElementMedia=function(e,t){var r="previous"===t?-1:1,i=this._activeMediaMap.get(e)+r;this._setContentElementMedia(e,i)},me.prototype._previousClick=function(e){var t=e.currentTarget["data-content-element-index"];this.previousMedia(t)},me.prototype._nextClick=function(e){var t=e.currentTarget["data-content-element-index"];this.nextMedia(t)},i([d.aliasOf("viewModel.graphic")],me.prototype,"graphic",void 0),i([d.aliasOf("viewModel.defaultPopupTemplateEnabled")],me.prototype,"defaultPopupTemplateEnabled",void 0),i([d.property()],me.prototype,"label",void 0),i([d.aliasOf("viewModel.spatialReference")],me.prototype,"spatialReference",void 0),i([d.aliasOf("viewModel.title")],me.prototype,"title",void 0),i([d.property(),_.renderable()],me.prototype,"visibleElements",void 0),i([d.cast("visibleElements")],me.prototype,"castVisibleElements",null),i([d.aliasOf("viewModel.map")],me.prototype,"map",void 0),i([d.aliasOf("viewModel.view")],me.prototype,"view",void 0),i([d.property({type:c}),_.renderable(["viewModel.waitingForContent","viewModel.content","viewModel.lastEditInfo"])],me.prototype,"viewModel",void 0),i([_.accessibleHandler()],me.prototype,"_previousClick",null),i([_.accessibleHandler()],me.prototype,"_nextClick",null),i([d.subclass("esri.widgets.Feature")],me);function me(e){var t=m.call(this,e)||this;return t._chartMap=new Map,t._activeMediaMap=new Map,t._refreshTimers=new Map,t._mediaInfo=new Map,t._loadingChartsModule=null,t.graphic=null,t.defaultPopupTemplateEnabled=!1,t.label=g.widgetLabel,t.spatialReference=null,t.title=null,t.visibleElements=a({},ye),t.map=null,t.view=null,t.viewModel=new c,t}}.apply(null,i))||(e.exports=a)},1632:function(e,t,r){var i,a;i=[r.dj.c(e.i),t],void 0===(a=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var i in t)if("declaredClass"!==i){var a=t[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){r[i]=[];for(var n=0;n<a.length;n++)r[i][n]=e(a[n])}else"object"==typeof a?a.toJSON&&(r[i]=JSON.stringify(a)):r[i]=a}return r}}.apply(null,i))||(e.exports=a)},1634:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(1643)],void 0===(a=function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePBFFeatureQuery=function(e,t){var r=o.parseFeatureQuery(e,t).queryResult.featureResult;if(r&&r.features&&r.features.length&&r.objectIdFieldName)for(var i=r.objectIdFieldName,a=0,n=r.features;a<n.length;a++){var s=n[a];s.attributes&&(s.objectId=s.attributes[i])}return r}}.apply(null,i))||(e.exports=a)},1643:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(6),r(3),r(489),r(1644),r(1645)],void 0===(a=function(e,t,o,r,l,u,d){function i(e){return e>=F.length?null:F[e]}function a(e){return e>=k.length?null:k[e]}function n(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function p(e,t,r){for(var i=t.createPointGeometry(r);e.next();)switch(e.tag()){case 3:for(var a=e.getUInt32(),n=e.pos()+a,s=0;e.pos()<n;)t.addCoordinatePoint(i,e.getSInt64(),0,s++);break;case 1:case 2:default:e.skip()}return i}function c(e,t,r){for(var i=t.createGeometry(r),a=2+(r.hasZ?1:0)+(r.hasM?1:0);e.next();)switch(e.tag()){case 2:for(var n=e.getUInt32(),s=e.pos()+n,o=0;e.pos()<s;)t.addLength(i,e.getUInt32(),o++);break;case 3:for(var l=e.getUInt32(),u=(s=e.pos()+l,0),d=0;e.pos()<s;)t.addCoordinate(i,e.getSInt64(),d,u),++u==a&&(d++,u=0);break;case 1:default:e.skip()}return i}function f(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function s(e){for(var t={type:i(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=i(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=(r=e.getEnum())>=I.length?null:I[r];break;case 5:case 6:default:e.skip()}var r;return t}function h(e,t,r,i){for(var a=t.createFeature(r),n=0;e.next();)switch(e.tag()){case 1:var s=i[n++].name;a.attributes[s]=e.processMessage(f);break;case 2:a.geometry=e.processMessageWithArgs(c,t,r);break;case 4:a.centroid=e.processMessageWithArgs(p,t,r);break;default:e.skip()}return a}function y(e){for(var t=[1,1,1,1];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function m(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function v(e){for(var t={originPosition:a(0)};e.next();)switch(e.tag()){case 1:t.originPosition=a(e.getEnum());break;case 2:t.scale=e.processMessage(y);break;case 3:t.translate=e.processMessage(m);break;default:e.skip()}return t}function g(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function b(e,t){for(var r=t.createSpatialReference();e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return r}function _(e,t){var r=t.createFeatureResult();r.geometryType=n(t,0);for(var i=!1;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(g);break;case 7:r.geometryType=n(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(b,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(v);break;case 9:var a=e.getBool();r.exceededTransferLimit=a;break;case 13:t.addField(r,e.processMessage(s));break;case 15:i||(t.prepareFeatures(r),i=!0),t.addFeature(r,e.processMessageWithArgs(h,t,r,r.fields));break;case 2:case 6:default:e.skip()}return t.finishFeatureResult(r),r}function x(e,t){for(var r={};e.next();)switch(e.tag()){case 1:r.featureResult=e.processMessageWithArgs(_,t);break;default:e.skip()}return r}Object.defineProperty(t,"__esModule",{value:!0});var w=r.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),F=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],I=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],k=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(e,t){var r,i=(r=t)&&"dehydrated"===r.type?new u.Context(r):new d.Context;try{for(var a=new l(new Uint8Array(e),new DataView(e)),n={};a.next();)switch(a.tag()){case 2:n.queryResult=a.processMessageWithArgs(x,i);break;default:a.skip()}return n}catch(e){var s=new o("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return w.error(s),{queryResult:{featureResult:i.createFeatureResult()}}}}}.apply(null,i))||(e.exports=a)},1644:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(89),r(34),r(31),r(486),r(205)],void 0===(a=function(e,t,r,i,a,n,s){function o(e,t){return t}function l(e,t,r,i){switch(r){case 0:return c(e,t+i,0);case 1:return("lowerLeft"===e.originPosition?c:f)(e,t+i,1)}}function u(e,t,r,i){switch(r){case 0:return c(e,t+i,0);case 1:return("lowerLeft"===e.originPosition?c:f)(e,t+i,1);case 2:return c(e,t,2)}}function d(e,t,r,i){switch(r){case 0:return c(e,t+i,0);case 1:return("lowerLeft"===e.originPosition?c:f)(e,t+i,1);case 2:return c(e,t,3)}}function p(e,t,r,i){switch(r){case 0:return c(e,t+i,0);case 1:return("lowerLeft"===e.originPosition?c:f)(e,t+i,1);case 2:return c(e,t,2);case 3:return c(e,t,3)}}function c(e,t,r){var i=e.translate,a=e.scale;return i[r]+t*a[r]}function f(e,t,r){var i=e.translate,a=e.scale;return i[r]-t*a[r]}Object.defineProperty(t,"__esModule",{value:!0});var h=(y.prototype.createFeatureResult=function(){return new n.DehydratedFeatureSetClass},y.prototype.finishFeatureResult=function(e){this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0},y.prototype.createSpatialReference=function(){return new a},y.prototype.addField=function(e,t){e.fields.push(s.fromJSON(t));var r=e.fields.map(function(e){return e.name});this.AttributesConstructor=function(){for(var e=0,t=r;e<t.length;e++)this[t[e]]=null}},y.prototype.addFeature=function(e,t){var r=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(0<r)for(var i in t.attributes){var a=t.attributes[i];"string"==typeof a&&a.length>r&&(t.attributes[i]="")}e.features.push(t)},y.prototype.prepareFeatures=function(e){var a=this;switch(this.options.applyTransform&&e.transform&&(this.transform=e.transform,this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"point":this.addCoordinate=function(e,t,r,i){return a.addCoordinatePoint(e,t,i)},this.createGeometry=function(e){return a.createPointGeometry(e)};break;case"polygon":this.addCoordinate=function(e,t,r,i){return a.addCoordinatePolygon(e,t,i)},this.createGeometry=function(e){return a.createPolygonGeometry(e)};break;case"polyline":this.addCoordinate=function(e,t,r,i){return a.addCoordinatePolyline(e,t,i)},this.createGeometry=function(e){return a.createPolylineGeometry(e)};break;case"multipoint":this.addCoordinate=function(e,t,r,i){return a.addCoordinateMultipoint(e,t,i)},this.createGeometry=function(e){return a.createMultipointGeometry(e)};break;default:i.neverReached(e.geometryType)}},y.prototype.createFeature=function(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,new n.DehydratedFeatureClass(r.generateUID(),null,new this.AttributesConstructor)},y.prototype.addLength=function(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)},y.prototype.createPointGeometry=function(e){var t={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM};return t.hasZ&&(t.z=0),t.hasM&&(t.m=0),t},y.prototype.addCoordinatePoint=function(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:e.hasZ?e.z=t:e.m=t;break;case 3:e.m=t}},y.prototype.transformPathLikeValue=function(e,t){var r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)},y.prototype.addCoordinatePolyline=function(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)},y.prototype.addCoordinatePolygon=function(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)},y.prototype.addCoordinateMultipoint=function(e,t,r){0===r&&e.points.push([]);var i=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(i)},y.prototype.createPolygonGeometry=function(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},y.prototype.createPolylineGeometry=function(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},y.prototype.createMultipointGeometry=function(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},y.prototype.dehydratedAddPointsCoordinate=function(e,t,r){if(null===this.coordinateBuffer){var i=this.lengths.reduce(function(e,t){return e+t},0);this.coordinateBuffer=new Float64Array(i*this.vertexDimension)}0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var a=this.transformPathLikeValue(t,r),n=e[e.length-1];0===r&&n.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=a},y.prototype.deriveApplyTransform=function(e){var t=e.hasZ,r=e.hasM;return t&&r?p:t?u:r?d:l},y);function y(e){this.options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=o,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}t.Context=h}.apply(null,i))||(e.exports=a)},1645:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(487),r(493),r(302)],void 0===(a=function(e,t,r,i,a){Object.defineProperty(t,"__esModule",{value:!0});var n=(s.prototype.createFeatureResult=function(){return new i.default},s.prototype.prepareFeatures=function(){},s.prototype.finishFeatureResult=function(){},s.prototype.addFeature=function(e,t){e.features.push(t)},s.prototype.createFeature=function(){return new r.default},s.prototype.createSpatialReference=function(){return{wkid:0}},s.prototype.createGeometry=function(){return new a.default},s.prototype.addField=function(e,t){e.fields.push(t)},s.prototype.addCoordinate=function(e,t){e.coords.push(t)},s.prototype.addCoordinatePoint=function(e,t){e.coords.push(t)},s.prototype.addLength=function(e,t){e.lengths.push(t)},s.prototype.createPointGeometry=function(){return new a.default},s);function s(){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}t.Context=n}.apply(null,i))||(e.exports=a)},1651:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(5),r(29),r(22),r(501),r(1632)],void 0===(a=function(e,t,n,s,h,y,o){Object.defineProperty(t,"__esModule",{value:!0}),t.processAttachmentQueryResult=function(e,t){for(var r={},i=0,a=e;i<a.length;i++)for(var n=a[i],s=n.parentObjectId,o=n.parentGlobalId,l=0,u=n.attachmentInfos;l<u.length;l++){var d=u[l],p=d.id,c=h.addProxy(h.addTokenParameter(t+"/"+s+"/attachments/"+p)),f=y.fromJSON(d);f.set({url:c,parentObjectId:s,parentGlobalId:o}),r[s]?r[s].push(f):r[s]=[f]}return r},t.executeAttachmentQuery=function(e,t,r){var i,a={query:o.mapParameters(n({},e.query,{f:"json"},((i=t.toJSON()).attachmentTypes&&(i.attachmentTypes=i.attachmentTypes.join(",")),i.keywords&&(i.keywords=i.keywords.join(",")),i.globalIds&&(i.globalIds=i.globalIds.join(",")),i.objectIds&&(i.objectIds=i.objectIds.join(",")),i.size&&(i.size=i.size.join(",")),i)))};return r&&(a=n({},r,a)),s(e.path+"/queryAttachments",a)}}.apply(null,i))||(e.exports=a)},1655:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(1),r(0),r(91),r(5),r(28),r(2),r(303),r(1569),r(1651),r(1656),r(497),r(207),r(301),r(498)],void 0===(a=function(e,t,r,i,a,n,s,o,l,u,d,p,c,f,h,y){return v=o.declared(l),r(m,v),m.prototype.execute=function(e,t){return this.executeJSON(e,t).then(function(e){return f.fromJSON(e)})},m.prototype.executeJSON=function(e,t){return u.executeQuery(this.parsedUrl,this._normalizeQuery(e),n({},this.requestOptions,t)).then(function(e){return e.data})},m.prototype.executeForCount=function(e,t){return u.executeQueryForCount(this.parsedUrl,this._normalizeQuery(e),n({},this.requestOptions,t)).then(function(e){return e.data.count})},m.prototype.executeForExtent=function(e,t){return u.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(e),n({},this.requestOptions,t)).then(function(e){return{count:e.data.count,extent:s.Extent.fromJSON(e.data.extent)}})},m.prototype.executeForIds=function(e,t){return u.executeQueryForIds(this.parsedUrl,this._normalizeQuery(e),n({},this.requestOptions,t)).then(function(e){return e.data.objectIds})},m.prototype.executeRelationshipQuery=function(e,t){return e=y.from(e),(this.gdbVersion||this.source)&&(e=e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source})),p.executeRelationshipQuery(this.parsedUrl,e,n({},this.requestOptions,t)).then(function(e){var t=e.data,r={};return Object.keys(t).forEach(function(e){return r[e]=f.fromJSON(t[e])}),r})},m.prototype.executeAttachmentQuery=function(e,t){var r=this;return d.executeAttachmentQuery(this.parsedUrl,c.from(e),n({},this.requestOptions,t)).then(function(e){return d.processAttachmentQueryResult(e.data.attachmentGroups,r.parsedUrl.path)})},m.prototype._normalizeQuery=function(e){var t=h.from(e);return this.gdbVersion||this.source?(t===e?t.clone():t).set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source}):t},i([o.property()],m.prototype,"gdbVersion",void 0),i([o.property()],m.prototype,"source",void 0),i([o.subclass("esri.tasks.QueryTask")],m);function m(e){var t=v.call(this,e)||this;return t.gdbVersion=null,t.source=null,t}var v}.apply(null,i))||(e.exports=a)},1656:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(5),r(29),r(1632)],void 0===(a=function(e,t,a,n,s){function o(e){var t=e.toJSON();return t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.outFields&&(t.outFields=t.outFields.join(",")),t.outSpatialReference&&(t.outSR=t.outSR.wkid||JSON.stringify(t.outSR.toJSON()),delete t.outSpatialReference),t.source&&(t.layer=JSON.stringify({source:t.source}),delete t.source),t}Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryStringParameters=o,t.executeRelationshipQuery=function(e,t,r){var i={query:s.mapParameters(a({},e.query,{f:"json"},o(t)))};return r&&(i=a({},r,i)),n(e.path+"/queryRelatedRecords",i).then(function(e){for(var t=e.data,r=t.geometryType,i=t.spatialReference,a={},n=0,s=t.relatedRecordGroups;n<s.length;n++){var o=s[n],l={fields:void 0,objectIdFieldName:void 0,geometryType:r,spatialReference:i,features:o.relatedRecords};if(null!=o.objectId)a[o.objectId]=l;else for(var u in o)o.hasOwnProperty(u)&&"relatedRecords"!==u&&(a[o[u]]=l)}return e.data=a,e})}}.apply(null,i))||(e.exports=a)},1794:function(e,t,r){var i,a;i=[r.dj.c(e.i),t],void 0===(a=function(e,t){function r(e,t,r,i){var a=null,n=1e3;"number"==typeof t?(n=t,i=r):(a=t,n=r);function s(){u=0,e.apply(i,l)}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a&&a.apply(i,e),l=e,n?u=u||setTimeout(s,n):s()}var l,u=0;return o.remove=function(){u&&(clearTimeout(u),u=0)},o.forceUpdate=function(){u&&(clearTimeout(u),s())},o.hasPendingUpdates=function(){return!!u},o}Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=r,t.default=r}.apply(null,i))||(e.exports=a)},1911:function(e,t,r){var i,a;i=[r.dj.c(e.i),t],void 0===(a=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSourceLayer=function(e){if(e)return e.get("sourceLayer")||e.get("layer")}}.apply(null,i))||(e.exports=a)},2469:function(e,t,r){var i,a;i=[r(35),r(45),r(2470),r(2471),r(2472),r(2473),r(2474),r(2475),r(2476),r(2477),r(2478),r(2479),r(2480),r(2481),r(2482),r(2483),r(2484),r(2485),r(2486),r(2487),r(2488),r(2489),r(2490),r(2491),r(2492),r(2493),r(2494),r(2495),r(2496),r(2497),r(2498),r(2499),r(2500),r(2501),r(2502),r(2503),r(2504),r(2505),r(2506),r(2507)],void 0===(a=function(e,t){return t(e,"esri/widgets/Feature/nls/Feature",r.dj.c(),!1)}.apply(null,i))||(e.exports=a)},2470:function(e,t,r){e.exports={widgetLabel:"معلم",attach:"المرفقات",fields:"حقول",fieldsSummary:"قائمة البيانات الجدولية والقيم",media:"الوسائط",next:"التالي",noTitle:"بلا عنوان",previous:"السابق",lastEdited:"آخر تحرير في {date}.",lastCreated:"تم الإنشاء في {date}.",lastEditedByUser:"آخر تحرير من قبل {user} في {date}.",lastCreatedByUser:"تم الإنشاء من قبل {user} في {date}."}},2471:function(e,t,r){e.exports={widgetLabel:"Geoobjekt",attach:"Privici",fields:"Polja",fieldsSummary:"Popis atributa i vrijednosti",media:"Mediji",next:"Sljedeće",noTitle:"Neimenovano",previous:"Prethodno",lastEdited:"Posljednje uređivanje {date}.",lastCreated:"Stvoreno {date}.",lastEditedByUser:"Posljednje uređivanje {user} {date}.",lastCreatedByUser:"Stvorio {user} {date}."}},2472:function(e,t,r){e.exports={widgetLabel:"Entitat",attach:"Fitxers adjunts",fields:"Camps",fieldsSummary:"Llista d'atributs i valors",media:"Multimèdia",next:"Següent",noTitle:"Sense títol",previous:"Anterior",lastEdited:"Editat per última vegada el {date}.",lastCreated:"Creat el {date}.",lastEditedByUser:"Editat per última vegada per {user} el {date}.",lastCreatedByUser:"Creat per {user} el {date}."}},2473:function(e,t,r){e.exports={widgetLabel:"Prvek",attach:"Přílohy",fields:"Pole",fieldsSummary:"Seznam atributů a hodnot",media:"Média",next:"Další",noTitle:"Bez názvu",previous:"Předchozí",lastEdited:"Datum poslední úpravy {date}.",lastCreated:"Datum vytvoření {date}.",lastEditedByUser:"Poslední úpravu provedl(a) {user} dne {date}.",lastCreatedByUser:"Vytvořil(a) {user} dne {date}."}},2474:function(e,t,r){e.exports={widgetLabel:"Objekt",attach:"Vedhæftninger",fields:"Felter",fieldsSummary:"Liste med attributter og værdier",media:"Medier",next:"Næste",noTitle:"Uden titel",previous:"Forrige",lastEdited:"Senest redigeret d. {date}.",lastCreated:"Oprettet d. {date}.",lastEditedByUser:"Senest redigeret af {user} d. {date}.",lastCreatedByUser:"Oprettet af {user} d. {date}."}},2475:function(e,t,r){e.exports={widgetLabel:"Feature",attach:"Anlagen",fields:"Felder",fieldsSummary:"Liste der Attribute und Werte",media:"Medien",next:"Nächstes",noTitle:"Ohne Titel",previous:"Vorheriges",lastEdited:"Zuletzt bearbeitet am {date}.",lastCreated:"Erstellt am {date}.",lastEditedByUser:"Zuletzt bearbeitet von {user} am {date}.",lastCreatedByUser:"Erstellt von {user} am {date}."}},2476:function(e,t,r){e.exports={widgetLabel:"Στοιχείο",attach:"Συνημμένα",fields:"Πεδία",fieldsSummary:"Λίστα γνωρισμάτων και τιμών",media:"Πολυμέσα",next:"Επόμενο",noTitle:"Χωρίς τίτλο",previous:"Προηγούμενο",lastEdited:"Τελευταία επεξεργασία στις {date}.",lastCreated:"Δημιουργήθηκε στις {date}.",lastEditedByUser:"Τελευταία επεξεργασία από τον χρήστη {user} στις {date}.",lastCreatedByUser:"Δημιουργήθηκε από τον χρήστη {user} στις {date}."}},2477:function(e,t,r){e.exports={widgetLabel:"Entidad",attach:"Adjuntos",fields:"Campos",fieldsSummary:"Lista de atributos y valores",media:"Multimedia",next:"Siguiente",noTitle:"Sin título",previous:"Anterior",lastEdited:"Última edición el {date}.",lastCreated:"Creado el {date}.",lastEditedByUser:"Última edición por {user} el {date}.",lastCreatedByUser:"Creado por {user} el {date}."}},2478:function(e,t,r){e.exports={widgetLabel:"Objekt",attach:"Manused",fields:"Väljad",fieldsSummary:"Atribuutide ja väärtuste loend",media:"Meedia",next:"Järgmine",noTitle:"Pealkirjata",previous:"Eelmine",lastEdited:"Viimati muudetud {date}.",lastCreated:"Loodud {date}.",lastEditedByUser:"Viimati muutnud {user} kuupäeval {date}.",lastCreatedByUser:"Loonud {user} kuupäeval {date}."}},2479:function(e,t,r){e.exports={widgetLabel:"Ominaisuus",attach:"Liitteet",fields:"Kentät",fieldsSummary:"Ominaisuustietojen ja arvojen luettelo",media:"Media",next:"Seuraava",noTitle:"Nimetön",previous:"Edellinen",lastEdited:"Muokattu viimeksi: {date}.",lastCreated:"Luontipäivä: {date}.",lastEditedByUser:"{user} on muokannut viimeksi {date}.",lastCreatedByUser:"{user} on luonut {date}."}},2480:function(e,t,r){e.exports={widgetLabel:"Entité",attach:"Pièces jointes",fields:"Champs",fieldsSummary:"Liste des attributs et des valeurs",media:"Contenu",next:"Suivant",noTitle:"Sans titre",previous:"Précédent",lastEdited:"Dernière mise à jour le {date}.",lastCreated:"Création le {date}",lastEditedByUser:"Dernière mise à jour par {user} le {date}.",lastCreatedByUser:"Création par {user} le {date}."}},2481:function(e,t,r){e.exports={widgetLabel:"Geoobjekt",attach:"Privici",fields:"Polja",fieldsSummary:"Popis atributa i vrijednosti",media:"Mediji",next:"Sljedeće",noTitle:"Neimenovano",previous:"Prethodno",lastEdited:"Posljednje uređivanje {date}.",lastCreated:"Stvoreno {date}.",lastEditedByUser:"Posljednje uređivanje {user} {date}.",lastCreatedByUser:"Stvorio {user} {date}."}},2482:function(e,t,r){e.exports={widgetLabel:"Elem",attach:"Csatolmányok",fields:"Mezők",fieldsSummary:"Attribútumok és értékek listája",media:"Média",next:"Következő",noTitle:"Cím nélkül",previous:"Előző",lastEdited:"Utoljára szerkesztve: {date}.",lastCreated:"Létrehozva: {date}.",lastEditedByUser:"Utoljára szerkesztette {user} ekkor: {date}.",lastCreatedByUser:"Létrehozta {user} ekkor: {date}."}},2483:function(e,t,r){e.exports={widgetLabel:"ישות",attach:"קבצים מצורפים",fields:"שדות",fieldsSummary:"רשימת מאפיינים וערכים",media:"מדיה",next:"הבא",noTitle:"ללא כותרת",previous:"הקודם",lastEdited:"עריכה אחרונה ב-{date}.",lastCreated:"נוצר ב-{date}.",lastEditedByUser:"עריכה אחרונה על-ידי {user} ב-{date}.",lastCreatedByUser:"נוצר על-ידי {user} ב-{date}."}},2484:function(e,t,r){e.exports={widgetLabel:"Fitur",attach:"Lampiran",fields:"Kolom",fieldsSummary:"Daftar atribut dan nilai",media:"Media",next:"Berikutnya",noTitle:"Tidak berjudul",previous:"Sebelumnya",lastEdited:"Terakhir diedit pada {date}.",lastCreated:"Dibuat pada {date}.",lastEditedByUser:"Terakhir diedit oleh {user} pada {date}.",lastCreatedByUser:"Dibuat oleh {user} pada {date}."}},2485:function(e,t,r){e.exports={widgetLabel:"Feature",attach:"Allegati",fields:"Campi",fieldsSummary:"Elenco di attributi e valori",media:"File multimediali",next:"Successivo",noTitle:"Senza titolo",previous:"Precedente",lastEdited:"Ultima modifica in data {date}.",lastCreated:"Creato in data {date}.",lastEditedByUser:"Ultima modifica da parte di {user} in data {date}.",lastCreatedByUser:"Creato da {user} in data {date}."}},2486:function(e,t,r){e.exports={widgetLabel:"フィーチャ",attach:"添付ファイル",fields:"フィールド",fieldsSummary:"属性および値のリスト",media:"メディア",next:"次へ",noTitle:"無題",previous:"前へ",lastEdited:"{date} に最後に編集されました。",lastCreated:"{date} に作成されました。",lastEditedByUser:"{user} によって {date} に最後に編集されました。",lastCreatedByUser:"{user} によって {date} に作成されました。"}},2487:function(e,t,r){e.exports={widgetLabel:"피처(Feature)",attach:"첨부 파일",fields:"필드",fieldsSummary:"속성 및 값 목록",media:"미디어",next:"다음",noTitle:"제목 없음",previous:"이전",lastEdited:"{date}에 마지막으로 편집되었습니다.",lastCreated:"{date}에 생성되었습니다.",lastEditedByUser:"{user}이(가) {date}에 마지막으로 편집했습니다.",lastCreatedByUser:"{user}이(가) {date}에 생성했습니다."}},2488:function(e,t,r){e.exports={widgetLabel:"Elements",attach:"Uzdevumi",fields:"Lauki",fieldsSummary:"Atribūtu un vērtību saraksts",media:"Informācijas datu nesēji",next:"Nākošais",noTitle:"Bez nosaukuma",previous:"Iepriekšējais",lastEdited:"Pēdējoreiz rediģēts {date}.",lastCreated:"Izveides datums: {date}.",lastEditedByUser:"Pēdējoreiz rediģēja lietotājs {user} {date}.",lastCreatedByUser:"Izveidoja lietotājs {user} {date}."}},2489:function(e,t,r){e.exports={widgetLabel:"Elementas",attach:"Priedai",fields:"Laukai",fieldsSummary:"Atributų ir reikšmių sąrašas",media:"Daugialypė informacija",next:"Toliau",noTitle:"Pavadinimo nėra",previous:"Ankstesnis",lastEdited:"Paskutinį kartą redaguota {date}.",lastCreated:"Sukurta {date}.",lastEditedByUser:"Paskutinį kartą redagavo {user} {date}.",lastCreatedByUser:"Sukūrė {user} {date}."}},2490:function(e,t,r){e.exports={widgetLabel:"Object",attach:"Bijlagen",fields:"Velden",fieldsSummary:"Lijst met attributen en waarden",media:"Media",next:"Volgende",noTitle:"Naamloos",previous:"Vorige",lastEdited:"Laatst bewerkt op {date}.",lastCreated:"Gemaakt op {date}.",lastEditedByUser:"Laatst bewerkt door {user} op {date}.",lastCreatedByUser:"Gemaakt door {user} op {date}."}},2491:function(e,t,r){e.exports={widgetLabel:"Geoobjekt",attach:"Vedlegg",fields:"Felter",fieldsSummary:"Liste med attributter og verdier",media:"Medier",next:"Neste",noTitle:"Uten tittel",previous:"Forrige",lastEdited:"Sist redigert den {date}.",lastCreated:"Opprettet den {date}.",lastEditedByUser:"Sist redigert av {user} den {date}.",lastCreatedByUser:"Opprettet av {user} den {date}."}},2492:function(e,t,r){e.exports={widgetLabel:"Obiekt",attach:"Załączniki",fields:"Pola",fieldsSummary:"Lista atrybutów i wartości",media:"Nośnik",next:"Następny",noTitle:"Bez tytułu",previous:"Poprzedni",lastEdited:"Data ostatniej edycji: {date}.",lastCreated:"Data utworzenia: {date}",lastEditedByUser:"Ostatnio edytowane przez użytkownika {user} dnia {date}.",lastCreatedByUser:"Utworzone przez użytkownika {user} dnia {date}."}},2493:function(e,t,r){e.exports={widgetLabel:"Recurso",attach:"Anexos",fields:"Campos",fieldsSummary:"Lista de atributos e valores",media:"Mídia",next:"Próximo",noTitle:"Sem título",previous:"Anterior",lastEdited:"Editado pela última vez em {date}.",lastCreated:"Criado em {date}.",lastEditedByUser:"Editado pela última vez por {user} em {date}.",lastCreatedByUser:"Criado por {user} em {date}."}},2494:function(e,t,r){e.exports={widgetLabel:"Elemento",attach:"Anexos",fields:"Campos",fieldsSummary:"Lista de atributos e valores",media:"Imagem",next:"Seguinte",noTitle:"Sem título",previous:"Anterior",lastEdited:"Editado pela última vez a {date}.",lastCreated:"Criado a {date}.",lastEditedByUser:"Editado pela última vez por {user} a {date}.",lastCreatedByUser:"Criado por {user} a {date}."}},2495:function(e,t,r){e.exports={widgetLabel:"Obiect spațial",attach:"Ataşări",fields:"Câmpuri",fieldsSummary:"Listă de atribute şi valori",media:"Media",next:"Următorul",noTitle:"Fără titlu",previous:"Anterior",lastEdited:"Ultima editare pe {date}.",lastCreated:"Creat pe {date}.",lastEditedByUser:"Ultima editare efectuată de {user} pe {date}.",lastCreatedByUser:"Creat de {user} pe {date}."}},2496:function(e,t,r){e.exports={widgetLabel:"Объект",attach:"Вложения",fields:"Поля",fieldsSummary:"Список атрибутов и значений",media:"Медиа",next:"Следующий",noTitle:"Без названия",previous:"Предыдущий",lastEdited:"Последнее изменение {date}.",lastCreated:"Создано {date}.",lastEditedByUser:"Последнее изменение от {user} {date}.",lastCreatedByUser:"Создано {user} {date}."}},2497:function(e,t,r){e.exports={widgetLabel:"Funkcionalnost",attach:"Priloge",fields:"Polj",fieldsSummary:"Seznam atributov in vrednosti",media:"Omrežja",next:"Naslednji",noTitle:"Neimenovano",previous:"Prejšnji",lastEdited:"Nazadnje urejeno dne {date}.",lastCreated:"Ustvarjeno dne {date}.",lastEditedByUser:"Nazadnje uredil {user} dne {date}.",lastCreatedByUser:"Ustvaril {user} dne {date}."}},2498:function(e,t,r){e.exports={widgetLabel:"Funkcionalnost",attach:"Prilozi",fields:"Polja",fieldsSummary:"Lista atributa i vrednosti",media:"Mediji",next:"Sledeće",noTitle:"Bez naslova",previous:"Prethodno",lastEdited:"Poslednji put izmenjeno {date}.",lastCreated:"Kreirano {date}.",lastEditedByUser:"Poslednji put izmenio {user} dana {date}.",lastCreatedByUser:"Kreirao {user} dana {date}."}},2499:function(e,t,r){e.exports={widgetLabel:"Geoobjekt",attach:"Bilagor",fields:"Fält",fieldsSummary:"Lista med attribut och värden",media:"Media",next:"Nästa",noTitle:"Namnlös",previous:"Föregående",lastEdited:"Senast redigerad den {date}.",lastCreated:"Skapad den {date}.",lastEditedByUser:"Senast redigerad av {user} den {date}.",lastCreatedByUser:"Skapad av {user} den {date}."}},2500:function(e,t,r){e.exports={widgetLabel:"ฟีเจอร์",attach:"แนบ",fields:"ฟิลด์",fieldsSummary:"รายการของข้อมูลเชิงบรรยายและค่าของข้อมูล",media:"สื่อ",next:"ถัดไป",noTitle:"ไม่มีชื่อเรื่อง",previous:"ก่อนหน้า",lastEdited:"แก้ไขล่าสุดเมื่อ {date}",lastCreated:"สร้างขึ้นเมื่อ {date}",lastEditedByUser:"แก้ไขล่าสุดโดย {user} เมื่อ {date}",lastCreatedByUser:"สร้างขึ้นโดย {user} เมื่อ {date}"}},2501:function(e,t,r){e.exports={widgetLabel:"Detay",attach:"Ekler",fields:"Alanlar",fieldsSummary:"Öznitelik ve değer listesi",media:"Ortam",next:"Sonraki",noTitle:"Adsız",previous:"Önceki",lastEdited:"Son düzenlenme tarihi {date}.",lastCreated:"Oluşturulduğu tarih {date}.",lastEditedByUser:"En son {user} tarafından {date} tarihinde düzenlenmiştir.",lastCreatedByUser:"{user} tarafından {date} tarihinde oluşturulmuştur."}},2502:function(e,t,r){e.exports={widgetLabel:"Об’єкт",attach:"Прикріплення",fields:"Поля",fieldsSummary:"Список атрибутів та значень",media:"Медіа",next:"Далі",noTitle:"Без заголовка",previous:"Назад",lastEdited:"Востаннє відредаговано {date}.",lastCreated:"Створено {date}.",lastEditedByUser:"Востаннє відредаговано {user} {date}.",lastCreatedByUser:"Створено {user} {date}."}},2503:function(e,t,r){e.exports={widgetLabel:"Đối tượng",attach:"Tệp đính kèm",fields:"Trường",fieldsSummary:"Danh sách các thuộc tính và giá trị",media:"Phương tiện truyền thông",next:"Tiếp theo",noTitle:"Chưa có tiêu đề",previous:"Trước",lastEdited:"Chỉnh sửa lần cuối vào {date}.",lastCreated:"Tạo vào {date}.",lastEditedByUser:"Chỉnh sửa lần cuối bởi {user} vào {date}.",lastCreatedByUser:"Tạo bởi {user} vào {date}."}},2504:function(e,t,r){e.exports={widgetLabel:"要素",attach:"附件",fields:"字段",fieldsSummary:"属性和值列表",media:"媒体",next:"下一页",noTitle:"无标题",previous:"上一页",lastEdited:"最后编辑于 {date}。",lastCreated:"创建于 {date}。",lastEditedByUser:"最后由 {user} 在 {date} 编辑。",lastCreatedByUser:"由 {user} 在 {date} 创建。"}},2505:function(e,t,r){e.exports={widgetLabel:"圖徽",attach:"附件",fields:"欄位",fieldsSummary:"屬性和值的清單",media:"媒體",next:"下一步",noTitle:"未命名",previous:"上一步",lastEdited:"上次編輯日期為 {date}。",lastCreated:"建立日期為 {date}。",lastEditedByUser:"上次編輯日期為 {date}，由 {user} 執行。",lastCreatedByUser:"由 {user} 在 {date} 建立。"}},2506:function(e,t,r){e.exports={widgetLabel:"圖徽",attach:"附件",fields:"欄位",fieldsSummary:"屬性和值的清單",media:"媒體",next:"下一步",noTitle:"未命名",previous:"上一步",lastEdited:"上次編輯日期為 {date}。",lastCreated:"建立日期為 {date}。",lastEditedByUser:"上次編輯日期為 {date}，由 {user} 執行。",lastCreatedByUser:"由 {user} 在 {date} 建立。"}},2507:function(e,t,r){e.exports={root:{widgetLabel:"Feature",attach:"Attachments",fields:"Fields",fieldsSummary:"List of attributes and values",media:"Media",next:"Next",noTitle:"Untitled",previous:"Previous",lastEdited:"Last edited on {date}.",lastCreated:"Created on {date}.",lastEditedByUser:"Last edited by {user} on {date}.",lastCreatedByUser:"Created by {user} on {date}."},ar:1,bs:1,ca:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,hr:1,hu:1,he:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sl:1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}},2508:function(e,t,O){var r,i;r=[O.dj.c(e.i),t,O(1),O(0),O(5),O(9),O(10),O(89),O(95),O(6),O(23),O(8),O(3),O(4),O(64),O(1794),O(16),O(2),O(133),O(226),O(57),O(336),O(536),O(335),O(497),O(1911),O(2509),O(32)],void 0===(i=function(e,t,r,i,d,f,h,a,p,l,n,c,s,y,o,u,m,v,g,b,_,x,A,w,F,E,I,k){function T(e){return"string"==typeof e?e.replace(/(\n)/gi,'<br class="esri-text-new-line" />'):e}function C(e,t){return e&&"function"==typeof e.getField?e.getField(t):null}function S(e){return(""+e).trim()}function M(e){return e.replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"})}var L,j=["$datastore","$map","$layer"],P=s.getLogger("esri.widgets.FeatureViewModel"),U=/^\s*expression\//i,R=g.convertDateFormatToIntlOptions("short-date-short-time");return L=v.declared(I),r(N,L),N.prototype.destroy=function(){this._clear(),this._cancelFeatureQuery(),this._handles.destroy(),this._handles=null,this.graphic=null,this._graphic=null},Object.defineProperty(N.prototype,"spatialReference",{get:function(){return this.get("view.spatialReference")||null},set:function(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference")},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"map",{get:function(){return this.get("view.map")||null},set:function(e){void 0!==e?this._override("map",e):this._clearOverride("map")},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"waitingForContent",{get:function(){return!!this._featureAbortController},enumerable:!0,configurable:!0}),N.prototype._clear=function(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)},N.prototype._graphicChanged=function(){return h(this,void 0,void 0,function(){var t,r,i,a;return f(this,function(e){switch(e.label){case 0:if(this._cancelFeatureQuery(),this._clear(),t=this.graphic,r=t?t.clone():null,!(this._graphic=r))return[2];i=y.createAbortController(),this._featureAbortController=i,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._queryFeature({signal:i.signal})];case 2:return e.sent(),[3,4];case 3:return a=e.sent(),P.error("error","error loading template",a),[3,4];case 4:return this._featureAbortController=null,[2]}})})},N.prototype._cancelFeatureQuery=function(){var e=this._featureAbortController;e&&e.abort(),this._featureAbortController=null},N.prototype._compileContent=function(e,a){var n=this;return e&&(e.nodeName||e&&k.isWidgetBase(e)||k.isWidget(e))?e:this._graphic?"string"==typeof e?this._compileText(new x({text:e})).text:Array.isArray(e)?e.map(function(e,t){var r=a&&a[t],i=r&&r.value;return"attachments"===e.type?n._compileAttachments(e,i):"fields"===e.type?n._compileFields(e):"media"===e.type?n._compileMedia(e):"text"===e.type?n._compileText(e):void 0}):void(e&&P.warn("invalid content type.")):void 0},N.prototype._compileFields=function(e){var i=this,t=this._effectivePopupTemplate,r=c.clone(e),a=t&&t.expressionInfos,n=r.fieldInfos?void 0:t&&t.fieldInfos,s=r.fieldInfos||c.clone(n),o=[];return s&&s.forEach(function(e){var t=e.fieldName.toLowerCase();if(!e.hasOwnProperty("visible")||e.visible){var r=i._isExpressionField(t)?i._getExpressionInfo(a,t):null;e.label=r?r.title:e.label,o.push(e)}}),r.fieldInfos=o,r},N.prototype._setImageValue=function(e){var t=e.value,r=e.formattedAttributes,i=e.layer,a=t.linkURL,n=t.sourceURL;if(n){var s=this._fixTokens(n,i);t.sourceURL=this._substituteAttributes(r,s)}if(a){var o=this._fixTokens(a,i);t.linkURL=this._substituteAttributes(r,o)}},N.prototype._compileMedia=function(e){var n=this,t=this._graphic,r=c.clone(e),i=r.mediaInfos,s=t.attributes,o=E.getSourceLayer(t),l=this.formattedAttributes.global,u=d({},l,s);return r.mediaInfos=i&&i.map(function(e){var t=c.clone(e);if(t){var r=t.title?n._processFieldsInLinks(t.title,u):"",i=t.caption?n._processFieldsInLinks(t.caption,u):"";if(t.title=r?n._substituteAttributes(l,r):"",t.caption=i?n._substituteAttributes(l,i):"","image"===t.type){var a=t.value;return n._setImageValue({value:a,formattedAttributes:l,layer:o}),t.value.sourceURL?t:void 0}if("pie-chart"===t.type||"line-chart"===t.type||"column-chart"===t.type||"bar-chart"===t.type)return a=t.value,n._setChartValue({value:a,chartType:t.type,attributes:s,formattedAttributes:l,layer:o}),t}}).filter(Boolean),r},N.prototype._normalizeTemplateFields=function(e){var t=this._fieldInfoMap.get(e.toLowerCase());return"{"+(t&&t.fieldName||e)+"}"},N.prototype._substituteAttributes=function(e,t){var r=this;return S(this._removeEmptyHref(p.substitute(o.replace(t,function(e){return r._normalizeTemplateFields(e)}),e)))},N.prototype._compileText=function(e){var t=c.clone(e);if(t&&t.text){var r=this._graphic.attributes,i=this.formattedAttributes.global,a=this._processFieldsInLinks(t.text,d({},i,r));t.text=this._substituteAttributes(i,a)}return t},N.prototype._formatEditInfo=function(e,t){var r=e.creatorField,i=e.creationDateField,a=e.editorField,n=e.editDateField;if(t){var s=t[n];if("number"==typeof s){var o=t[a];return{type:"edit",date:p.formatDate(s,R),user:o}}var l=t[i];if("number"==typeof l){var u=t[r];return{type:"create",date:p.formatDate(l,R),user:u}}}},N.prototype._compileLastEditInfo=function(){var e=this._effectivePopupTemplate,t=this._graphic;if(e){var r=e.lastEditInfoEnabled,i=t.get("sourceLayer.editFieldsInfo");if(r&&i)return this._formatEditInfo(i,t.attributes)}},N.prototype._compileTitle=function(){var e=this._effectivePopupTemplate,t=this._graphic,r=e&&e.title,i=t.attributes,a=this.formattedAttributes.global,n="function"==typeof r?r.call(null,{graphic:t}):r;if("string"==typeof n&&n){var s=this._processFieldsInLinks(n,d({},a,i));return this._substituteAttributes(a,s)}return""},N.prototype._getExpressionInfo=function(e,t){if(this._isExpressionField(t)){var r,i=t.replace(U,"").toLowerCase();return e.some(function(e){return e.name.toLowerCase()===i&&(r=e,!0)}),r}},N.prototype._fixTokens=function(e,a){return e.replace(/(\{([^\{\r\n]+)\})/g,function(e,t,r){var i=C(a,r);return i?"{"+i.name+"}":t})},N.prototype._encodeAttributes=function(e){var t=e?c.clone(e):{};return Object.keys(t).forEach(function(e){return function(e,t){var r=t[e];if("string"==typeof r){var i=encodeURIComponent(r).replace(/\'/g,"&apos;");t[e]=i}}(e,t)}),t},N.prototype._createfieldInfoMap=function(e,r){var i=this,a=new Map;return e&&e.forEach(function(e){var t=i._getFixedFieldName(e.fieldName,r);e.fieldName=t,a.set(t.toLowerCase(),e)}),a},N.prototype._formatAttributeValue=function(e){var t=e.value,r=e.fieldName,i=e.fieldInfos,a=e.fieldInfoMap,n=e.layer;if(null==t)return t;var s=this._getDomainName(r,t);if(s)return s;var o=this._getTypeName(r);if(o)return o;if(a.get(r.toLowerCase()))return this._formatValueToFieldInfo(t,{fieldInfos:i,fieldName:r,layer:n});var l=n&&n.fieldsIndex;return l&&l.isDateField(r)?p.formatDate(t,R):T(t)},N.prototype._formatAttributes=function(r){var i=this,e=this._graphic,a=E.getSourceLayer(e),n=c.clone(e.attributes);this.addRelatedFeatureAttributes(n);var s=this._createfieldInfoMap(r,a);return this._fieldInfoMap=s,Object.keys(n).forEach(function(e){var t=n[e];n[e]=i._formatAttributeValue({fieldName:e,fieldInfos:r,fieldInfoMap:s,layer:a,value:t})}),n},N.prototype._formatValueToFieldInfo=function(e,t){var r=t.fieldInfos,i=t.fieldName,a=this._getFieldInfo(r,i),n=c.clone(a),s=t.preventPlacesFormatting,o=C(t.layer,i);if(o&&"date"===o.type){var l=n.format||new w;l.dateFormat=l.dateFormat||"short-date-short-time",n.format=l}var u=n&&n.format;return"string"==typeof e||null==e||null==u?e:s?b.formatNumber(e,d({},b.convertNumberFormatToIntlOptions(u),{minimumFractionDigits:0,maximumFractionDigits:20})):u.format(e)},N.prototype._getDomainName=function(e,t){if(this.isRelatedField(e))return null;var r=this._graphic,i=E.getSourceLayer(r);if(!i||"function"!=typeof i.getFieldDomain)return null;var a=i.getFieldDomain(e,{feature:r});return a&&"coded-value"===a.type?a.getName(t):null},N.prototype._getFieldInfo=function(e,t){if(e&&e.length&&t){var r=t.toLowerCase(),i=void 0;return e.some(function(e){return!(!e.fieldName||e.fieldName.toLowerCase()!==r||(i=e,0))}),i}},N.prototype._getTypeName=function(e){if(this.isRelatedField(e))return null;var t=this._graphic,r=E.getSourceLayer(t);if(!r||"function"!=typeof r.getFeatureType)return null;var i=r.typeIdField;if(!i||e!==i)return null;var a=r.getFeatureType(t);return a?a.name:null},N.prototype._removeEmptyHref=function(e){return e.replace(/href=(""|'')/gi,"")},N.prototype._processFieldsInLinks=function(e,o){var t=this.get("_graphic.layer"),r=this._fixTokens(e,t),l=this._encodeAttributes(o);return r?r.replace(/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,function(e,t,r){return i=e,n=o,s=l,a=S(a=t||r),p.substitute(i,a&&"{"===a[0]?n:s);var i,a,n,s}):r},N.prototype._compileAttachments=function(e,t){var r=c.clone(e);return!t||t&&0===t.length||(r.attachmentInfos=t),r},N.prototype._queryAttachments=function(){var e=this._graphic,t=E.getSourceLayer(e);if(!t)return y.resolve([]);var r="scene"===t.type&&t.associatedLayer?t.associatedLayer:t;if(r&&"function"==typeof r.queryAttachments){var i=r,a=i.objectIdField,n=e.attributes,s=n&&n[a],o=new F({objectIds:[s],returnMetadata:!0});return i.queryAttachments(o).then(function(e){return e[s]||[]})}return y.resolve([])},N.prototype._queryContentElements=function(e){var i=this;if(!Array.isArray(e))return y.resolve();var a={};return e.forEach(function(e,t){if("attachments"===e.type){var r=i._queryAttachments();r&&(a[t]=r)}}),Object.keys(a).length?y.eachAlways(a):y.resolve()},N.prototype._getContent=function(){var e=this._effectivePopupTemplate,t=this._graphic,r=e&&e.content,i="function"==typeof r?r.call(null,{graphic:t}):r;return y.isPromiseLike(i)?i:y.resolve(i)},N.prototype._querySourceLayer=function(e,t){var r=e.layer,i=e.outFields,a=e.objectIds;if("function"!=typeof r.queryFeatures||!a){var n="Could not query required fields for the specified layer. Some fields will not be available.",s=new l("query-required-fields",n,{outFields:i,objectIds:a});return P.warn("query-required-fields",n),y.reject(s)}var o=r.createQuery();return o.objectIds=a,o.outFields=i,o.returnGeometry=!0,r.queryFeatures(o,t).then(function(e){return e.features[0]})},N.prototype._queryRequiredFieldsFeature=function(r){var i=this,a=this._graphic,n=this._effectivePopupTemplate,s=a.sourceLayer;return s&&n?("function"==typeof s.load?s.load(r):y.resolve()).then(function(){var e=a.attributes[s.objectIdField],t="number"==typeof e?[e]:void 0;return n.getRequiredFields(s.fields).then(function(e){return _.featureHasFields(e,a)?null:i._querySourceLayer({layer:s,outFields:e,objectIds:t},r)})}):y.resolve(null)},N.prototype._queryFeature=function(n){var s=this,o=this._featureAbortController,l=this._graphic;return this._effectivePopupTemplate=l&&l.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled),this._getContent().then(function(r){if(o===s._featureAbortController&&l){var e=s._checkForRelatedFeatures(r,n),t=s._createFormattedExpressions().then(function(e){l.attributes=d({},l.attributes,e)}),i=s._queryContentElements(r).then(function(e){return s._contentResponse=e}),a=s._queryRequiredFieldsFeature(n).then(function(e){e&&(l.geometry=e.geometry,l.attributes=d({},l.attributes,e.attributes))});return y.eachAlways([e,t,i,a]).then(function(){if(o===s._featureAbortController&&l){s._set("formattedAttributes",s._createFormattedAttributes(r)),s._set("title",s._compileTitle());var e=s._compileLastEditInfo();s._set("lastEditInfo",e||null);var t=s._compileContent(r,s._contentResponse);return s._set("content",t||null),t}})}})},N.prototype._isExpressionField=function(e){return U.test(e)},N.prototype._formatArcadeArray=function(e){return'<ul class="esri-widget__list">'+e.map(function(e){return"<li>"+("string"==typeof e?T(M(e)):e)+"</li>"}).join("")+"</ul>"},N.prototype._formatArcadeDictionary=function(r){return'<table class="esri-widget__table">'+r.keys().map(function(e){var t=r.field(e);return"<tr><th>"+e+"</th><td>"+("string"==typeof t?T(M(t)):t)+"</td></tr>"}).join("")+"</table>"},N.prototype._createFormattedExpressions=function(){return h(this,void 0,void 0,function(){var t,r,u,i,a,d,p,n,s,o,l,c=this;return f(this,function(e){switch(e.label){case 0:return r=(t=this)._effectivePopupTemplate,u=t._graphic,i=r&&r.expressionInfos,a=[],d={},i&&i.length?[4,function(){return h(this,void 0,void 0,function(){return f(this,function(e){return[2,y.create(function(t){O.e(13).then(function(){var e=[O(1588)];(function(e){t(e)}).apply(null,e)}).catch(O.oe)})]})})}()]:[2,d];case 1:for(p=e.sent(),n=function(e){var s="expression/"+e.name,o=p.createSyntaxTree(e.expression),l=j.filter(function(e){return p.hasVariable(o,e)}),t=p.loadScriptDependencies(o,!0,l).then(function(){return h(c,void 0,void 0,function(){var t,r,i,a,n=this;return f(this,function(e){return t=this.spatialReference,r=p.getViewInfo({spatialReference:t}),(i=p.createExecContext(u,r)).useAsync=!0,this._addVarsToContext(p,l,i,r),a=p.createFunction(o,i),[2,p.executeAsyncFunction(a,i).then(function(e){d[s]="string"==typeof e?T(M(e)):Array.isArray(e)?n._formatArcadeArray(e):e&&"esri.arcade.Dictionary"===e.declaredClass?n._formatArcadeDictionary(e):e},function(e){return P.error("arcade-execution-error",e)})]})})});a.push(t)},s=0,o=i;s<o.length;s++)l=o[s],n(l);return[2,y.eachAlways(a).then(function(){return d})]}})})},N.prototype._addVarsToContext=function(i,e,a,n){var s=this.graphic,o=this.map;e.forEach(function(e){var t=e.toLowerCase(),r={map:o,spatialReference:n.sr};"$map"===t&&(a.vars[t]=i.convertMapToFeatureSetCollection(r)),"$layer"===t&&(a.vars[t]=i.convertFeatureLayerToFeatureSet(s.sourceLayer,n.sr)),"$datastore"===t&&(a.vars[t]=i.convertServiceUrlToWorkspace(s.sourceLayer.url,n.sr))})},N.prototype._createFormattedAttributes=function(e){var r=this,t=this._effectivePopupTemplate,i=t&&t.fieldInfos,a={global:this._formatAttributes(i),content:[]};return Array.isArray(e)&&e.forEach(function(e,t){"fields"===e.type&&e.fieldInfos&&(a.content[t]=r._formatAttributes(e.fieldInfos))}),a},N.prototype._getAllFieldInfos=function(e){var t=this._effectivePopupTemplate,r=[],i=t&&t.fieldInfos;return i&&r.push.apply(r,i),e&&Array.isArray(e)&&e.forEach(function(e){if("fields"===e.type){var t=e&&e.fieldInfos;r.push.apply(r,t)}}),r},N.prototype._checkForRelatedFeatures=function(e,t){var r=this._graphic,i=this._getAllFieldInfos(e);return this.queryRelatedInfos(r,i,t)},N.prototype._getTooltip=function(e){var t=e.label,r=e.value;return"pie-chart"===e.chartType?t:t+":\n"+r},N.prototype._getChartOption=function(e){var t=e.value,r=e.attributes,i=e.formattedAttributes,a=e.fieldName,n=e.relatedFieldName,s=e.fieldInfos,o=e.chartType,l=e.index,u=this._graphic,d=E.getSourceLayer(u),p=t.normalizeField,c=t.tooltipField,f=p?this.isRelatedField(p)?r[this.getRelatedFieldInfo(p).fieldName]:r[p]:null,h=n&&void 0!==r[n]?r[n]:void 0!==r[a]?r[a]:i[a],y=void 0===h?null:h&&f?h/f:h,m=new A({x:l,y:y});if(this.isRelatedField(a)){var v=this.getRelatedFieldInfo(a),g=this.getRelatedFieldInfo(c),b=g?g.fieldName:null,_=this._formatValueToFieldInfo(y,{fieldInfos:s,fieldName:n,layer:d,preventPlacesFormatting:!!f}),x=v?v.label||v.fieldName:n,w=b&&void 0!==r[b]?r[b]:x;return m.tooltip=this._getTooltip({label:w,chartType:o,value:_}),m}var F=this._getFieldInfo(s,a),I=this._getFixedFieldName(a,d),k=F?F.label||F.fieldName:a,T=c&&void 0!==i[c]?i[c]:k,C=i[I];return m.tooltip=this._getTooltip({label:T,chartType:o,value:C}),m},N.prototype._getFixedFieldName=function(e,t){var r=C(t,e);return r?r.name:e},N.prototype._getFixedFieldNames=function(e,t){var r=this;return e&&e.map(function(e){return r._getFixedFieldName(e,t)})},N.prototype._setChartValue=function(e){var i=this,a=e.value,n=e.attributes,s=e.formattedAttributes,o=e.chartType,t=e.layer,r=this._effectivePopupTemplate,l=this.relatedInfoCount,u=a.fields,d=a.normalizeField;if(a.fields=this._getFixedFieldNames(u,t),d&&(a.normalizeField=this._getFixedFieldName(d,t)),u.some(function(e){return!!(null!=s[e]||i.isRelatedField(e)&&l)})){var p=r&&r.fieldInfos;u.forEach(function(e,t){if(i.isRelatedField(e))a.series=a.series.concat(i._getRelatedChartInfos({fieldInfos:p,fieldName:e,formattedAttributes:s,chartType:o,value:a}));else{var r=i._getChartOption({value:a,index:t,attributes:n,chartType:o,formattedAttributes:s,fieldName:e,fieldInfos:p});a.series.push(r)}})}},N.prototype._getRelatedChartInfos=function(e){var i=this,a=e.fieldInfos,n=e.fieldName,s=e.formattedAttributes,o=e.chartType,l=e.value,u=[],t=this.getRelatedFieldInfo(n),r=t.layerId,d=t.fieldName,p=this.getRelatedInfo(r);if(!p)return u;var c=p.relatedFeatures,f=p.relation;if(!f||!c)return u;var h=f.cardinality;return c.forEach(function(e,t){var r=e.attributes;r&&Object.keys(r).forEach(function(e){e===d&&u.push(i._getChartOption({value:l,index:t,attributes:r,formattedAttributes:s,fieldName:n,chartType:o,relatedFieldName:e,fieldInfos:a}))})}),"one-to-many"===h||"many-to-many"===h?u:[u[0]]},i([v.property()],N.prototype,"_featureAbortController",void 0),i([v.property({readOnly:!0})],N.prototype,"content",void 0),i([v.property({type:Boolean})],N.prototype,"defaultPopupTemplateEnabled",void 0),i([v.property({readOnly:!0})],N.prototype,"formattedAttributes",void 0),i([v.property({type:a})],N.prototype,"graphic",void 0),i([v.property({readOnly:!0})],N.prototype,"lastEditInfo",void 0),i([v.property({dependsOn:["view"]})],N.prototype,"spatialReference",null),i([v.property({readOnly:!0})],N.prototype,"title",void 0),i([v.property({dependsOn:["view"]})],N.prototype,"map",null),i([v.property({readOnly:!0,dependsOn:["_featureAbortController"]})],N.prototype,"waitingForContent",null),i([v.property()],N.prototype,"view",void 0),i([v.subclass("esri.widgets.FeatureViewModel")],N);function N(e){var t=L.call(this,e)||this;return t._handles=new n,t._featureAbortController=null,t._graphicChangedThrottled=u.throttle(t._graphicChanged,1,t),t._effectivePopupTemplate=null,t._contentResponse=null,t._graphic=null,t._fieldInfoMap=null,t.content=null,t.defaultPopupTemplateEnabled=!1,t.formattedAttributes=null,t.graphic=null,t.lastEditInfo=null,t.title="",t.view=null,t._handles.add(m.init(t,["graphic","graphic.sourceLayer.popupTemplate.title","graphic.sourceLayer.popupTemplate.content","graphic.sourceLayer.popupTemplate.fieldInfos","graphic.sourceLayer.popupTemplate.lastEditInfoEnabled","graphic.popupTemplate.title","graphic.popupTemplate.content","graphic.popupTemplate.fieldInfos","graphic.popupTemplate.lastEditInfoEnabled"],function(){return t._graphicChangedThrottled()})),t}}.apply(null,r))||(e.exports=i)},2509:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(1),r(0),r(29),r(13),r(6),r(3),r(4),r(2),r(1655),r(301),r(524),r(1911)],void 0===(a=function(e,t,r,i,a,n,c,s,f,o,l,h,u,y){var d,m=new Map,p="esri.widgets.Popup.support.RelatedFeatures",v=s.getLogger(p);return d=o.declared(n),r(g,d),g.prototype.destroy=function(){this.relatedInfos.clear()},g.prototype.addRelatedFeatureAttributes=function(t){var r=this;this.relatedInfos.forEach(function(e){return r._addRelatedFeatureAttribute(t,e)})},g.prototype.getRelatedFieldInfo=function(e){if(-1===e.indexOf("relationships/"))return null;var t=e.split("/").slice(1);return{layerId:t[0],fieldName:t[1]}},g.prototype.getRelatedInfo=function(e){return this.relatedInfos.get(e.toString())},g.prototype.isRelatedField=function(e){return void 0===e&&(e=""),!!e&&-1!==e.indexOf("relationships/")},g.prototype.queryRelatedInfos=function(t,e,r){var i=this;this.relatedInfos.clear();var a=y.getSourceLayer(t);if(!a)return f.resolve();var n=e.filter(function(e){return e&&i.isRelatedField(e.fieldName)});return n&&n.length?(this._createRelatedInfos(e,a),this._queryLayerInfos(a,r).then(function(e){return i._updateRelatedInfoLayerInfos(e),i._queryRelatedFeatureMap(t,r).then(function(t){return Object.keys(t).forEach(function(e){i._setRelatedFeatures(t[e],e.toString())}),t})})):f.resolve()},g.prototype._addRelatedFeatureAttribute=function(t,r){var i=this;t&&r&&(r.relatedFeatures&&r.relatedFeatures&&r.relatedFeatures.forEach(function(e){return i._addAttributesFromFeature(t,e,r)}),r.relatedStatsFeatures&&r.relatedStatsFeatures&&r.relatedStatsFeatures.forEach(function(e){return i._addAttributesFromFeature(t,e,r)}))},g.prototype._updateRelatedInfoLayerInfo=function(e,t){var r=e.value;r&&(this.getRelatedInfo(t).layerInfo=r.data)},g.prototype._updateRelatedInfoLayerInfos=function(t){var r=this;Object.keys(t).forEach(function(e){return r._updateRelatedInfoLayerInfo(t[e],e.toString())})},g.prototype._addAttributesFromFeature=function(r,i,a){var n=this;r&&i&&a&&Object.keys(i.attributes).forEach(function(e){var t=n._relatedFieldInfoToString({layerId:a.relation.id.toString(),fieldName:e});r[t]=i.attributes[e]})},g.prototype._relatedFieldInfoToString=function(e){return e?"relationships/"+e.layerId+"/"+e.fieldName:""},g.prototype._createRelatedInfoForFieldInfo=function(e,t){var r=this.getRelatedFieldInfo(e.fieldName);if(r){var i=r.layerId,a=r.fieldName;if(i){var n=this.getRelatedInfo(i)||this._createRelatedInfo(i,t);if(n&&(n.relatedFields.push(a),e.statisticType)){var s=new u({statisticType:e.statisticType,onStatisticField:a,outStatisticFieldName:a});n.outStatistics.push(s)}}}},g.prototype._createRelatedInfos=function(e,t){var r=this;e.forEach(function(e){return r._createRelatedInfoForFieldInfo(e,t)})},g.prototype._queryRelatedFeatureMap=function(r,i){var a=this,n={};return this.relatedInfos.forEach(function(e,t){e.layerInfo&&(n[t]=a._queryRelatedLayerFeatures(r,e,i))}),f.eachAlways(n)},g.prototype._queryLayerInfos=function(l,u){var d=this,p={};return this.relatedInfos.forEach(function(e,t){var r=e.relation;if(!r){var i=new c("relation-required","A relation is required on a layer to retrieve related records.");throw v.error(i),i}var a=r.relatedTableId;if(!a)throw i=new c("A related table ID is required on a layer to retrieve related records."),v.error(i),i;var n=l.url+"/"+a,s=m.get(n),o=s||d._queryLayerInfo(n,u);s||m.set(n,o),p[t]=o}),f.eachAlways(p)},g.prototype._queryLayerInfo=function(e,t){return a(e,{query:{f:"json"},signal:t&&t.signal})},g.prototype._queryRelatedLayerFeatures=function(e,t,r){var i=y.getSourceLayer(e).layerId.toString(),a=t.layerInfo,n=t.queryTask,s=t.relation,o=this._getDestinationRelation(a,i);if(o){var l=s.keyField,u=o.keyField,d="string"===this._getDestinationFieldType(a,o)?u+"='"+e.attributes[l]+"'":u+"="+e.attributes[l],p=n.execute(new h({where:d,outFields:t.relatedFields}),r),c=t.outStatistics&&0<t.outStatistics.length&&a.supportsStatistics?n.execute(new h({where:d,outFields:t.relatedFields,outStatistics:t.outStatistics}),r):null;return f.eachAlways({features:p,statsFeatures:c||f.resolve()})}return f.resolve()},g.prototype._setRelatedFeatures=function(e,t){var r=this.getRelatedInfo(t);if(r){var i=e.value;if(i){var a=i.features,n=i.statsFeatures,s=a&&a.value;r.relatedFeatures=s?s.features:[];var o=n&&n.value;r.relatedStatsFeatures=o?o.features:[]}}},g.prototype._getRelation=function(t,e){if(!e.relationships)return null;var r=null;return e.relationships.some(function(e){return e.id===parseInt(t,10)&&(r=e,!0)}),r},g.prototype._createRelatedInfo=function(e,t){var r=this._getRelation(e,t);if(r){var i=t.url+"/"+r.relatedTableId,a={url:i,queryTask:new l({url:i}),relation:r,relatedFields:[],outStatistics:[]};return this.relatedInfos.set(e,a),a}},g.prototype._getDestinationRelation=function(e,t){var r;return e&&e.relationships&&e.relationships.some(function(e){return""+e.relatedTableId===t&&(r=e,!0)}),r},g.prototype._getDestinationFieldType=function(e,t){var r=void 0;return e.fields.some(function(e){return e.name===t.keyField&&(r=-1!==["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(e.type)?"number":"string",!0)}),r},i([o.aliasOf("relatedInfos.size")],g.prototype,"relatedInfoCount",void 0),i([o.property()],g.prototype,"relatedInfos",void 0),i([o.subclass(p)],g);function g(e){var t=d.call(this,e)||this;return t.relatedInfoCount=null,t.relatedInfos=new Map,t}}.apply(null,i))||(e.exports=a)},2510:function(e,t,r){var i,a;i=[r.dj.c(e.i),t],void 0===(a=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=e.toUrl("../../../themes/base/images/files/");t.isSupportedImage=function(e){var t=e.toLowerCase();return"image/bmp"===t||"image/emf"===t||"image/exif"===t||"image/gif"===t||"image/x-icon"===t||"image/jpeg"===t||"image/png"===t||"image/tiff"===t||"image/x-wmf"===t},t.getIconPath=function(e){return e?"text/plain"===e?r+"text-32.svg":"application/pdf"===e?r+"pdf-32.svg":"text/csv"===e?r+"csv-32.svg":"application/gpx+xml"===e?r+"gpx-32.svg":"application/x-dwf"===e?r+"cad-32.svg":"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?r+"code-32.svg":"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?r+"zip-32.svg":-1!==e.indexOf("image/")?r+"image-32.svg":-1!==e.indexOf("audio/")?r+"sound-32.svg":-1!==e.indexOf("video/")?r+"video-32.svg":-1!==e.indexOf("msexcel")||-1!==e.indexOf("ms-excel")||-1!==e.indexOf("spreadsheetml")?r+"excel-32.svg":-1!==e.indexOf("msword")||-1!==e.indexOf("ms-word")||-1!==e.indexOf("wordprocessingml")?r+"word-32.svg":-1!==e.indexOf("powerpoint")||-1!==e.indexOf("presentationml")?r+"report-32.svg":r+"generic-32.svg":r+"generic-32.svg"}}.apply(null,i))||(e.exports=a)},2511:function(e,t,u){var r,i;r=[u.dj.c(e.i),t,u(9),u(10),u(25),u(47)],void 0===(i=function(e,s,o,r,t){function i(){var e=t.locale;return e&&(s.locales[e]||function(e){for(var t=e.split("-")[0].toLowerCase(),r=null,i=0,a=Object.keys(s.locales);i<a.length;i++){var n=a[i];if(-1<n.indexOf(t)){r=s.locales[n];break}}return r}(e))||n}Object.defineProperty(s,"__esModule",{value:!0});var a,l,n="en_US";s.locales={ar:"ar","bs-ba":"bs_BA","ca-es":"ca_ES","cs-cz":"cs_CZ","da-dk":"da_DK","de-ch":"de_CH","de-de":"de_DE","el-gr":"el_GR","en-ca":"en_CA","en-us":"en_US","es-es":"es_ES","et-ee":"et_EE","fi-fi":"fi_FI","fr-fr":"fr_FR","he-il":"he_IL","hr-hr":"hr_HR","hu-hu":"hu_HU","id-id":"id_ID","it-it":"it_IT","ja-jp":"ja_JP","ko-kr":"ko_KR","lt-lt":"lt_LT","lv-lv":"lv_LV","nb-no":"nb_NO","nl-nl":"nl_NL","pl-pl":"pl_PL","pt-br":"pt_BR","pt-pt":"pt_PT","ro-ro":"ro_RO","ru-ru":"ru_RU","sl-sl":"sl_SL","sr-rs":"sr_RS","sv-se":"sv_SE","th-th":"th_TH","tr-tr":"tr_TR","uk-ua":"uk_UA","vi-vn":"vi_VN","zh-cn":"zh_Hans","zh-hk":"zh_Hant","zh-tw":"zh_Hant"},s.getChartLocale=i,s.loadChartsModule=function(n){return void 0===n&&(n=i()),r(this,void 0,void 0,function(){var t=this;return o(this,function(e){return a&&n===l||(l=n,a=Promise.all([new Promise(function(t,e){u.e(92).then(function(){var e=[u(2785)];t.apply(null,e)}.bind(this)).catch(e.bind(this))}),new Promise(function(t,e){Promise.all([u.e(36),u.e(93)]).then(function(){var e=[u(2786)("./"+n)];t.apply(null,e)}.bind(this)).catch(e.bind(this))})]).then(function(e){var i=e[0],a=e[1];return r(t,void 0,void 0,function(){var t,r;return o(this,function(e){switch(e.label){case 0:return t=i.am4core,l===n&&(t.options.defaultLocale=a.default),"function"==typeof Object.assign?[3,2]:[4,new Promise(function(t,e){Promise.resolve().then(function(){var e=[u(554)];t.apply(null,e)}.bind(this)).catch(e.bind(this))})];case 1:r=e.sent(),Object.defineProperty(Object,"assign",{value:r.assign,writable:!0,configurable:!0}),e.label=2;case 2:return[2,i]}})})},function(){return l=a=null,null})),[2,a]})})}}.apply(null,r))||(e.exports=i)},2512:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(2513),r(64)],void 0===(a=function(e,t,r,u){Object.defineProperty(t,"__esModule",{value:!0});var d=[{id:"http",pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:r.view},{id:"tel",pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{id:"mailto",pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{id:"arcgis-appstudio-player",pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"App Studio Player"},{id:"arcgis-collector",pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"Collector"},{id:"arcgis-explorer",pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"Explorer"},{id:"arcgis-navigator",pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"Navigator"},{id:"arcgis-survey123",pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"Survey123"},{id:"arcgis-trek2there",pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"Trek2There"},{id:"arcgis-workforce",pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:r.workforce},{id:"iform",pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"iForm"},{id:"flow",pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"FlowFinity"},{id:"lfmobile",pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"Laserfische"},{id:"mspbi",pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:r.openInApp,appName:"Microsoft Power Bi"}];t.autoLink=function(e){if("string"!=typeof e||!e)return e;var t,r,i=(t=e,r=null,d.some(function(e){return e.pattern.test(t)&&(r=e),!!r}),r);if(!i)return e;var a=e.match(i.pattern),n=a&&a[2],s=u.replace(i.label,{appName:i.appName,hierPart:n}),o=i.target?'target="'+i.target+'"':"",l="_blank"===i.target?'rel="noreferrer"':"";return e.replace(i.pattern,"<a "+o+' href="$1" '+l+">"+s+"</a>")}}.apply(null,i))||(e.exports=a)},2513:function(e,t,r){var i,a;i=[r(35),r(45),r(2514),r(2515),r(2516),r(2517),r(2518),r(2519),r(2520),r(2521),r(2522),r(2523),r(2524),r(2525),r(2526),r(2527),r(2528),r(2529),r(2530),r(2531),r(2532),r(2533),r(2534),r(2535),r(2536),r(2537),r(2538),r(2539),r(2540),r(2541),r(2542),r(2543),r(2544),r(2545),r(2546),r(2547),r(2548),r(2549),r(2550),r(2551)],void 0===(a=function(e,t){return t(e,"esri/widgets/support/nls/uriUtils",r.dj.c(),!1)}.apply(null,i))||(e.exports=a)},2514:function(e,t,r){e.exports={openInApp:"فتح في {appName}",view:"عرض"}},2515:function(e,t,r){e.exports={openInApp:"Otvorite uz appun {appName}",view:"Prikaz"}},2516:function(e,t,r){e.exports={openInApp:"Obre-ho al {appName}",view:"Visualitza"}},2517:function(e,t,r){e.exports={openInApp:"Otevřít v {appName}",view:"Zobrazit"}},2518:function(e,t,r){e.exports={openInApp:"Åbn i {appName}",view:"Vis"}},2519:function(e,t,r){e.exports={openInApp:"In {appName} öffnen",view:"Anzeigen"}},2520:function(e,t,r){e.exports={openInApp:"Άνοιγμα σε {appName}",view:"Προβολή"}},2521:function(e,t,r){e.exports={openInApp:"Abrir en {appName}",view:"Ver"}},2522:function(e,t,r){e.exports={openInApp:"Ava rakenduses {appName}",view:"Vaatamine"}},2523:function(e,t,r){e.exports={openInApp:"Avaa sovelluksessa {appName}",view:"Näytä"}},2524:function(e,t,r){e.exports={openInApp:"Ouvrir dans {appName}",view:"Vue"}},2525:function(e,t,r){e.exports={openInApp:"פתח ב-{appName}",view:"תצוגה"}},2526:function(e,t,r){e.exports={openInApp:"Otvorite uz appun {appName}",view:"Prikaz"}},2527:function(e,t,r){e.exports={openInApp:"Megnyitás a(z) {appName} alkalmazásban",view:"Megtekintés"}},2528:function(e,t,r){e.exports={openInApp:"Buka di {appName}",view:"Tampilan"}},2529:function(e,t,r){e.exports={openInApp:"Apri in {appName}",view:"Visualizzazione"}},2530:function(e,t,r){e.exports={openInApp:"{appName} で開く",view:"表示"}},2531:function(e,t,r){e.exports={openInApp:"{appName}에서 열기",view:"보기"}},2532:function(e,t,r){e.exports={openInApp:"Atvērt lietotnē {appName}",view:"Skatīt"}},2533:function(e,t,r){e.exports={openInApp:"Atverti naudojant {appName}",view:"Peržiūrėti"}},2534:function(e,t,r){e.exports={openInApp:"Openen in {appName}",view:"Weergeven"}},2535:function(e,t,r){e.exports={openInApp:"Åpne i {appName}",view:"Vis"}},2536:function(e,t,r){e.exports={openInApp:"Otwórz za pomocą {appName}",view:"Wyświetl"}},2537:function(e,t,r){e.exports={openInApp:"Abrir no {appName}",view:"Visualizar"}},2538:function(e,t,r){e.exports={openInApp:"Abrir em {appName}",view:"Visualização"}},2539:function(e,t,r){e.exports={openInApp:"Deschideți în {appName}",view:"Vizualizare"}},2540:function(e,t,r){e.exports={openInApp:"Открыыть в {appName}",view:"Просмотр"}},2541:function(e,t,r){e.exports={openInApp:"Odpri v {appName}",view:"Pogled"}},2542:function(e,t,r){e.exports={openInApp:"Otvori u {appName}",view:"Prikaži"}},2543:function(e,t,r){e.exports={openInApp:"Öppna i {appName}",view:"Visa"}},2544:function(e,t,r){e.exports={openInApp:"เปิดใน {appName}",view:"วิว"}},2545:function(e,t,r){e.exports={openInApp:"{appName} uygulamasında aç",view:"Görüntüle"}},2546:function(e,t,r){e.exports={openInApp:"Відкрити в {appName}",view:"Вид"}},2547:function(e,t,r){e.exports={openInApp:"Mở bằng {appName}",view:"Xem"}},2548:function(e,t,r){e.exports={openInApp:"在 {appName} 中打开",view:"查看"}},2549:function(e,t,r){e.exports={openInApp:"在 {appName} 中開啟",view:"視圖"}},2550:function(e,t,r){e.exports={openInApp:"在 {appName} 中開啟",view:"視圖"}},2551:function(e,t,r){e.exports={root:{openInApp:"Open in {appName}",view:"View"},ar:1,bs:1,ca:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sl:1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}}}]);