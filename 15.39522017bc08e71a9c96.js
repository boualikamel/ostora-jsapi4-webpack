(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/FeatureLayerView2D":1589,"esri/views/layers/support/ClipArea":1627,"esri/views/layers/LayerView":1635,"esri/views/2d/layers/LayerView2D":1636,"esri/views/layers/support/ClipRect":1637,"esri/views/layers/support/Geometry":1638,"esri/views/layers/support/Path":1639,"esri/layers/graphics/data/projectionSupport":1649,"esri/renderers/support/clickToleranceUtils":1687,"esri/views/2d/layers/support/popupUtils2D":1731,"esri/views/layers/support/FeatureFilter":1732,"esri/views/layers/support/popupUtils":1827,"esri/views/2d/layers/features/support/rendererUtils":1912,"esri/views/2d/layers/support/util":1913,"esri/views/layers/support/FeatureEffect":1914,"esri/AggregateGraphic":2559,"esri/views/2d/layers/features/tileRenderers":2560,"esri/views/2d/layers/support/FeatureLayerProxy":2561,"esri/views/layers/FeatureLayerView":2562,"esri/views/layers/support/ParsedFeatureEffect":2563,"esri/views/layers/support/cssFilterParser":2564,"esri/views/layers/support/Transition":2565})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1589:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(91),r(5),r(9),r(10),r(2559),r(28),r(89),r(49),r(18),r(6),r(14),r(63),r(3),r(12),r(4),r(16),r(2),r(1649),r(1687),r(207),r(301),r(90),r(1636),r(2560),r(1912),r(343),r(2561),r(1731),r(1913),r(506),r(2562),r(1635),r(496),r(1732),r(1914)],void 0===(n=function(e,t,r,i,n,o,m,u,l,s,p,a,c,d,h,b,f,_,y,v,g,w,x,R,S,F,O,E,j,C,P,A,I,q,T,V,k,M,U){var N,L=f.getLogger("esri.views.2d.layers.FeatureLayerView2D");return N=g.declared(T.FeatureLayerView(k.RefreshableLayerView(O.LayerView2D(V)))),r(H,N),H.prototype.destroy=function(){this._proxy.destroy(),_.andThen(this._updateClusterSizeTask,function(e){return e.remove()})},H.prototype.initialize=function(){var t=this;this.addResolvingPromise(this._initProxy()),this.handles.add([this.clips.on("change",function(){return t.tileRenderer&&t.tileRenderer.onConfigUpdate(t._effectiveRenderer)}),this.on("valueRangesChanged",function(e){t._set("_aggregateValueRanges",e.valueRanges)})])},H.prototype._initProxy=function(){return u(this,void 0,void 0,function(){var t,r,i;return m(this,function(e){if(this.layer.isTable)throw new d("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});if(t=this.layer.spatialReference,r=s.SpatialReference.WGS84,this.layer.featureReduction&&!w.doesBrowserSupportProjection(t,r))throw new d("featurelayerview:featureReduction-not-supported","cannot project feature layer to WGS84",{inSpatialReference:t,outSpatialReference:r});return this._proxy&&this._proxy.destroy(),i=this._createClientOptions(),this._set("_proxy",new P.default({client:i})),[2,this._proxy.when()]})})},Object.defineProperty(H.prototype,"_effectiveRendererPromise",{get:function(){var r=this,e=this._getEffectiveRenderer();return e.then(function(e){var t=e.renderer;return r._set("_effectiveRenderer",t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(H.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!0,configurable:!0}),Object.defineProperty(H.prototype,"effect",{get:function(){return _.unwrapOr(this._effect,null)},set:function(e){var t=this._effect;_.isSome(t)&&_.isSome(t.filter)&&t.filter.enabled&&_.isSome(e)&&_.isSome(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange("effect")},enumerable:!0,configurable:!0}),Object.defineProperty(H.prototype,"effects",{get:function(){return this.effect&&[this.effect]||[]},enumerable:!0,configurable:!0}),Object.defineProperty(H.prototype,"numFeatures",{get:function(){var t=0;return this.attached&&this._tileStrategy.tiles.forEach(function(e){t+=e.iconDisplayRecords?e.iconDisplayRecords.length:0}),t},enumerable:!0,configurable:!0}),Object.defineProperty(H.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var e=this.availableFields,t=this.layer,r=t.definitionExpression,i=t.renderer,n=t.labelingInfo,o="feature"===this.layer.type?this.layer.gdbVersion:void 0,s="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,a=this.timeExtent,u="filter"in this.layer&&this.layer.filter&&""+JSON.stringify(this.layer.filter.geometry)+this.layer.filter.where,l=JSON.stringify(this.clips),p=this.layer.featureReduction&&this.layer.featureReduction.toJSON();return JSON.stringify({filterHash:_.isSome(this.filter)&&this.filter.toJSON(),effectHash:_.isSome(this.effect)&&this.effect.toJSON(),streamFilter:u,gdbVersion:o,definitionExpression:r,historicMoment:s,availableFields:e,renderer:i,labelingInfo:n,timeExtent:a,clipsHash:l,featureReduction:p})},enumerable:!0,configurable:!0}),H.prototype.highlight=function(e){var t,r=this;return e instanceof p?t=[e.getObjectId()]:"number"==typeof e?t=[e]:c.isCollection(e)?t=e.map(function(e){return e&&e.getAttribute(r.layer.objectIdField)}).toArray():Array.isArray(e)&&0<e.length&&(t="number"==typeof e[0]?e:e.map(function(e){return e&&e.getAttribute(r.layer.objectIdField)})),t&&t.length?(t=t.filter(function(e){return null!=e}),this._addHighlight(t),{remove:function(){return r._removeHighlight(t)},pause:function(){return r._removeHighlight(t)},resume:function(){return r._addHighlight(t)}}):{remove:function(){},pause:function(){},resume:function(){}}},H.prototype.hasHighlight=function(){return!!this._highlightIds.size},H.prototype.hitTest=function(e,t){return this._hitTest(e,t)},H.prototype.queryStatistics=function(){return this._proxy.queryStatistics()},H.prototype.queryFeatures=function(e,t){var r=this;return this.queryFeaturesJSON(e,t).then(function(e){var t=R.fromJSON(e);return t.features.forEach(function(e){e.layer=r.layer,e.sourceLayer=r.layer}),t})},H.prototype.queryFeaturesJSON=function(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)},H.prototype.queryObjectIds=function(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)},H.prototype.queryFeatureCount=function(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)},H.prototype.queryExtent=function(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then(function(e){return{count:e.count,extent:s.Extent.fromJSON(e.extent)}})},H.prototype.setVisibility=function(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._renderingConfigHashChanged()},H.prototype.update=function(e){if(this.attached&&this._tileStrategy&&this.tileRenderer){this._tileStrategy.update(e)||this.requestUpdate();var t=e.state;this._viewStateId!==t.id&&(this._proxy.setViewState(t),this._viewStateId=t.id),this.notifyChange("numFeatures"),this.notifyChange("updating")}},H.prototype.attach=function(){var r=this;this.view.timeline.record(this.layer.title+" (FeatureLayer) Attach"),this._tileStrategy=new q({cachePolicy:"purge",acquireTile:function(e){return r._acquireTile(e)},releaseTile:function(e){return r._releaseTile(e)},tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add([this.layer.on("edits",function(t){return u(r,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return this._onGoingEdits++,[4,this._proxy.onEdits(t)];case 1:return e.sent(),this._onGoingEdits=Math.max(0,this._onGoingEdits-1),[2]}})})}),v.init(this,"renderingConfigHash",function(){return r._renderingConfigHashChanged()},!0)],"attach")},H.prototype.detach=function(){this.container.removeAllChildren(),this.handles.remove("attach"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null)},H.prototype.moveStart=function(){this.requestUpdate()},H.prototype.viewChange=function(){this.requestUpdate()},H.prototype.moveEnd=function(){this.requestUpdate()},H.prototype.fetchPopupFeatures=function(o,s){return u(this,void 0,void 0,function(){var t,r,i,n;return m(this,function(e){return _.isSome(s)&&s.clientGraphics.length&&(t=s.clientGraphics[0])instanceof l?[2,[t]]:(r=this.validateFetchPopupFeatures(s))?[2,y.reject(r)]:_.isSome(s)&&0===s.clientGraphics.length?[2,y.resolve([])]:(i=this.fetchClientPopupFeatures(s),o?(n=this._fetchServicePopupFeatures(o,s),[2,y.eachAlwaysValues([i,n]).then(a.flatten)]):[2,i])})})},H.prototype._fetchServicePopupFeatures=function(c,d){return u(this,void 0,void 0,function(){var t,r,i,n,o,s,a,u,l,p;return m(this,function(e){switch(e.label){case 0:return[4,this.createPopupQuery(d)];case 1:if(t=e.sent(),r=this.layer,i=r.renderer,n=x.calculateTolerance(i),t.geometry=this.createFetchPopupFeaturesQueryGeometry(c,n),o=new Set,s=r.objectIdField,a=_.isSome(d)?d.clientGraphics:null)for(u=0,l=a;u<l.length;u++)p=l[u],o.add(p.attributes[s]);return[2,r.queryFeatures(t).then(function(e){return e.features.filter(function(e){return!o.has(e.attributes[s])})})]}})})},H.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return A.createQueryGeometry(e,t,this.view)},H.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||0<this._onGoingEdits)},H.prototype._createClientOptions=function(){var t=this;return{setUpdating:function(e){t._set("_pipelineIsUpdating",e)},emitEvent:function(e){t.emit(e.name,e.event)}}},H.prototype._createServiceOptions=function(){return u(this,void 0,void 0,function(){var r,i,n,o,s,a,u,l;return m(this,function(e){switch(e.label){case 0:return r=this.layer,i=r.capabilities,n=r.objectIdField,o=r.fields.map(function(e){return e.toJSON()}),s=r.fullExtent&&r.fullExtent.toJSON(),a=I.toJSONGeometryType(r.geometryType),u=r.timeInfo&&r.timeInfo.toJSON()||null,(t=r.source)&&"openPorts"in t?[4,r.source.openPorts()]:[3,2];case 1:return l=e.sent(),[3,3];case 2:l="dynamicDataSource"in r?r.dynamicDataSource?r.parsedUrl:r.url+"/"+r.layerId:r.parsedUrl,e.label=3;case 3:return[2,{type:"on-demand",maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:o,fullExtent:s,geometryType:a,objectIdField:n,source:l,timeInfo:u}]}var t})})},H.prototype._createMemoryServiceOptions=function(r){return u(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return[4,r.openPorts()];case 1:return t=e.sent(),[2,o({},this._createServiceOptions(),{type:"memory",source:t})]}})})},H.prototype._cleanUpQuery=function(e){var t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t},H.prototype._createUpdateClusterSizeTask=function(r,i){var e=this;return this.watch("_aggregateValueRanges",function(t){return u(e,void 0,void 0,function(){return m(this,function(e){return this._updateClusterEffectiveRendererSizeVariable(r,i,t),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer),[2]})})})},H.prototype._updateClusterEffectiveRendererSizeVariable=function(i,n,o){return u(this,void 0,void 0,function(){var t,r;return m(this,function(e){return"visualVariables"in i&&i.visualVariables&&(t=C.findSizeVV(i.visualVariables),_.isSome(t)&&"cluster_count"===t.field&&(r=i.visualVariables.indexOf(t),i.visualVariables[r]=C.createClusterCountSizeVariable(n,o),this._set("_effectiveRenderer",i.clone()))),[2]})})},H.prototype._getEffectiveRenderer=function(){return u(this,void 0,void 0,function(){var t,r,i,n,o;return m(this,function(e){switch(e.label){case 0:return t=this.layer.renderer,r=this.layer.featureReduction,_.isSome(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),r&&"cluster"===r.type&&C.isClusterCompatibleRenderer(t)?(i=r,n=[],[4,C.createClusterRenderer(n,this.layer.fields,t,i,this._aggregateValueRanges)]):[3,2];case 1:return o=e.sent(),_.andThen(this._updateClusterSizeTask,function(e){return e.remove()}),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(o,i),[2,{renderer:o,aggregateFields:n,featureReduction:r}];case 2:return[2,{renderer:t,aggregateFields:[],featureReduction:null}]}})})},H.prototype._acquireTile=function(e){var t=this,r=this.tileRenderer.acquireTile(e);return r.once("attach",function(){t.requestUpdate()}),r},H.prototype._releaseTile=function(e){this.tileRenderer.releaseTile(e)},H.prototype._initTileRenderer=function(r){return u(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return[4,E.createOrReuseTileRenderer(r,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer})];case 1:return t=e.sent(),this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this._proxy.tileRenderer=t,this._set("tileRenderer",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(r),this.requestUpdate(),[2,this.tileRenderer]}})})},H.prototype._createLayerFilterHash=function(){return this.layer.definitionExpression+"."+("feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0)+"."+("feature"===this.layer.type?this.layer.gdbVersion:void 0)},H.prototype._createTileRendererHash=function(e){return("heatmap"===e.type?"heatmap":"symbol")+"."+("dot-density"===e.type)},H.prototype._createFeatureDataHash=function(e){var t=e.getAttributeHash(),r=JSON.stringify(this.filter),i=_.isSome(this.effect)&&JSON.stringify(this.effect.filter),n=JSON.stringify(this.timeExtent),o="";return this._visibilityOverrides.forEach(function(e){return o+=e}),t+"."+r+"."+i+"."+n+"."+o},H.prototype._createMeshHash=function(e){var t=F.getVVFlags("visualVariables"in e&&e.visualVariables||[]),r=this.layer.labelingInfo&&this.layer.labelingInfo.map(function(e){return JSON.stringify(e)}).join("/"),i=JSON.stringify(this.layer.featureReduction);return e.getMeshHash()+"."+t+"."+r+"."+i},H.prototype._injectOverrides=function(e){var t=this.filter&&this.filter.timeExtent,r=this.timeExtent&&t?this.timeExtent.intersection(t):this.timeExtent||t;if(!this._visibilityOverrides.size&&!r)return e;var i=_.isSome(this.filter)&&this.filter.clone()||new M;return i.hiddenIds=this._visibilityOverrides,i.timeExtent=r,i},H.prototype._createConfiguration=function(e,t,r){var i=j.simplifyVVRenderer(e),n=this.layer.labelingInfo,o="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s="feature"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(F.definitions.MAX_FILTERS),u=this._injectOverrides(this.filter);return a[0]=_.isSome(u)&&u.toJSON()||null,a[1]=_.isSome(this.effect)&&this.effect.filter&&this.effect.filter.toJSON()||null,{featureReduction:_.andThen(r,function(e){return e.toJSON()}),definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,labelingInfo:n&&n.map(function(e){return e.toJSON()}),renderer:i.toJSON(),gdbVersion:s,historicMoment:o,devicePixelRatio:window.devicePixelRatio||1,filters:a,aggregateFields:t}},H.prototype._hasRequiredSupport=function(e){return!("dot-density"===e.renderer.type&&!h("esri-webgl-texture-float")&&(L.error(new d("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),1))},H.prototype._onceTilesUpdated=function(){return this.requestUpdate(),v.whenFalseOnce(this,"_pipelineIsUpdating",!0)},H.prototype._lockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.lockAttributeTextureUpload()},H.prototype._unlockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.unlockAttributeTextureUpload()},H.prototype._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()},H.prototype._renderingConfigHashChanged=function(){var e=this;this.view.timeline.begin(this.layer.title+" (FeatureLayer) Initial Pipeline Config");var t=this._onRenderingConfigChange();function r(){t===e._updatingPromise&&e._set("_updatingPipelineConfig",!1),e.view.timeline.end(e.layer.title+" (FeatureLayer) Initial Pipeline Config")}(this._updatingPromise=t).then(r).catch(function(e){y.isAbortError(e)||L.error(e),r()})},H.prototype._addHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(this._highlightIds.has(i)){var n=this._highlightIds.get(i);this._highlightIds.set(i,n+1)}else this._highlightIds.set(i,1)}this._updateHighlight().catch(function(e){y.isAbortError(e)||L.error(e)})},H.prototype._removeHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(this._highlightIds.has(i)){var n=this._highlightIds.get(i)-1;0==n?this._highlightIds.delete(i):this._highlightIds.set(i,n)}}this._updateHighlight().catch(function(e){y.isAbortError(e)||L.error(e)})},H.prototype._createHittestResult=function(e){return e.layer=this.layer,e.sourceLayer=this.layer,_.isSome(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e},H.prototype._queryFeature=function(n){return u(this,void 0,void 0,function(){var t,r,i;return m(this,function(e){switch(e.label){case 0:return[4,this._proxy.getObjectId(n)];case 1:return t=e.sent(),[4,this._proxy.queryFeatures(new S({objectIds:[t],outSpatialReference:this.view.spatialReference,returnGeometry:!0}))];case 2:return r=e.sent(),(i=r.features[0])?[2,i]:[2,null]}})})},H.prototype._hitTest=function(s,a){return u(this,void 0,void 0,function(){var t,r,i,n,o=this;return m(this,function(e){switch(e.label){case 0:return this.suspended||!this.tileRenderer?[2,null]:[4,this.tileRenderer.hitTest(s,a)];case 1:return 0!==(t=e.sent()).length?[3,3]:[4,y.after(1)];case 2:return e.sent(),[2,null];case 3:return(2147483648&(r=t[0]))>>>31==1?[3,5]:[4,this._queryFeature(r)];case 4:return n=e.sent(),[2,_.andThen(n,function(e){return o._createHittestResult(p.fromJSON(e))})];case 5:return[4,this._proxy.getAggregate(r)];case 6:return i=e.sent(),_.isNone(i)?[2,null]:_.isSome(i.referenceId)?[4,this._queryFeature(i.referenceId)]:[3,8];case 7:return n=e.sent(),[2,_.andThen(n,function(e){return o._createHittestResult(p.fromJSON(e))})];case 8:return[2,this._createHittestResult(l.fromJSON(i))]}})})},i([g.property()],H.prototype,"_proxy",void 0),i([g.property()],H.prototype,"_pipelineIsUpdating",void 0),i([g.property()],H.prototype,"_updatingPipelineConfig",void 0),i([g.property()],H.prototype,"_effectiveRenderer",void 0),i([g.property()],H.prototype,"_aggregateValueRanges",void 0),i([g.property()],H.prototype,"_onGoingEdits",void 0),i([g.property({dependsOn:["layer.renderer","layer.featureReduction"]})],H.prototype,"_effectiveRendererPromise",null),i([g.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],H.prototype,"labelsVisible",null),i([g.property({type:M})],H.prototype,"filter",void 0),i([g.property({type:U})],H.prototype,"effect",null),i([g.property({readOnly:!0,dependsOn:["effect"]})],H.prototype,"effects",null),i([g.property()],H.prototype,"numFeatures",null),i([g.property({dependsOn:["layer.renderer","availableFields","layer.definitionExpression","layer.gdbVersion?","layer.filter?","layer.historicMoment?","layer.labelingInfo","layer.featureReduction","filter","effect","timeExtent","clips"]})],H.prototype,"renderingConfigHash",null),i([g.property()],H.prototype,"tileRenderer",void 0),i([g.property({dependsOn:["layer.renderer","tileRenderer.updating","_updatingPipelineConfig","_pipelineIsUpdating","_updatingRequiredFieldsPromise","_proxy","_proxy.isReady?","_onGoingEdits"]})],H.prototype,"updating",void 0),i([g.subclass("esri.views.2d.layers.FeatureLayerView2D")],H);function H(){var e=null!==N&&N.apply(this,arguments)||this;return e._pipelineIsUpdating=!0,e._updatingPipelineConfig=!1,e._viewStateId=-1,e._visibilityOverrides=new Set,e._effect=null,e._highlightIds=new Map,e._onGoingEdits=0,e.container=new F.Container,e.filter=null,e.doRefresh=y.debounce(function(){return e._onGoingEdits=0,e._proxy.refresh().catch(function(e){y.isAbortError(e)||L.error(e)})}),e._onRenderingConfigChange=y.debounce(function(){return u(e,void 0,void 0,function(){var t,r,i,n,o,s,a,u,l,p,c,d,h,f,y,v,g;return m(this,function(e){switch(e.label){case 0:return this._hasRequiredSupport(this.layer)?(this._set("_updatingPipelineConfig",!0),[4,this._effectiveRendererPromise]):[2];case 1:return t=e.sent(),r=t.renderer,i=t.aggregateFields,n=t.featureReduction,[4,this._updateRequiredFields()];case 2:return e.sent(),o=this.availableFields.join("."),s=this._createLayerFilterHash(),a=this._createTileRendererHash(r),u=this._createFeatureDataHash(r),l=this._createMeshHash(r),p=o!==this._clientDataHash,c=s!==this._layerFilterHash,d=u!==this._featureDataHash||p,h=d&&!!this.layer.featureReduction,f=l!==this._meshHash||h,y={invalidateFeatureData:d,invalidateMesh:f,layerFilterChanged:c},v=this._createConfiguration(r,i,n),a===this._tileRendererHash?[3,9]:[4,this._initTileRenderer(r)];case 3:return e.sent(),[4,this._createServiceOptions()];case 4:return g=e.sent(),this.effects.forEach(function(e){return _.isSome(e)&&_.isSome(e.filter)&&e.filter.enable()}),this.tileRenderer.onConfigUpdate(r),[4,this._proxy.startup(this.view.featuresTilingScheme,v,g,y)];case 5:return e.sent(),this.hasHighlight()?[4,this._proxy.setHighlight(b.keysOfMap(this._highlightIds))]:[3,7];case 6:e.sent(),e.label=7;case 7:return[4,this._onceTilesUpdated()];case 8:return e.sent(),this.tileRenderer.onConfigUpdate(r),[3,14];case 9:return this._lockAttributeTextureUpload(),p||c||d||f?[4,this._proxy.update(v,y)]:[3,11];case 10:e.sent(),e.label=11;case 11:return c?[4,this._onceTilesUpdated()]:[3,13];case 12:e.sent(),e.label=13;case 13:this._unlockAttributeTextureUpload(),this.effects.forEach(function(e){return _.isSome(e)&&_.isSome(e.filter)&&e.filter.enable()}),this.tileRenderer.onConfigUpdate(r),this._forceAttributeTextureUpload(),e.label=14;case 14:return this._clientDataHash=o,this._layerFilterHash=s,this._tileRendererHash=a,this._meshHash=l,this._featureDataHash=u,this.tileRenderer.invalidateLabels(),this.requestUpdate(),[2]}})})}),e._updateHighlight=y.debounce(function(){return u(e,void 0,void 0,function(){return m(this,function(e){return[2,this._proxy.setHighlight(b.keysOfMap(this._highlightIds))]})})}),e}}.apply(null,i))||(e.exports=n)},1627:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(7),r(2)],void 0===(n=function(e,t,r,i,n,o){return a=o.declared(n.JSONSupport),i(s,a),r([o.subclass("esri.views.layers.support.ClipArea")],s);function s(){return null!==a&&a.apply(this,arguments)||this}var a}.apply(null,i))||(e.exports=n)},1635:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(13),r(54),r(206),r(121),r(3),r(119),r(2)],void 0===(n=function(e,t,r,i,n,o,s,a,u,l,p){return d=p.declared(s.HandleOwnerMixin(a.IdentifiableMixin(l.EsriPromiseMixin(o.EventedMixin(n))))),r(c,d),c.prototype.initialize=function(){var i=this;this.addResolvingPromise(this.layer),this.when().catch(function(e){if("layerview:create-error"!==e.name){var t=i.layer&&i.layer.id||"no id",r=i.layer&&i.layer.title||"no title";throw u.getLogger(i.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+r+"', id: '"+t+"')",e),e}})},c.prototype.destroy=function(){this.layer=this.parent=null},Object.defineProperty(c.prototype,"fullOpacity",{get:function(){function e(e){return null==e?1:e}return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),c.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},c.prototype.isUpdating=function(){return!1},i([p.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],c.prototype,"fullOpacity",null),i([p.property()],c.prototype,"layer",void 0),i([p.property()],c.prototype,"parent",void 0),i([p.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended"]})],c.prototype,"suspended",null),i([p.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],c.prototype,"updating",null),i([p.property({dependsOn:["layer.visible"]})],c.prototype,"visible",null),i([p.subclass("esri.views.layers.LayerView")],c);function c(e){var t=d.call(this,e)||this;return t.layer=null,t.parent=null,t}var d}.apply(null,i))||(e.exports=n)},1636:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(18),r(123),r(16),r(2),r(1627),r(1637),r(1638),r(1639)],void 0===(n=function(e,t,i,n,r,o,s,a,u,l,p,c){Object.defineProperty(t,"__esModule",{value:!0});var d=r.ofType({key:"type",base:u,typeMap:{rect:l,path:c,geometry:p}});t.LayerView2D=function(e){return r=a.declared(e),i(t,r),t.prototype.initialize=function(){var t=this;function e(){return t.notifyChange("rendering")}this.when(function(){t.requestUpdate()},function(){}),this.handles.add([s.init(this,"suspended",function(e){t.container&&(t.container.visible=!e),t.view&&!e&&t.updateRequested&&t.view.requestLayerViewUpdate(t)},!0),s.init(this,["fullOpacity","container"],function(){t.container&&(t.container.opacity=t.fullOpacity)},!0),s.on(this,"container","post-render",e),s.on(this,"container","will-render",e)])},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null,this.view=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,r=this.layer,i=r.minScale,n=r.maxScale;if(null!=i&&null!=n){var o=!i,s=!n;!o&&e<=i&&(o=!0),!s&&n<=e&&(s=!0),t=o&&s}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){var e=this.inherited(arguments);return e=e&&this.isVisibleAtScale(this.view.scale)},n([a.property({type:d,set:function(e){var t=o.referenceSetter(e,this._get("clips"),d);this._set("clips",t)}})],t.prototype,"clips",void 0),n([a.property()],t.prototype,"moving",void 0),n([a.property({dependsOn:["attached","suspended","moving"]})],t.prototype,"rendering",null),n([a.property()],t.prototype,"attached",void 0),n([a.property()],t.prototype,"container",void 0),n([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),n([a.property({readOnly:!0})],t.prototype,"updateParameters",void 0),n([a.property()],t.prototype,"updateRequested",void 0),n([a.property({dependsOn:["updateRequested","attached","suspended"]})],t.prototype,"updating",null),n([a.property()],t.prototype,"view",void 0),n([a.subclass("esri.views.2d.layers.LayerView2D")],t);function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.clips=new d,e.moving=!1,e.attached=!1,e.lastUpdateId=-1,e.updateRequested=!1,e}var r}}.apply(null,i))||(e.exports=n)},1637:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(2),r(1627)],void 0===(n=function(e,t,r,i,n,o){return a=n.declared(o),i(s,a),(u=s).prototype.clone=function(){return new u({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},Object.defineProperty(s.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r([n.property({type:[Number,String],json:{write:!0}})],s.prototype,"left",void 0),r([n.property({type:[Number,String],json:{write:!0}})],s.prototype,"right",void 0),r([n.property({type:[Number,String],json:{write:!0}})],s.prototype,"top",void 0),r([n.property({type:[Number,String],json:{write:!0}})],s.prototype,"bottom",void 0),r([n.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],s.prototype,"version",null),u=r([n.subclass("esri.views.layers.support.ClipRect")],s);function s(){var e=null!==a&&a.apply(this,arguments)||this;return e.type="rect",e.left=null,e.right=null,e.top=null,e.bottom=null,e}var a,u}.apply(null,i))||(e.exports=n)},1638:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(28),r(2),r(81),r(38),r(1627)],void 0===(n=function(e,t,r,i,n,o,s,a,u){var l,p,c={base:s,key:"type",typeMap:{extent:n.Extent,polygon:n.Polygon}};return l=o.declared(u),i(d,l),p=d,Object.defineProperty(d.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),d.prototype.clone=function(){return new p({geometry:this.geometry.clone()})},r([o.property({types:c,json:{read:a.fromJSON,write:!0}})],d.prototype,"geometry",void 0),r([o.property({readOnly:!0,dependsOn:["geometry"]})],d.prototype,"version",null),p=r([o.subclass("esri.views.layers.support.Geometry")],d);function d(){var e=null!==l&&l.apply(this,arguments)||this;return e.type="geometry",e.geometry=null,e}}.apply(null,i))||(e.exports=n)},1639:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(2),r(1627)],void 0===(n=function(e,t,r,i,n,o){return a=n.declared(o),i(s,a),Object.defineProperty(s.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r([n.property({type:[[[Number]]],json:{write:!0}})],s.prototype,"path",void 0),r([n.property({readOnly:!0,dependsOn:["path"]})],s.prototype,"version",null),r([n.subclass("esri.views.layers.support.Path")],s);function s(){var e=null!==a&&a.apply(this,arguments)||this;return e.type="path",e.path=[],e}var a}.apply(null,i))||(e.exports=n)},1649:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(9),r(10),r(6),r(4),r(316),r(55),r(44)],void 0===(n=function(e,t,s,a,u,l,p,c,n){function r(e,t){var r,i,n;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,v),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}if("xmin"in t){o={xmin:0,ymin:0,xmax:0,ymax:0};return i=e(t.xmin,t.ymin,v),o.xmin=i[0],o.ymin=i[1],n=e(t.xmax,t.ymax,v),o.xmax=n[0],o.ymax=n[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o}return"rings"in t?{rings:d(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:d(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:h(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function d(e,t){for(var r=[],i=0,n=e;i<n.length;i++){var o=n[i];r.push(h(o,t))}return r}function h(e,t){for(var r=[],i=0,n=e;i<n.length;i++){var o=n[i],s=t(o[0],o[1],[0,0]);r.push(s),2<o.length&&s.push(o[2]),3<o.length&&s.push(o[3])}return r}function f(e,t){return!(!c.isValid(e)||!c.isValid(t)||c.equals(e,t)||n.canProject(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var y="feature-store:unsupported-query",v=[0,0];t.doesBrowserSupportProjection=function(e,t){return!f(e,t)||p.isSupported()},t.checkProjectionSupport=function(n,o){return a(this,void 0,void 0,function(){var t,r,i;return s(this,function(e){if(!o)return[2];if(Array.isArray(n)){for(t=0,r=n;t<r.length;t++)if(f((i=r[t]).geometry&&i.geometry.spatialReference,o)){if(p.isSupported())return[2,p.load()];throw new u(y,"projection not supported",{inSpatialReference:n,outSpatialReference:o})}return[2]}if(!f(n,o))return[2];if(p.isSupported())return[2,p.load()];throw new u(y,"projection not supported",{inSpatialReference:n,outSpatialReference:o})})})};var o=r.bind(null,n.lngLatToXY),g=r.bind(null,n.xyToLngLat);t.project=function(e,t,r){return e?(r||(r=t,t=e.spatialReference),c.isValid(t)&&c.isValid(r)&&!c.equals(t,r)?n.canProject(t,r)?(c.isWebMercator(r)?o:g)(e):p.projectMany([e],t,r,null,!0)[0]:e):e};var m=new(i.prototype.push=function(i,n,o){return a(this,void 0,void 0,function(){var t,r=this;return s(this,function(e){return i&&i.length&&n&&o&&!c.equals(n,o)||l.resolve(i),t={geometries:i,inSpatialReference:n,outSpatialReference:o,resolve:null},this._jobs.push(t),[2,l.create(function(e){t.resolve=e,null===r._timer&&(r._timer=setTimeout(r._process,10))},function(){var e=r._jobs.indexOf(t);-1<e&&r._jobs.splice(e,1)})]})})},i.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,i=e.outSpatialReference;(0,e.resolve)(n.canProject(r,i)?c.isWebMercator(i)?t.map(o):t.map(g):p.projectMany(t,r,i,null,!0)),0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}},i);function i(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}t.projectMany=function(t,r,i){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,m.push(t,r,i)]})})}}.apply(null,i))||(e.exports=n)},1687:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function n(e,t){return t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):t&&t.yoffset?Math.max(e,Math.abs(t.yoffset)):e}function a(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,i=0;i<e.length;i++){var n=e[i].size;"number"==typeof n&&(t+=n,r++)}return t/r}(e.stops):t}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){if(!e)return 6;var t="visualVariables"in e?function(i,e){if(!e)return i;var t=e.filter(function(e){return"size"===e.type}).map(function(e){var t=e.maxSize,r=e.minSize;return(a(t,i)+a(r,i))/2}),r=0,n=t.length;if(0===n)return i;for(var o=0;o<n;o++)r+=t[o];var s=Math.floor(r/n);return Math.max(s,i)}(6,e.visualVariables):6;if("simple"===e.type)return n(t,e.symbol);if("unique-value"===e.type){var r=t;return e.uniqueValueInfos.forEach(function(e){r=n(r,e.symbol)}),r}if("class-breaks"!==e.type)return e.type,t;var i=t;return e.classBreakInfos.forEach(function(e){i=n(i,e.symbol)}),i}}.apply(null,i))||(e.exports=n)},1731:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(0),r(37)],void 0===(n=function(e,t,r,i,u){Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=function(e,t,r){var i=r.get("state.resolution"),n=t*("number"==typeof i?i:1),o=e.clone().offset(-n,-n),s=e.clone().offset(n,n),a=r.spatialReference;return new u({xmin:Math.min(o.x,s.x),ymin:Math.min(o.y,s.y),xmax:Math.max(o.x,s.x),ymax:Math.max(o.y,s.y),spatialReference:a})}}.apply(null,i))||(e.exports=n)},1732:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(5),r(28),r(131),r(63),r(17),r(7),r(8),r(2),r(38),r(301)],void 0===(n=function(e,t,r,i,l,n,o,s,a,u,p,c,d,h){var f,y,v=new a.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),g=new a.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return f=c.declared(u.JSONSupport),i(m,f),(y=m).prototype.writeWhere=function(e,t){t.where=e||"1=1"},m.prototype.enable=function(){this._set("enabled",!0)},m.prototype.createQuery=function(e){void 0===e&&(e={});var t=this,r=t.where,i=t.geometry,n=t.spatialRelationship,o=t.timeExtent,s=t.objectIds,a=t.units,u=t.distance;return new h(l({geometry:p.clone(i),objectIds:p.clone(s),spatialRelationship:n,timeExtent:p.clone(o),where:r,units:a,distance:u},e))},m.prototype.clone=function(){var e=this,t=e.where,r=e.geometry,i=e.spatialRelationship,n=e.hiddenIds,o=e.timeExtent,s=e.objectIds,a=e.units,u=e.distance,l=new Set;return n.forEach(function(e){return l.add(e)}),new y({geometry:p.clone(r),hiddenIds:l,objectIds:p.clone(s),spatialRelationship:i,timeExtent:p.clone(o),where:t,units:a,distance:u})},r([c.property({type:String})],m.prototype,"where",void 0),r([c.writer("where")],m.prototype,"writeWhere",null),r([c.property({types:n.geometryTypes,json:{read:d.fromJSON,write:!0}})],m.prototype,"geometry",void 0),r([c.property({type:String,json:{read:{source:"spatialRel",reader:v.read},write:{target:"spatialRel",writer:v.write}}})],m.prototype,"spatialRelationship",void 0),r([c.property({json:{write:function(e,t,r){return t[r]=s.valuesOfSet(e)},read:function(e){return s.createSetFromValues(e)}}})],m.prototype,"hiddenIds",void 0),r([c.property({type:Number,json:{write:{overridePolicy:function(e){return{enabled:0<e}}}}})],m.prototype,"distance",void 0),r([c.property({type:[Number],json:{write:!0}})],m.prototype,"objectIds",void 0),r([c.property({type:String,json:{read:g.read,write:{writer:g.write,overridePolicy:function(e){return{enabled:e&&0<this.distance}}}}})],m.prototype,"units",void 0),r([c.property({type:o,json:{write:!0}})],m.prototype,"timeExtent",void 0),r([c.property({readOnly:!0})],m.prototype,"enabled",void 0),y=r([c.subclass("esri.views.layers.support.FeatureFilter")],m);function m(e){var t=f.call(this,e)||this;return t.where=null,t.geometry=null,t.spatialRelationship="intersects",t.hiddenIds=new Set,t.distance=void 0,t.objectIds=null,t.units=null,t.timeExtent=null,t.enabled=!1,t}}.apply(null,i))||(e.exports=n)},1827:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(9),r(10),r(107),r(12),r(57)],void 0===(n=function(e,t,f,r,y,v,g){Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(d,h){return void 0===h&&(h=d.popupTemplate),r(this,void 0,void 0,function(){var t,r,i,n,o,s,a,u,l,p,c;return f(this,function(e){switch(e.label){case 0:return v.isSome(h)?[4,h.getRequiredFields(d.fields)]:[2,[]];case 1:return t=e.sent(),r=h.lastEditInfoEnabled,i=d.objectIdField,n=d.typeIdField,o=d.globalIdField,y.includes(t,"*")?[2,["*"]]:(a=g.fixFields,u=[d.fields],p=(l=t).concat,(c=r)?[4,g.getFeatureEditFields(d)]:[3,3]);case 2:c=e.sent(),e.label=3;case 3:return s=a.apply(void 0,u.concat([p.apply(l,[c||null])])),n&&s.push(n),s&&i&&g.hasField(d.fields,i)&&-1===s.indexOf(i)&&s.push(i),s&&o&&g.hasField(d.fields,o)&&-1===s.indexOf(o)&&s.push(o),[2,s]}})})},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:v.isSome(t)&&t.defaultPopupTemplateEnabled&&v.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}.apply(null,i))||(e.exports=n)},1912:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(3),r(15),r(90)],void 0===(n=function(e,t,r,S,i){function n(e){return e.stops=(t=e.type,(r=e.stops).length<=o?r:(s.warn("Found "+r.length+" Visual Variable stops, but MapView only supports "+o+". Displayed stops will be simplified."),r.length>2*o?function(e,t){for(var r=t[0],i=t.slice(1),n=i.pop(),o=i[0].value,s=i[i.length-1].value,a=(s-o)/O,u=[],l=o;l<s;l+=a){for(var p=0;l>=i[p].value;)p++;var c=i[p],d=t[p-1],h=l-d.value,f=c.value===d.value?1:h/(c.value-d.value);if("color"===e){var y=i[p],v=t[p-1],g=y.color.clone();g.r=F(v.color.r,g.r,f),g.g=F(v.color.g,g.g,f),g.b=F(v.color.b,g.b,f),g.a=F(v.color.a,g.a,f),u.push({value:l,color:g,label:y.label})}else if("size"===e){var m=i[p],b=t[p-1],_=S.toPt(m.size),w=F(S.toPt(b.size),_,f);u.push({value:l,size:w,label:m.label})}else{var x=i[p],R=F(t[p-1].opacity,x.opacity,f);u.push({value:l,opacity:R,label:x.label})}}return[r].concat(u,[n])}(t,r):function(e){for(var t=e[0],r=e.slice(1),i=r.pop();r.length>O;){for(var n=0,o=0,s=1;s<r.length;s++){var a=r[s-1],u=r[s],l=Math.abs(u.value-a.value);o<l&&(o=l,n=s)}r.splice(n,1)}return[t].concat(r,[i])}(r))),e;var t,r}function F(e,t,r){return(1-r)*e+r*t}Object.defineProperty(t,"__esModule",{value:!0});var O=i.definitions.WEBGL_MAX_INNER_STOPS,o=i.definitions.WEBGL_MAX_STOPS,s=r.getLogger("esri.renderers.visualVariables.support.utils");t.simplifyVVRenderer=function(e){if(!("visualVariables"in e&&e.visualVariables&&e.visualVariables.length))return e;var t=e.clone(),r=t.visualVariables.map(function(e){return"size"!==(t=e).type&&"color"!==t.type&&"opacity"!==t.type||null==t.stops?e:n(e);var t});return t.visualVariables=r,t}}.apply(null,i))||(e.exports=n)},1913:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(17)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=new r.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});t.toJSONGeometryType=function(e){return i.toJSON(e)},t.analyzeRings=function(e,t,r){for(var i=[],n=[],o=0,s=0,a=0,u=e;a<u.length;a++){var l=u[a],p=s,c=l[0][0],d=l[0][1];i[s++]=c,i[s++]=d;for(var h=0,f=1;f<l.length;++f){var y=c,v=d;c=l[f][0],h+=(d=l[f][1])*y-c*v,i[s++]=c,i[s++]=d}t(h/2),0<h?(0<p-o&&(r(o,p,i,n),o=p),n.length=0):h<0&&0<p-o?n.push(.5*(p-o)):s=p}0<s-o&&r(o,s,i,n)}}.apply(null,i))||(e.exports=n)},1914:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(7),r(3),r(12),r(2),r(1732),r(2563),r(2565)],void 0===(n=function(e,t,r,i,n,o,s,a,u,l,p){var c,d,h=o.getLogger("esri.views.layers.support.FeatureEffect");return c=a.declared(n.JSONSupport),i(f,c),d=f,Object.defineProperty(f.prototype,"insideEffect",{get:function(){return h.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect},set:function(e){h.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"outsideEffect",{get:function(){return h.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect},set:function(e){h.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"parsedIncludedEffect",{get:function(){return s.isSome(this.includedEffect)?"string"==typeof this.includedEffect?l.fromString(this.includedEffect):new p({from:l.fromString(this.includedEffect.from),to:l.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"parsedExcludedEffect",{get:function(){return s.isSome(this.excludedEffect)?"string"==typeof this.excludedEffect?l.fromString(this.excludedEffect):new p({from:l.fromString(this.excludedEffect.from),to:l.fromString(this.excludedEffect.to),duration:this.excludedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"done",{get:function(){return(!s.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!s.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},enumerable:!0,configurable:!0}),f.prototype.clone=function(){return new d({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})},r([a.property({type:u,json:{write:!0}})],f.prototype,"filter",void 0),r([a.property({type:String,json:{write:!0}})],f.prototype,"includedEffect",void 0),r([a.property({type:String,json:{write:!0}})],f.prototype,"excludedEffect",void 0),r([a.property({type:Boolean,json:{write:!0}})],f.prototype,"excludedLabelsVisible",void 0),r([a.property({dependsOn:["includedEffect"]})],f.prototype,"parsedIncludedEffect",null),r([a.property({dependsOn:["excludedEffect"]})],f.prototype,"parsedExcludedEffect",null),r([a.property({dependsOn:["includedEffect","excludedEffect"]})],f.prototype,"renderingHash",null),d=r([a.subclass("esri.views.layers.support.FeatureEffect")],f);function f(){var e=null!==c&&c.apply(this,arguments)||this;return e.filter=null,e.includedEffect=null,e.excludedEffect=null,e.excludedLabelsVisible=!1,e}}.apply(null,i))||(e.exports=n)},2559:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(5),r(89),r(2)],void 0===(n=function(e,t,r,i,n,o,s){return u=s.declared(o),i(a,u),(l=a).prototype.getEffectivePopupTemplate=function(e){if(void 0===e&&(e=!1),this.popupTemplate)return this.popupTemplate;var t=this.sourceLayer&&this.sourceLayer.featureReduction;return t&&"popupTemplate"in t?t.popupTemplate:null},a.prototype.getObjectId=function(){return this.objectId},a.prototype.clone=function(){return new l(n({objectId:this.objectId},this.cloneProperties()))},r([s.property({type:Number,json:{read:!0}})],a.prototype,"objectId",void 0),l=r([s.subclass("esri.AggregateGraphic")],a);function a(){return null!==u&&u.apply(this,arguments)||this}var u,l}.apply(null,i))||(e.exports=n)},2560:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(510),n(4)],void 0===(i=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createOrReuseTileRenderer=function(e,t){if(!e)return i.resolve(null);switch(e.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":return i.create(function(t){r(function(){return n.e(49).then(function(){var e=[n(2798)];t.apply(null,e)}.bind(this)).catch(n.oe)})}).then(function(e){return e.default}).then(function(e){return new e(t)});case"heatmap":return i.create(function(t){r(function(){return n.e(71).then(function(){var e=[n(2800)];t.apply(null,e)}.bind(this)).catch(n.oe)})}).then(function(e){return e.default}).then(function(e){return new e(t)})}return i.resolve(null)}}.apply(null,r))||(e.exports=i)},2561:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(5),r(9),r(10),r(119),r(4),r(304),r(208),r(2),r.dj.m(e)],void 0===(n=function(n,e,t,r,i,p,o,s,a,u,l,c,d){Object.defineProperty(e,"__esModule",{value:!0});var h,f=(h=c.declared(s.EsriPromise),t(y,h),y.prototype.initialize=function(){this._controller=a.createAbortController(),this.addResolvingPromise(this._startWorker(this._controller.signal))},y.prototype.destroy=function(){this._connection.close(),this._controller.abort()},Object.defineProperty(y.prototype,"tileRenderer",{set:function(e){this.client.tileRenderer=e},enumerable:!0,configurable:!0}),y.prototype.startup=function(s,a,u,l){return o(this,void 0,void 0,function(){var r,i,n,o;return p(this,function(e){switch(e.label){case 0:return r=this._controller.signal,t=u.source,i=Array.isArray(t)?{transferList:u.source,signal:r}:void 0,n=s.tileInfo.toJSON(),o={service:u,config:a,tileInfo:n,options:l},[4,this._connection.invoke("startup",o,i)];case 1:return e.sent(),this._startupResolver.resolve(),this._set("isReady",!0),[2]}var t})})},y.prototype.update=function(r,i){return o(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return t={config:r,options:i},[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("update",t)]}})})},y.prototype.setHighlight=function(t){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.setHighlight",t)]}})})},y.prototype.refresh=function(){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.refresh")]}})})},y.prototype.setViewState=function(t){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("setViewState",t.toJSON())]}})})},y.prototype.queryFeatures=function(t,r){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.queryFeatures",t.toJSON(),r)]}})})},y.prototype.queryObjectIds=function(t,r){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.queryObjectIds",t.toJSON(),r)]}})})},y.prototype.queryFeatureCount=function(t,r){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.queryFeatureCount",t.toJSON(),r)]}})})},y.prototype.queryExtent=function(t,r){return o(this,void 0,void 0,function(){return p(this,function(e){return[2,this._connection.invoke("controller.queryExtent",t.toJSON(),r)]})})},y.prototype.queryLatestObservations=function(t,r){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.queryLatestObservations",t.toJSON(),r)]}})})},y.prototype.queryStatistics=function(t){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.queryStatistics",t)]}})})},y.prototype.getObjectId=function(t){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.getObjectId",t)]}})})},y.prototype.getLocalId=function(t){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.getLocalId",t)]}})})},y.prototype.getAggregate=function(t){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.getAggregate",t)]}})})},y.prototype.getAggregateValueRanges=function(){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.getAggregateValueRanges")]}})})},y.prototype.mapValidLocalIds=function(t){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.mapValidLocalIds",t)]}})})},y.prototype.onEdits=function(n){return o(this,void 0,void 0,function(){var t,r,i;return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),t=n.addedFeatures,r=n.deletedFeatures,i=n.updatedFeatures,[2,this._connection.invoke("controller.onEdits",{addedFeatures:t,deletedFeatures:r,updatedFeatures:i})]}})})},y.prototype.enableEvent=function(t,r){return o(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.enableEvent",{name:t,value:r})]}})})},y.prototype._startWorker=function(i){return o(this,void 0,void 0,function(){var t,r;return p(this,function(e){switch(e.label){case 0:return t=u.getAbsMid("../features/Pipeline",n,d),[4,l.open(t,{client:this.client,strategy:"dedicated",signal:i})];case 1:return r=e.sent(),this._connection=r,[2]}})})},r([c.property()],y.prototype,"isReady",void 0),r([c.property()],y.prototype,"client",void 0),r([c.property()],y.prototype,"tileRenderer",null),r([c.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],y));function y(e){var t=h.call(this,e)||this;return t._startupResolver=a.createResolver(),t.isReady=!1,t}e.default=f}.apply(null,i))||(e.exports=n)},2562:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(5),r(9),r(10),r(6),r(63),r(3),r(12),r(4),r(16),r(2),r(57),r(109),r(82),r(301),r(1914),r(1732),r(1827)],void 0===(n=function(e,t,r,n,i,f,o,s,y,a,v,g,u,l,m,p,c,d,h,b,_){Object.defineProperty(t,"__esModule",{value:!0});var w=a.getLogger("esri.views.layers.FeatureLayerView");t.FeatureLayerView=function(e){return i=l.declared(e),r(t,i),t.prototype.initialize=function(){var e=this;u.init(this,["layer.renderer","layer.labelingInfo","layer.elevationInfo.featureExpressionInfo","filter","effect","layer.timeInfo","timeExtent"],function(){return e._handleRequiredFieldsChange()},!0)},Object.defineProperty(t.prototype,"availableFields",{get:function(){var e=this.layer,t=this.layer.fields,r=this.requiredFields;return"outFields"in e&&e.outFields?m.fixFields(t,m.unpackFieldNames(t,e.outFields).concat(r)):m.fixFields(t,r)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(e){w.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e,t){return void 0===t&&(t={}),this.inherited(arguments,[e,t])},t.prototype.createQuery=function(){var e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=v.isSome(this.filter)?this.filter.createQuery(e):new d(e);return this.timeExtent&&(t.timeExtent=t.timeExtent?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t},t.prototype.queryFeatures=function(e,t){return this.inherited(arguments,[e,t])},t.prototype.queryObjectIds=function(e,t){return this.inherited(arguments,[e,t])},t.prototype.queryFeatureCount=function(e,t){return this.inherited(arguments,[e,t])},t.prototype.queryExtent=function(e,t){return this.inherited(arguments,[e,t])},t.prototype._loadArcadeModules=function(e){if(e.get("expressionInfos.length"))return c.loadArcade()},t.prototype._handleRequiredFieldsChange=function(){var e=this,t=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",t),t.then(function(){e._updatingRequiredFieldsPromise===t&&e._set("_updatingRequiredFieldsPromise",null)})},t.prototype._updateRequiredFields=function(){return o(this,void 0,void 0,function(){var t,r,i,n,o,s,a,u,l,p,c,d,h;return f(this,function(e){switch(e.label){case 0:return this.layer&&this.view?(t="3d"===this.view.type,i=(r=this).layer,n=r.layer,o=n.fields,s=n.objectIdField,a=n.renderer,u=new Set,[4,g.eachAlways([a?a.collectRequiredFields(u,o):null,m.collectLabelingFields(u,i),t?m.collectElevationFields(u,i):null,v.isSome(this.filter)?m.collectFilterFields(u,i,this.filter):null,this.effect?m.collectFilterFields(u,i,this.effect.filter):null])]):[2];case 1:for(l=e.sent(),i.timeInfo&&this.timeExtent&&m.collectFields(u,i.fields,[i.timeInfo.startField,i.timeInfo.endField]),p=0,c=l;p<c.length;p++)(d=c[p]).error&&w.error(d.error);return m.collectField(u,o,s),h=y.valuesOfSet(u).sort(),this._set("requiredFields",h),[2]}})})},t.prototype.validateFetchPopupFeatures=function(e){var t=this.layer;return this.layer.popupEnabled?_.getFetchPopupTemplate(this.layer,e)?void 0:new s("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new s("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:t})},t.prototype.fetchClientPopupFeatures=function(h){return o(this,void 0,void 0,function(){var t,r,i,n,o,s,a,u,l,p,c,d;return f(this,function(e){switch(e.label){case 0:return(t=v.isSome(h)?h.clientGraphics:null)&&0!==t.length?(r=[],i=[],n=this.layer,o=_.getFetchPopupTemplate(n,h),v.isSome(o)?[4,this._loadArcadeModules(o)]:[2,g.resolve([])]):[2,g.resolve([])];case 1:return s=e.sent(),a=s&&s.arcadeUtils.hasGeometryOperations(o),[4,this.createPopupQuery(h)];case 2:for(u=e.sent(),l=m.unpackFieldNames(n.fields,u.outFields),p=0,c=t;p<c.length;p++)d=c[p],a||!m.featureHasFields(l,d)?i.push(d):r.push(d);return 0===i.length?[2,g.resolve(r)]:(u.objectIds=i.map(function(e){return e.attributes[n.objectIdField]}),[2,n.queryFeatures(u).then(function(e){return r.concat(e.features)}).catch(function(){return i})])}})})},t.prototype.createPopupQuery=function(n){return o(this,void 0,void 0,function(){var t,r,i;return f(this,function(e){switch(e.label){case 0:return t=this.layer,(r=t.createQuery()).returnGeometry=!0,r.returnZ=!0,r.returnM=!0,i=r,[4,_.getRequiredFields(this.layer,_.getFetchPopupTemplate(this.layer,n))];case 1:return i.outFields=e.sent(),r.outSpatialReference=this.view.spatialReference,[2,r]}})})},n([l.property()],t.prototype,"_updatingRequiredFieldsPromise",void 0),n([l.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],t.prototype,"availableFields",null),n([l.property({type:h})],t.prototype,"effect",void 0),n([l.property({type:b})],t.prototype,"filter",void 0),n([l.property(p.combinedViewLayerTimeExtentProperty)],t.prototype,"timeExtent",void 0),n([l.property()],t.prototype,"layer",void 0),n([l.property({type:Number})],t.prototype,"maximumNumberOfFeatures",null),n([l.property({readOnly:!0,type:Boolean})],t.prototype,"maximumNumberOfFeaturesExceeded",null),n([l.property({readOnly:!0})],t.prototype,"requiredFields",void 0),n([l.property()],t.prototype,"view",void 0),n([l.subclass("esri.views.layers.FeatureLayerView")],t);function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.apply(this,e)||this;return r._updatingRequiredFieldsPromise=null,r.effect=null,r.filter=null,r.layer=null,r.requiredFields=null,r.view=null,r}var i}}.apply(null,i))||(e.exports=n)},2563:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(5),r(6),r(7),r(3),r(12),r(2),r(484),r(514),r(2564)],void 0===(n=function(e,t,r,i,n,s,o,a,u,l,p,c,d){var h,f,y=a.getLogger("esri.views.layers.support.ParsedFeatureEffect"),v={grayscale:function(e){var t=1-e.amount,r=c.mat4f32.fromValues(.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,1);return p.mat4.transpose(r,r)},sepia:function(e){var t=1-e.amount,r=c.mat4f32.fromValues(.393+.607*t,.769-.769*t,.189-.189*t,0,.349-.349*t,.686+.314*t,.168-.168*t,0,.272-.272*t,.534-.534*t,.131+.869*t,0,0,0,0,1);return p.mat4.transpose(r,r)},saturate:function(e){var t=e.amount,r=c.mat4f32.fromValues(.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return p.mat4.transpose(r,r)},"hue-rotate":function(e){var t=Math.sin(e.angle*Math.PI/180),r=Math.cos(e.angle*Math.PI/180),i=c.mat4f32.fromValues(.213+.787*r-.213*t,.715-.715*r-.715*t,.072-.072*r+.928*t,0,.213-.213*r+.143*t,.715+.285*r+.14*t,.072-.072*r-.283*t,0,.213-.213*r-.787*t,.715-.715*r+.715*t,.072+.928*r+.072*t,0,0,0,0,1);return p.mat4.transpose(i,i)},invert:function(e){var t=1-2*e.amount,r=e.amount,i=c.mat4f32.fromValues(t,0,0,r,0,t,0,r,0,0,t,r,0,0,0,1);return p.mat4.transpose(i,i)},brightness:function(e){var t=e.amount,r=c.mat4f32.fromValues(t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return p.mat4.transpose(r,r)},contrast:function(e){var t=e.amount,r=c.mat4f32.fromValues(t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return p.mat4.transpose(r,r)}};return h=l.declared(o.JSONSupport),i(g,h),(f=g).fromString=function(e){var t=[],r=null;try{for(var i=0,n=d.parse(e);i<n.length;i++){var o=n[i];"opacity"===o.type?r=o:t.push(o)}}catch(e){y.error(new s("invalid-type","Encountered an error when parsing css",e))}return new f({transforms:t,opacity:r})},g.prototype.getOpacity=function(){return u.isSome(this.opacity)?this.opacity.amount:1},g.prototype.getColorMatrix=function(){var r=this;return(this.transforms||[]).map(function(e){return n({},e)}).reverse().reduce(function(e,t){return p.mat4.multiply(e,e,r._getFactory(t)(t))},c.mat4f32.create())},g.prototype.clone=function(){return new f({transforms:this.transforms&&this.transforms.map(function(e){return n({},e)}),customTransforms:this.customTransforms&&this.customTransforms.map(function(e){return n({},e)})})},g.prototype._getFactory=function(r){var e=v[r.type];if(e)return e;if(this.customTransforms)for(var t=0,i=this.customTransforms;t<i.length;t++){var n=i[t],o=function(){if(n.type===r.type){var e=c.mat4f32.fromValues.apply(c.mat4f32,n.matrix),t=p.mat4.transpose(e,e);return{value:function(){return t}}}}();if("object"==typeof o)return o.value}return y.error("invalid-type","No effect "+r.type+" exists"),function(){return c.mat4f32.create()}},r([l.property()],g.prototype,"opacity",void 0),r([l.property()],g.prototype,"transforms",void 0),r([l.property()],g.prototype,"customTransforms",void 0),f=r([l.subclass("esri.views.layers.support.ParsedFeatureEffect")],g);function g(){var e=null!==h&&h.apply(this,arguments)||this;return e.customTransforms=null,e.done=!0,e}}.apply(null,i))||(e.exports=n)},2564:function(e,t,r){var i;void 0===(i=function(){"use strict";function Xt(e,t,r,i){this.message=e,this.expected=t,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Xt)}return t=Xt,r=Error,e.prototype=r.prototype,t.prototype=new e,Xt.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function n(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}var o={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?n(e.parts[t][0])+"-"+n(e.parts[t][1]):n(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,i,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=(i=e[t],o[i.type](i));if(n.sort(),0<n.length){for(r=t=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+(t?'"'+i(t)+'"':"end of input")+" found."},{SyntaxError:Xt,parse:function(G,e){function t(){return G.substring(Lt,Nt)}function r(e,t){throw t=void 0!==t?t:a(Lt,Nt),new Xt(e,null,null,t)}function i(e,t){return{type:"literal",text:e,ignoreCase:t}}function n(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function o(e){return{type:"other",description:e}}function s(e){var t,r=Ht[e];if(r)return r;for(t=e-1;!Ht[t];)t--;for(r={line:(r=Ht[t]).line,column:r.column};t<e;)10===G.charCodeAt(t)?(r.line++,r.column=1):r.column++,t++;return Ht[e]=r}function a(e,t){var r=s(e),i=s(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:i.line,column:i.column}}}function D(e){Nt<Jt||(Jt<Nt&&(Jt=Nt,zt=[]),zt.push(e))}function u(){var e,t,r;return Gt++,t=Nt,t=K()!==$?(G.substr(Nt,4)===y?(r=y,Nt+=4):(r=$,0===Gt&&D(v)),r!==$&&K()!==$?(Lt=t,g()):(Nt=t,$)):(Nt=t,$),Gt--,t===$&&(0===Gt&&D(f)),(e=t)===$&&(e=function(){var e,t;if(e=[],(t=l())!==$)for(;t!==$;)e.push(t),t=l();else e=$;return e}()),e}function l(){var e,t,r,i,n,o,s,a,u,l,p,c,d,h,f,y,v,g,m,b,_,w,x,R,S,F,O,E,j,C,P,A,I,q,T,V,k,M,U,N,L,H,J,z;return Gt++,L=Nt,L=K()!==$?(G.substr(Nt,5)===te?(H=te,Nt+=5):(H=$,0===Gt&&D(re)),H!==$&&K()!==$&&(J=X())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(z=ie,Nt++):(z=$,0===Gt&&D(ne)),z!==$&&K()!==$?(Lt=L,oe(J)):(Nt=L,$)):(Nt=L,$)):(Nt=L,$),Gt--,L===$&&(0===Gt&&D(ee)),(e=L)===$&&(Gt++,k=Nt,k=K()!==$?(G.substr(Nt,11)===ae?(M=ae,Nt+=11):(M=$,0===Gt&&D(ue)),M!==$&&K()!==$&&(U=Q())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(N=ie,Nt++):(N=$,0===Gt&&D(ne)),N!==$&&K()!==$?(Lt=k,le(U)):(Nt=k,$)):(Nt=k,$)):(Nt=k,$),Gt--,k===$&&(0===Gt&&D(se)),(e=k)===$)&&(Gt++,I=Nt,I=K()!==$?(G.substr(Nt,9)===ce?(q=ce,Nt+=9):(q=$,0===Gt&&D(de)),q!==$&&K()!==$&&(T=Q())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(V=ie,Nt++):(V=$,0===Gt&&D(ne)),V!==$&&K()!==$?(Lt=I,he(T)):(Nt=I,$)):(Nt=I,$)):(Nt=I,$),Gt--,I===$&&(0===Gt&&D(pe)),(e=I)===$)&&(Gt++,F=Nt,F=K()!==$?(G.substr(Nt,12)===ye?(O=ye,Nt+=12):(O=$,0===Gt&&D(ve)),O!==$&&K()!==$&&(E=X())!==$&&K()!==$&&(j=X())!==$&&K()!==$?((C=X())===$&&(C=null),C!==$&&K()!==$?((P=function(){var e,t,r,i,n,o,s,a,u,l,p,c,d,h,f;return e=Nt,35===G.charCodeAt(Nt)?(t=vt,Nt++):(t=$,0===Gt&&D(gt)),(e=t!==$?(r=Nt,(r=(i=Y())!==$&&(n=Y())!==$?i=[i,n]:(Nt=r,$))!==$?(i=Nt,(i=(n=Y())!==$&&(o=Y())!==$?n=[n,o]:(Nt=i,$))!==$?(n=Nt,(n=(o=Y())!==$&&(s=Y())!==$?o=[o,s]:(Nt=n,$))!==$?(Lt=e,t=mt(r,i,n)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$))===$&&(e=Nt,35===G.charCodeAt(Nt)?(t=vt,Nt++):(t=$,0===Gt&&D(gt)),(e=t!==$&&(r=Y())!==$&&(i=Y())!==$&&(n=Y())!==$?(Lt=e,t=bt(r,i,n)):(Nt=e,$))===$&&(e=Nt,G.substr(Nt,5)===_t?(t=_t,Nt+=5):(t=$,0===Gt&&D(wt)),(e=t!==$&&(r=K())!==$&&(i=B())!==$&&(n=K())!==$?(44===G.charCodeAt(Nt)?(o=xt,Nt++):(o=$,0===Gt&&D(Rt)),o!==$&&(s=K())!==$&&(a=B())!==$&&K()!==$?(44===G.charCodeAt(Nt)?(u=xt,Nt++):(u=$,0===Gt&&D(Rt)),u!==$&&K()!==$&&(l=B())!==$&&(p=K())!==$?(44===G.charCodeAt(Nt)?(c=xt,Nt++):(c=$,0===Gt&&D(Rt)),c!==$&&(d=K())!==$&&(h=Q())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(f=ie,Nt++):(f=$,0===Gt&&D(ne)),f!==$?(Lt=e,t=St(i,a,l,h)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$))===$&&(e=Nt,G.substr(Nt,5)===_t?(t=_t,Nt+=5):(t=$,0===Gt&&D(wt)),(e=t!==$&&(r=K())!==$&&(i=W())!==$&&(n=K())!==$?(44===G.charCodeAt(Nt)?(o=xt,Nt++):(o=$,0===Gt&&D(Rt)),o!==$&&(s=K())!==$&&(a=W())!==$&&K()!==$?(44===G.charCodeAt(Nt)?(u=xt,Nt++):(u=$,0===Gt&&D(Rt)),u!==$&&K()!==$&&(l=W())!==$?(44===G.charCodeAt(Nt)?(p=xt,Nt++):(p=$,0===Gt&&D(Rt)),p!==$&&(c=K())!==$&&(d=Q())!==$?(41===G.charCodeAt(Nt)?(h=ie,Nt++):(h=$,0===Gt&&D(ne)),h!==$?(Lt=e,t=Ft(i,a,l,d)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$))===$&&(e=Nt,G.substr(Nt,5)===_t?(t=_t,Nt+=5):(t=$,0===Gt&&D(wt)),(e=t!==$&&(r=K())!==$&&(i=B())!==$&&(n=K())!==$?(44===G.charCodeAt(Nt)?(o=xt,Nt++):(o=$,0===Gt&&D(Rt)),o!==$&&(s=K())!==$&&(a=B())!==$&&K()!==$?(44===G.charCodeAt(Nt)?(u=xt,Nt++):(u=$,0===Gt&&D(Rt)),u!==$&&K()!==$&&(l=B())!==$&&(p=K())!==$?(41===G.charCodeAt(Nt)?(c=ie,Nt++):(c=$,0===Gt&&D(ne)),c!==$?(Lt=e,t=Ot(i,a,l)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$))===$&&(e=Nt,G.substr(Nt,5)===_t?(t=_t,Nt+=5):(t=$,0===Gt&&D(wt)),(e=t!==$&&(r=K())!==$&&(i=W())!==$&&(n=K())!==$?(44===G.charCodeAt(Nt)?(o=xt,Nt++):(o=$,0===Gt&&D(Rt)),o!==$&&(s=K())!==$&&(a=W())!==$&&K()!==$?(44===G.charCodeAt(Nt)?(u=xt,Nt++):(u=$,0===Gt&&D(Rt)),u!==$&&K()!==$&&(l=W())!==$?(41===G.charCodeAt(Nt)?(p=ie,Nt++):(p=$,0===Gt&&D(ne)),p!==$?(Lt=e,t=Et(i,a,l)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$))===$&&(e=Nt,G.substr(Nt,4)===jt?(t=jt,Nt+=4):(t=$,0===Gt&&D(Ct)),(e=t!==$&&(r=K())!==$&&(i=B())!==$&&(n=K())!==$?(44===G.charCodeAt(Nt)?(o=xt,Nt++):(o=$,0===Gt&&D(Rt)),o!==$&&(s=K())!==$&&(a=B())!==$&&K()!==$?(44===G.charCodeAt(Nt)?(u=xt,Nt++):(u=$,0===Gt&&D(Rt)),u!==$&&K()!==$&&(l=B())!==$&&(p=K())!==$?(41===G.charCodeAt(Nt)?(c=ie,Nt++):(c=$,0===Gt&&D(ne)),c!==$?(Lt=e,t=Ot(i,a,l)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$))===$&&(e=Nt,G.substr(Nt,4)===jt?(t=jt,Nt+=4):(t=$,0===Gt&&D(Ct)),(e=t!==$&&(r=K())!==$&&(i=W())!==$&&(n=K())!==$?(44===G.charCodeAt(Nt)?(o=xt,Nt++):(o=$,0===Gt&&D(Rt)),o!==$&&(s=K())!==$&&(a=W())!==$&&K()!==$?(44===G.charCodeAt(Nt)?(u=xt,Nt++):(u=$,0===Gt&&D(Rt)),u!==$&&K()!==$&&(l=W())!==$&&(p=K())!==$?(41===G.charCodeAt(Nt)?(c=ie,Nt++):(c=$,0===Gt&&D(ne)),c!==$?(Lt=e,t=Et(i,a,l)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$)):(Nt=e,$))===$&&(e=function(){var e,t,r;if(Gt++,e=Nt,t=[],kt.test(G.charAt(Nt))?(r=G.charAt(Nt),Nt++):(r=$,0===Gt&&D(Mt)),r!==$)for(;r!==$;)t.push(r),kt.test(G.charAt(Nt))?(r=G.charAt(Nt),Nt++):(r=$,0===Gt&&D(Mt));else t=$;return t!==$&&(Lt=e,t=Ut()),Gt--,(e=t)===$&&(t=$,0===Gt&&D(Vt)),e}())))))))),e}())===$&&(P=null),P!==$&&K()!==$?(41===G.charCodeAt(Nt)?(A=ie,Nt++):(A=$,0===Gt&&D(ne)),A!==$&&K()!==$?(Lt=F,ge(E,j,C,P)):(Nt=F,$)):(Nt=F,$)):(Nt=F,$)):(Nt=F,$)):(Nt=F,$),Gt--,F===$&&(0===Gt&&D(fe)),(e=F)===$)&&(Gt++,w=Nt,w=K()!==$?(G.substr(Nt,10)===be?(x=be,Nt+=10):(x=$,0===Gt&&D(_e)),x!==$&&K()!==$&&(R=Q())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(S=ie,Nt++):(S=$,0===Gt&&D(ne)),S!==$&&K()!==$?(Lt=w,we(R)):(Nt=w,$)):(Nt=w,$)):(Nt=w,$),Gt--,w===$&&(0===Gt&&D(me)),(e=w)===$)&&(Gt++,g=Nt,g=K()!==$?(G.substr(Nt,11)===Re?(m=Re,Nt+=11):(m=$,0===Gt&&D(Se)),m!==$&&K()!==$&&(b=function(){var e,t,r;return Gt++,e=Nt,(e=(t=function(){var e,t;return Gt++,e=Nt,Ge.test(G.charAt(Nt))?(t=G.charAt(Nt),Nt++):(t=$,0===Gt&&D(De)),t===$&&(t=null),e=t!==$&&W()!==$?(Lt=e,t=Je()):(Nt=e,$),Gt--,e===$&&(t=$,0===Gt&&D(ze)),e}())!==$&&(r=Z())!==$?(Lt=e,t=We(t,r)):(Nt=e,$))===$&&(e=Nt,48===G.charCodeAt(Nt)?(t=Be,Nt++):(t=$,0===Gt&&D(Ze)),e=t!==$?((r=Z())===$&&(r=null),r!==$?(Lt=e,t=Xe()):(Nt=e,$)):(Nt=e,$)),Gt--,e===$&&(t=$,0===Gt&&D(Qe)),e}())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(_=ie,Nt++):(_=$,0===Gt&&D(ne)),_!==$&&K()!==$?(Lt=g,Fe(b)):(Nt=g,$)):(Nt=g,$)):(Nt=g,$),Gt--,g===$&&(0===Gt&&D(xe)),(e=g)===$)&&(Gt++,h=Nt,h=K()!==$?(G.substr(Nt,7)===Ee?(f=Ee,Nt+=7):(f=$,0===Gt&&D(je)),f!==$&&K()!==$&&(y=Q())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(v=ie,Nt++):(v=$,0===Gt&&D(ne)),v!==$&&K()!==$?(Lt=h,Ce(y)):(Nt=h,$)):(Nt=h,$)):(Nt=h,$),Gt--,h===$&&(0===Gt&&D(Oe)),(e=h)===$)&&(Gt++,l=Nt,l=K()!==$?(G.substr(Nt,8)===Ae?(p=Ae,Nt+=8):(p=$,0===Gt&&D(Ie)),p!==$&&K()!==$&&(c=Q())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(d=ie,Nt++):(d=$,0===Gt&&D(ne)),d!==$&&K()!==$?(Lt=l,qe(c)):(Nt=l,$)):(Nt=l,$)):(Nt=l,$),Gt--,l===$&&(0===Gt&&D(Pe)),(e=l)===$)&&(Gt++,o=Nt,o=K()!==$?(G.substr(Nt,9)===Ve?(s=Ve,Nt+=9):(s=$,0===Gt&&D(ke)),s!==$&&K()!==$&&(a=Q())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(u=ie,Nt++):(u=$,0===Gt&&D(ne)),u!==$&&K()!==$?(Lt=o,Me(a)):(Nt=o,$)):(Nt=o,$)):(Nt=o,$),Gt--,o===$&&(0===Gt&&D(Te)),(e=o)===$)&&(Gt++,t=Nt,t=K()!==$?(G.substr(Nt,6)===Ne?(r=Ne,Nt+=6):(r=$,0===Gt&&D(Le)),r!==$&&K()!==$&&(i=Q())!==$&&K()!==$?(41===G.charCodeAt(Nt)?(n=ie,Nt++):(n=$,0===Gt&&D(ne)),n!==$&&K()!==$?(Lt=t,He(i)):(Nt=t,$)):(Nt=t,$)):(Nt=t,$),Gt--,t===$&&(0===Gt&&D(Ue)),e=t),e}function Q(){var e;return Gt++,(e=B())===$&&(e=W()),Gt--,e===$&&0===Gt&&D(m),e}function W(){var e,t,r,i,n;if(Gt++,e=Nt,t=[],_.test(G.charAt(Nt))?(r=G.charAt(Nt),Nt++):(r=$,0===Gt&&D(w)),r!==$)for(;r!==$;)t.push(r),_.test(G.charAt(Nt))?(r=G.charAt(Nt),Nt++):(r=$,0===Gt&&D(w));else t=$;if(t!==$)if(46===G.charCodeAt(Nt)?(r=S,Nt++):(r=$,0===Gt&&D(F)),r!==$){if(i=[],_.test(G.charAt(Nt))?(n=G.charAt(Nt),Nt++):(n=$,0===Gt&&D(w)),n!==$)for(;n!==$;)i.push(n),_.test(G.charAt(Nt))?(n=G.charAt(Nt),Nt++):(n=$,0===Gt&&D(w));else i=$;e=i!==$?(Lt=e,t=Je()):(Nt=e,$)}else Nt=e,e=$;else Nt=e,e=$;return e===$&&(e=function(){var e,t,r;if(Gt++,e=Nt,t=[],_.test(G.charAt(Nt))?(r=G.charAt(Nt),Nt++):(r=$,0===Gt&&D(w)),r!==$)for(;r!==$;)t.push(r),_.test(G.charAt(Nt))?(r=G.charAt(Nt),Nt++):(r=$,0===Gt&&D(w));else t=$;return t!==$&&(Lt=e,t=x()),Gt--,(e=t)===$&&(t=$,0===Gt&&D(b)),e}()),Gt--,e===$&&(t=$,0===Gt&&D(R)),e}function B(){var e,t,r;return e=Nt,e=(t=W())!==$?(37===G.charCodeAt(Nt)?(r=O,Nt++):(r=$,0===Gt&&D(E)),r!==$?(Lt=e,t=j(t)):(Nt=e,$)):(Nt=e,$)}function Z(){var e,t;return Gt++,e=Nt,G.substr(Nt,3)===P?(t=P,Nt+=3):(t=$,0===Gt&&D(A)),t!==$&&(Lt=e,t=I()),(e=t)===$&&(e=Nt,G.substr(Nt,4)===q?(t=q,Nt+=4):(t=$,0===Gt&&D(T)),t!==$&&(Lt=e,t=V()),(e=t)===$&&(e=Nt,G.substr(Nt,3)===k?(t=k,Nt+=3):(t=$,0===Gt&&D(M)),t!==$&&(Lt=e,t=U()),(e=t)===$&&(e=Nt,G.substr(Nt,4)===N?(t=N,Nt+=4):(t=$,0===Gt&&D(L)),t!==$&&(Lt=e,t=H()),e=t))),Gt--,e===$&&(t=$,0===Gt&&D(C)),e}function X(){var e,t,r;return Gt++,e=Nt,(e=(t=W())!==$?(r=p())!==$?(Lt=e,t=We(t,r)):(Nt=e,$):(Nt=e,$))===$&&(e=Nt,48===G.charCodeAt(Nt)?(t=Be,Nt++):(t=$,0===Gt&&D(Ze)),e=t!==$?((r=p())===$&&(r=null),r!==$?(Lt=e,t=Xe()):(Nt=e,$)):(Nt=e,$)),Gt--,e===$&&(t=$,0===Gt&&D(J)),e}function p(){var e,t;return e=Nt,G.substr(Nt,2)===z?(t=z,Nt+=2):(t=$,0===Gt&&D(Ye)),t!==$&&(Lt=e,t=I()),(e=t)===$&&(e=Nt,G.substr(Nt,2)===Ke?(t=Ke,Nt+=2):(t=$,0===Gt&&D($e)),t!==$&&(Lt=e,t=et()),(e=t)===$&&(e=Nt,G.substr(Nt,2)===tt?(t=tt,Nt+=2):(t=$,0===Gt&&D(rt)),t!==$&&(Lt=e,t=it()),(e=t)===$&&(e=Nt,81===G.charCodeAt(Nt)?(t=nt,Nt++):(t=$,0===Gt&&D(ot)),t!==$&&(Lt=e,t=st()),(e=t)===$&&(e=Nt,G.substr(Nt,2)===at?(t=at,Nt+=2):(t=$,0===Gt&&D(ut)),t!==$&&(Lt=e,t=lt()),(e=t)===$&&(e=Nt,G.substr(Nt,2)===pt?(t=pt,Nt+=2):(t=$,0===Gt&&D(ct)),t!==$&&(Lt=e,t=dt()),(e=t)===$&&(e=Nt,G.substr(Nt,2)===ht?(t=ht,Nt+=2):(t=$,0===Gt&&D(ft)),t!==$&&(Lt=e,t=yt()),e=t)))))),e}function Y(){var e;return Pt.test(G.charAt(Nt))?(e=G.charAt(Nt),Nt++):(e=$,0===Gt&&D(At)),e}function K(){var e,t;for(Gt++,e=[],qt.test(G.charAt(Nt))?(t=G.charAt(Nt),Nt++):(t=$,0===Gt&&D(Tt));t!==$;)e.push(t),qt.test(G.charAt(Nt))?(t=G.charAt(Nt),Nt++):(t=$,0===Gt&&D(Tt));return Gt--,e===$&&(t=$,0===Gt&&D(It)),e}e=void 0!==e?e:{};var c,$={},d={start:u},h=u,f=o("none"),y="none",v=i("none",!1),g=function(){return null},ee=o("blur()"),te="blur(",re=i("blur(",!1),ie=")",ne=i(")",!1),oe=function(e){return{type:"blur",radius:e}},se=o("brightness()"),ae="brightness(",ue=i("brightness(",!1),le=function(e){return{type:"brightness",amount:e}},pe=o("contrast()"),ce="contrast(",de=i("contrast(",!1),he=function(e){return{type:"contrast",amount:e}},fe=o("drop-shadow()"),ye="drop-shadow(",ve=i("drop-shadow(",!1),ge=function(e,t,r,i){return{type:"drop-shadow",offsetX:e,offsetY:t,blurRadius:r,color:i}},me=o("grayscale()"),be="grayscale(",_e=i("grayscale(",!1),we=function(e){return{type:"grayscale",amount:e}},xe=o("hue-rotate()"),Re="hue-rotate(",Se=i("hue-rotate(",!1),Fe=function(e){return{type:"hue-rotate",angle:e}},Oe=o("invert()"),Ee="invert(",je=i("invert(",!1),Ce=function(e){return{type:"invert",amount:e}},Pe=o("opacity()"),Ae="opacity(",Ie=i("opacity(",!1),qe=function(e){return{type:"opacity",amount:e}},Te=o("saturate()"),Ve="saturate(",ke=i("saturate(",!1),Me=function(e){return{type:"saturate",amount:e}},Ue=o("sepia()"),Ne="sepia(",Le=i("sepia(",!1),He=function(e){return{type:"sepia",amount:e}},m=o("<number-percentage>"),b=o("<integer>"),_=/^[0-9]/,w=n([["0","9"]],!1,!1),x=function(){return parseInt(t(),10)},R=o("<number>"),S=".",F=i(".",!1),Je=function(){return parseFloat(t())},ze=o("<signedNumber>"),Ge=/^[+\-]/,De=n(["+","-"],!1,!1),O="%",E=i("%",!1),j=function(e){return e/100},Qe=o("<angle>"),We=function(e,t){return e*t},Be="0",Ze=i("0",!1),Xe=function(){return 0},C=o("<unit>"),P="deg",A=i("deg",!1),I=function(){return 1},q="grad",T=i("grad",!1),V=function(){return.9},k="rad",M=i("rad",!1),U=function(){return 180/Math.PI},N="turn",L=i("turn",!1),H=function(){return 1/360},J=o("<length>"),z="px",Ye=i("px",!1),Ke="cm",$e=i("cm",!1),et=function(){return 96/2.54},tt="mm",rt=i("mm",!1),it=function(){return 96/2.54/10},nt="Q",ot=i("Q",!1),st=function(){return 96/2.54/40},at="in",ut=i("in",!1),lt=function(){return 96},pt="pc",ct=i("pc",!1),dt=function(){return 16},ht="pt",ft=i("pt",!1),yt=function(){return 96/73},vt="#",gt=i("#",!1),mt=function(e,t,r){return[parseInt(e.join(""),16),parseInt(t.join(""),16),parseInt(r.join(""),16)]},bt=function(e,t,r){return[parseInt([e,e].join(""),16),parseInt([t,t].join(""),16),parseInt([r,r].join(""),16)]},_t="rgba(",wt=i("rgba(",!1),xt=",",Rt=i(",",!1),St=function(e,t,r,i){return[255*e,255*t,255*r,i]},Ft=function(e,t,r,i){return[e,t,r,i]},Ot=function(e,t,r){return[255*e,255*t,255*r,1]},Et=function(e,t,r){return[e,t,r,1]},jt="rgb(",Ct=i("rgb(",!1),Pt=/^[0-9a-fA-F]/,At=n([["0","9"],["a","f"],["A","F"]],!1,!1),It=o("whitespace"),qt=/^[ \t\n\r]/,Tt=n([" ","\t","\n","\r"],!1,!1),Vt=o("<named-color>"),kt=/^[a-z]/,Mt=n([["a","z"]],!1,!1),Ut=function(){var e=t();return Zt.has(e)||r('unknown color "'+e+'"'),Bt[e].concat(1)},Nt=0,Lt=0,Ht=[{line:1,column:1}],Jt=0,zt=[],Gt=0;if("startRule"in e){if(!(e.startRule in d))throw new Error("Can't start parsing from rule \""+e.startRule+'".');h=d[e.startRule]}var Dt,Qt,Wt,Bt={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]},Zt=new Set(Object.keys(Bt));if((c=h())!==$&&Nt===G.length)return c;throw c!==$&&Nt<G.length&&D({type:"end"}),Dt=zt,Qt=Jt<G.length?G.charAt(Jt):null,Wt=Jt<G.length?a(Jt,Jt+1):a(Jt,Jt),new Xt(Xt.buildMessage(Dt,Qt),Dt,Qt,Wt)}};function e(){this.constructor=t}var t,r}.apply(null,[]))||(e.exports=i)},2565:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(13),r(2),r(484)],void 0===(n=function(e,t,r,i,n,o,a){return u=o.declared(n),i(s,u),(l=s).prototype.getColorMatrix=function(){if(this.done=!1,null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var e=this._lastTime,t=Date.now(),r=t-e;this._currentStep=this._currentStep+r,2147483647<=this._currentStep&&(this._currentStep=0),this._lastTime=t}var i=this._currentStep%this.duration/(this.duration/2),n=i<=1?i:2-i,o=this.from.getColorMatrix(),s=this.to.getColorMatrix();return a.mat4.multiplyScalar(o,o,1-n),a.mat4.multiplyScalar(s,s,n),!this.repeat&&this._currentStep>=this.duration&&(this.done=!0),a.mat4.add(o,o,s)},s.prototype.getOpacity=function(){throw new Error("No getOpacity definition for Transition")},s.prototype.clone=function(){var e=new l({from:this.from.clone(),to:this.to.clone(),duration:this.duration});return e._lastTime=this._lastTime,e._currentStep=this._currentStep,e},r([o.property()],s.prototype,"from",void 0),r([o.property()],s.prototype,"to",void 0),r([o.property({type:Number})],s.prototype,"duration",void 0),r([o.property({type:Boolean})],s.prototype,"repeat",void 0),l=r([o.subclass("esri.views.layers.support.Transition")],s);function s(){var e=null!==u&&u.apply(this,arguments)||this;return e.from=null,e.to=null,e.duration=4e3,e.repeat=!0,e.done=!1,e}var u,l}.apply(null,i))||(e.exports=n)}}]);