(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/ServiceAreaTask":1595,"esri/tasks/support/GPMessage":1672,"esri/core/queryUtils":1709,"esri/tasks/mixins/NAServiceDescription":1710,"esri/tasks/support/NAMessage":1711,"esri/tasks/support/ServiceAreaSolveResult":2195})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1595:function(e,r,t){var o,s;o=[t.dj.c(e.i),r,t(5),t(1),t(0),t(29),t(4),t(1709),t(2),t(485),t(303),t(1710),t(2195)],void 0===(s=function(e,r,p,t,o,u,c,s,i,d,n,a,f){var l,y=s.createQueryParamsHelper({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});return l=i.declared(a.NAServiceDescriptionMixin(n)),t(v,l),v.prototype.solve=function(o,s){var i=this,n=[],e=[],a={},l={};return o.facilities&&o.facilities.features&&this._collectGeometries(o.facilities.features,e,"facilities.features",a),o.pointBarriers&&o.pointBarriers.features&&this._collectGeometries(o.pointBarriers.features,e,"pointBarriers.features",a),o.polylineBarriers&&o.polylineBarriers.features&&this._collectGeometries(o.polylineBarriers.features,e,"polylineBarriers.features",a),o.polygonBarriers&&o.polygonBarriers.features&&this._collectGeometries(o.polygonBarriers.features,e,"polygonBarriers.features",a),d.normalizeCentralMeridian(e).then(function(e){for(var r in a){var t=a[r];n.push(r),l[r]=e.slice(t[0],t[1])}return i._isInputGeometryZAware(l,n)?i.getServiceDescription():c.resolve({dontCheck:!0})}).then(function(e){for(var r in("dontCheck"in e?e.dontCheck:e.hasZ)||i._dropZValuesOffInputGeometry(l,n),l)!function(t){l[t].forEach(function(e,r){o.get(t)[r].geometry=e})}(r);var t={query:p({},i.parsedUrl.query,{f:"json"},y.toQueryParams(o))};return(i.requestOptions||s)&&(t=p({},i.requestOptions,s,t)),u(i.parsedUrl.path+"/solveServiceArea",t)}).then(function(e){return f.fromJSON(e.data)})},v.prototype._collectGeometries=function(e,r,t,o){o[t]=[r.length,r.length+e.length],e.forEach(function(e){r.push(e.geometry)})},o([i.property()],v.prototype,"url",void 0),o([i.subclass("esri.tasks.ServiceAreaTask")],v);function v(e){var r=l.call(this,e)||this;return r.url=null,r}}.apply(null,o))||(e.exports=s)},1672:function(e,r,t){var o,s;o=[t.dj.c(e.i),r,t(1),t(0),t(17),t(7),t(2)],void 0===(s=function(e,r,t,o,s,i,n){var a,l=new s.default({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});return a=n.declared(i.JSONSupport),t(p,a),o([n.property({type:String,json:{write:!0}})],p.prototype,"description",void 0),o([n.property({type:String,json:{read:l.read,write:l.write}})],p.prototype,"type",void 0),o([n.subclass("esri.tasks.support.GPMessage")],p);function p(e){var r=a.call(this,e)||this;return r.description=null,r.type=null,r}}.apply(null,o))||(e.exports=s)},1709:function(e,r,t){var o,s;o=[t.dj.c(e.i),r],void 0===(s=function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t=(o.prototype.toQueryParams=function(e){var s=this;if(!e)return null;var i=e.toJSON(),n={};return Object.keys(i).forEach(function(e){var r=s._options[e];if(r){var t="boolean"!=typeof r&&r.name?r.name:e,o="boolean"!=typeof r&&r.getter?r.getter(i):i[e];null!=o&&(n[t]=function(e){if(!Array.isArray(e))return 0;var r=e[0];return"number"==typeof r||"string"==typeof r}(o)?o.join(","):"object"==typeof o?JSON.stringify(o):o)}else n[e]=i[e]},this),n},o);function o(e){void 0===e&&(e={}),this._options=e}r.createQueryParamsHelper=function(e){return new t(e)}}.apply(null,o))||(e.exports=s)},1710:function(e,r,t){var o,s;o=[t.dj.c(e.i),r,t(0),t(1),t(9),t(10),t(29),t(6),t(12),t(60),t(22),t(2),t(303)],void 0===(s=function(e,r,o,s,m,a,M,l,p,S,b,i,t){Object.defineProperty(r,"__esModule",{value:!0}),r.NAServiceDescriptionMixin=function(e){return t=i.declared(e),s(r,t),r.prototype.getServiceDescription=function(){return a(this,void 0,void 0,function(){return m(this,function(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription()),[2,this._serviceDescriptionPromise]})})},r.prototype._fetchServiceDescription=function(){return a(this,void 0,void 0,function(){var r,t,o,s,i,n;return m(this,function(e){switch(e.label){case 0:if(!this.url||!this.parsedUrl)throw new l("network-service:missing-url","Url to Network service is missing");return r=this.url,[4,M(r,{query:{f:"json"}})];case 1:for((t=e.sent().data).supportedTravelModes||(t.supportedTravelModes=[]),o=0;o<t.supportedTravelModes.length;o++)t.supportedTravelModes[o].id||(t.supportedTravelModes[o].id=t.supportedTravelModes[o].itemId);return[4,(10.4<=t.currentVersion?function(i){return a(this,void 0,void 0,function(){var r,t,o,s;return m(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,M(i+("/"===i[i.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}})];case 1:return r=e.sent().data,t=r.supportedTravelModes,o=r.defaultTravelMode,[2,{supportedTravelModes:t,defaultTravelMode:o}];case 2:throw s=e.sent(),new l("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:s});case 3:return[2]}})})}:function(g){return a(this,void 0,void 0,function(){var r,t,o,s,i,n,a,l,p,u,c,d,f,y,v,h;return m(this,function(e){switch(e.label){case 0:return[4,M(g.substring(0,g.indexOf("/rest/")+6)+"info",{query:{f:"json"}})];case 1:return(r=e.sent().data)&&r.owningSystemUrl?(g=r.owningSystemUrl,[4,M(g+("/"===g[g.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}})]):[2,{supportedTravelModes:[],defaultTravelMode:null}];case 2:return t=e.sent().data,(o=S.getDeepValue("helperServices.routingUtilities.url",t))?(s=b.urlToObject(g),i=/\/solveClosestFacility$/.test(s.path)?"Route":/\/solveClosestFacility$/.test(s.path)?"ClosestFacility":"ServiceAreas",[4,M(o+("/"===o[o.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:i}})]):[2,{supportedTravelModes:[],defaultTravelMode:null}];case 3:if(n=e.sent(),a=[],l=null,n&&n.data&&n.data.results&&n.data.results.length)for(p=n.data.results,u=0,c=p;u<c.length;u++)if("supportedTravelModes"===(d=c[u]).paramName){if(d.value&&d.value.features)for(f=0,y=d.value.features;f<y.length;f++)(v=y[f].attributes)&&(h=JSON.parse(v.TravelMode),a.push(h))}else"defaultTravelMode"===d.paramName&&(l=d.value);return[2,{supportedTravelModes:a,defaultTravelMode:l}]}})})})(r)];case 2:return s=e.sent(),i=s.defaultTravelMode,n=s.supportedTravelModes,t.defaultTravelMode=i,t.supportedTravelModes=n,[2,t]}})})},r.prototype._isInputGeometryZAware=function(e,r){for(var t=0;t<r.length;t++){var o=e[r[t]];if(o&&o.length)for(var s=0,i=o;s<i.length;s++){var n=i[s];if(p.isSome(n)&&n.hasZ)return!0}}return!1},r.prototype._dropZValuesOffInputGeometry=function(e,r){for(var t=0;t<r.length;t++){var o=e[r[t]];if(o&&o.length)for(var s=0,i=o;s<i.length;s++)i[s].z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")},o([i.subclass("esri.tasks.mixins.NAServiceDescription")],r);function r(){return null!==t&&t.apply(this,arguments)||this}var t};var n,u=(n=i.declared(r.NAServiceDescriptionMixin(t)),s(c,n),o([i.subclass("esri.tasks.mixins.NAServiceDescription")],c));function c(){return null!==n&&n.apply(this,arguments)||this}r.NAServiceDescription=u}.apply(null,o))||(e.exports=s)},1711:function(e,r,t){var o,s;o=[t.dj.c(e.i),r,t(1),t(0),t(17),t(2),t(1672)],void 0===(s=function(e,r,t,o,s,i,n){var a,l=new s.default({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});return a=i.declared(n),t(p,a),o([i.property({type:String,json:{read:l.read,write:l.write}})],p.prototype,"type",void 0),o([i.subclass("esri.tasks.support.NAMessage")],p);function p(e){var r=a.call(this,e)||this;return r.type=null,r}}.apply(null,o))||(e.exports=s)},2195:function(e,r,t){var o,s;o=[t.dj.c(e.i),r,t(1),t(0),t(28),t(89),t(7),t(12),t(2),t(31),t(1711)],void 0===(s=function(e,r,t,o,s,i,n,a,l,p,u){function c(o){return o.features.map(function(e){var r=p.fromJSON(o.spatialReference),t=i.fromJSON(e);return a.expect(t.geometry).spatialReference=r,t})}function d(r){return r.features.map(function(e){return e.geometry.spatialReference=r.spatialReference,s.fromJSON(e.geometry)})}return y=l.declared(n.JSONSupport),t(f,y),f.prototype.readFacilities=function(e){return d(e)},f.prototype.readPointBarriers=function(e,r){return d(r.barriers)},f.prototype.readPolylineBarriers=function(e){return d(e)},f.prototype.readPolygonBarriers=function(e){return d(e)},f.prototype.readIncidents=function(e,r){return c(r.saPolylines)},f.prototype.readServiceAreaPolygons=function(e,r){return c(r.saPolygons)},o([l.property({type:[s.Point]})],f.prototype,"facilities",void 0),o([l.reader("facilities")],f.prototype,"readFacilities",null),o([l.property({type:[u]})],f.prototype,"messages",void 0),o([l.property({type:[s.Point]})],f.prototype,"pointBarriers",void 0),o([l.reader("pointBarriers",["barriers"])],f.prototype,"readPointBarriers",null),o([l.property({type:[s.Polyline]})],f.prototype,"polylineBarriers",void 0),o([l.reader("polylineBarriers")],f.prototype,"readPolylineBarriers",null),o([l.property({type:[s.Polygon]})],f.prototype,"polygonBarriers",void 0),o([l.reader("polygonBarriers")],f.prototype,"readPolygonBarriers",null),o([l.property({type:[i]})],f.prototype,"serviceAreaPolylines",void 0),o([l.reader("serviceAreaPolylines",["saPolylines"])],f.prototype,"readIncidents",null),o([l.property({type:[i]})],f.prototype,"serviceAreaPolygons",void 0),o([l.reader("serviceAreaPolygons",["saPolygons"])],f.prototype,"readServiceAreaPolygons",null),o([l.subclass("esri.tasks.support.ServiceAreaSolveResult")],f);function f(e){var r=y.call(this,e)||this;return r.facilities=null,r.messages=null,r.pointBarriers=null,r.polylineBarriers=null,r.polygonBarriers=null,r.serviceAreaPolylines=null,r.serviceAreaPolygons=null,r}var y}.apply(null,o))||(e.exports=s)}}]);