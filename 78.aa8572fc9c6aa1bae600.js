(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/draw/support/drawUtils":1667,"esri/views/draw/support/GraphicMover":1746,"esri/views/draw/support/input/GraphicMoverEvents":1747})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1667:function(t,i,e){var r,n;r=[e.dj.c(t.i),i,e(80),e(490),e(305)],void 0===(n=function(t,i,N,Q,W){function E(t,i,e,r){if(null==r||t.hasZ||(r=void 0),"point"===t.type)return t.x+=i,t.y+=e,t.hasZ&&null!=r&&(t.z+=r),t;if("multipoint"===t.type){for(var n=t.points,a=0;a<n.length;a++)n[a]=p(n[a],i,e,r);return t}if("extent"===t.type)return t.xmin+=i,t.xmax+=i,t.ymin+=e,t.ymax+=e,null!=r&&(t.zmin+=r,t.zmax+=r),t;for(var o=W.geometryToCoordinates(t),h="polyline"===t.type?t.paths:t.rings,c=0;c<o.length;c++){var s=o[c];for(a=0;a<s.length;a++)s[a]=p(s[a],i,e,r)}return"paths"in t?t.paths=h:t.rings=h,t}function p(t,i,e,r){return X(t,t[0]+i,t[1]+e,null!=t[2]&&null!=r?t[2]+r:void 0)}function X(t,i,e,r){var n=[i,e];return 2<t.length&&n.push(null!=r?r:t[2]),3<t.length&&n.push(t[3]),n}Object.defineProperty(i,"__esModule",{value:!0}),i.move=E,i.cloneMove=function(t,i,e,r,n){var a=t.clone(),o=r.resolution;if("point"===a.type){if(n)E(a,i*o,-e*o);else{var h=r.state.transform,c=r.state.inverseTransform,s=h[0]*a.x+h[2]*a.y+h[4],p=h[1]*a.x+h[3]*a.y+h[5];a.x=c[0]*(s+i)+c[2]*(p+e)+c[4],a.y=c[1]*(s+i)+c[3]*(p+e)+c[5]}return a}if("multipoint"===a.type){if(n)E(a,i*o,-e*o);else for(var l=a.points,v=(h=r.state.transform,c=r.state.inverseTransform,0);v<l.length;v++){var u=l[v],d=h[0]*u[0]+h[2]*u[1]+h[4],y=h[1]*u[0]+h[3]*u[1]+h[5];s=c[0]*(d+i)+c[2]*(y+e)+c[4],p=c[1]*(d+i)+c[3]*(y+e)+c[5];l[v]=X(u,s,p,void 0)}return a}if("extent"===a.type){if(n)E(a,i*o,-e*o);else{h=r.state.transform,c=r.state.inverseTransform;var f=h[0]*a.xmin+h[2]*a.ymin+h[4],g=h[1]*a.xmin+h[3]*a.ymin+h[5],m=h[0]*a.xmax+h[2]*a.ymax+h[4],G=h[1]*a.xmax+h[3]*a.ymax+h[5];a.xmin=c[0]*(f+i)+c[2]*(g+e)+c[4],a.ymin=c[1]*(f+i)+c[3]*(g+e)+c[5],a.xmax=c[0]*(m+i)+c[2]*(G+e)+c[4],a.ymax=c[1]*(m+i)+c[3]*(G+e)+c[5]}return a}if(n)E(a,i*o,-e*o);else{for(var x=W.geometryToCoordinates(a),w=(l="polyline"===a.type?a.paths:a.rings,h=r.state.transform,c=r.state.inverseTransform,0);w<x.length;w++){var _=x[w];for(v=0;v<_.length;v++){u=_[v],d=h[0]*u[0]+h[2]*u[1]+h[4],y=h[1]*u[0]+h[3]*u[1]+h[5],s=c[0]*(d+i)+c[2]*(y+e)+c[4],p=c[1]*(d+i)+c[3]*(y+e)+c[5];_[v]=X(u,s,p,void 0)}}"paths"in a?a.paths=l:a.rings=l}return a},i.scale=function(t,i,e,r){if("point"===t.type){var n=t.x,a=t.y,o=r?r[0]:n,h=r?r[1]:a,c=t.clone(),s=(n-o)*i+o,p=(a-h)*e+h;return c.x=s,c.y=p,c}if("multipoint"===t.type){for(var l=W.geometryToCoordinates(t),v=N.create(),u=Q.getRingsOrPathsBounds(v,[l]),d=u[0],y=u[1],f=u[2],g=u[3],m=r?r[0]:(d+f)/2,G=r?r[1]:(g+y)/2,x=t.clone(),w=x.points,_=0;_<w.length;_++){s=((n=(K=w[_])[0])-m)*i+m,p=((a=K[1])-G)*e+G;w[_]=X(K,s,p,void 0)}return x}if("extent"===t.type){var E=t.xmin,P=t.xmax,k=t.ymin,O=t.ymax,b=r?r[0]:(E+P)/2,M=r?r[1]:(O+k)/2,D=t.clone();if(D.xmin=(E-b)*i+b,D.ymax=(O-M)*e+M,D.xmax=(P-b)*i+b,D.ymin=(k-M)*e+M,D.xmin>D.xmax){var T=D.xmin,H=D.xmax;D.xmin=H,D.xmax=T}if(D.ymin>D.ymax){var C=D.ymin,S=D.ymax;D.ymin=S,D.ymax=C}return D}for(var A=W.geometryToCoordinates(t),U=N.create(),L=Q.getRingsOrPathsBounds(U,A),V=L[0],j=L[1],z=L[2],F=L[3],R=r?r[0]:(V+z)/2,J=r?r[1]:(F+j)/2,q=t.clone(),B="polyline"===q.type?q.paths:q.rings,I=0;I<A.length;I++){var Z=A[I];for(_=0;_<Z.length;_++){var K;s=((n=(K=Z[_])[0])-R)*i+R,p=((a=K[1])-J)*e+J;B[I][_]=X(K,s,p,void 0)}}return"paths"in q?q.paths=B:q.rings=B,q},i.getScaleRatio=function(t,i,e,r,n,a){var o=Math.sqrt((e-t)*(e-t)+(r-i)*(r-i));return Math.sqrt((n-t)*(n-t)+(a-i)*(a-i))/o},i.getRotationAngle=function(t,i,e,r,n,a){var o=180*Math.atan2(i-r,t-e)/Math.PI;return 180*Math.atan2(i-a,t-n)/Math.PI-o}}.apply(null,r))||(t.exports=n)},1746:function(t,i,e){var r,n;r=[e.dj.c(t.i),i,e(1),e(0),e(49),e(54),e(23),e(8),e(15),e(16),e(2),e(1667),e(1747),e(156)],void 0===(n=function(t,i,e,r,c,n,a,l,v,o,h,u,d,s){return y=h.declared(n.EventedAccessor),e(p,y),p.prototype.initialize=function(){var i=this;this._handles.add([o.whenOnce(this,"view.ready",function(){i._viewHandles.add([i.view.on("immediate-click",function(t){return i._clickHandler(t)},s.ViewEventPriorities.TOOL),i.view.on("double-click",function(t){return i._doubleClickHandler(t)},s.ViewEventPriorities.TOOL),i.view.on("pointer-down",function(t){return i._pointerDownHandler(t)},s.ViewEventPriorities.TOOL),i.view.on("pointer-move",function(t){return i._pointerMoveHandler(t)},s.ViewEventPriorities.TOOL),i.view.on("pointer-up",function(t){return i._pointerUpHandler(t)},s.ViewEventPriorities.TOOL),i.view.on("drag",function(t){return i._dragHandler(t)},s.ViewEventPriorities.TOOL),i.view.on("key-down",function(t){return i._keyDownHandler(t)},s.ViewEventPriorities.TOOL)])})])},p.prototype.destroy=function(){this.reset(),this._viewHandles.removeAll(),this._handles.removeAll()},Object.defineProperty(p.prototype,"state",{get:function(){var t=!!this.get("view.ready"),i=!!this.get("graphics.length"),e=this._activeGraphic;return t&&i?e?"moving":"active":t?"ready":"disabled"},enumerable:!0,configurable:!0}),p.prototype.reset=function(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null},p.prototype.updateGeometry=function(t,i){var e=this.graphics[t];e&&e.set("geometry",i)},p.prototype._clickHandler=function(n){var a=this;this.view.hitTest(v.createScreenPointFromEvent(n)).then(function(t){var i=t.results;if(i.length&&i[0].graphic){var e=i[0].graphic;if(-1<a.graphics.indexOf(e)){var r=new d.GraphicClickEvent(e,a.graphics.indexOf(e),n.x,n.y,n);a.emit("graphic-click",r),a.callbacks.onGraphicClick&&a.callbacks.onGraphicClick(r)}}})},p.prototype._doubleClickHandler=function(n){var a=this;this.view.hitTest(v.createScreenPointFromEvent(n)).then(function(t){var i=t.results;if(i.length&&i[0].graphic){var e=i[0].graphic;if(-1<a.graphics.indexOf(e)){var r=new d.GraphicDoubleClickEvent(e,a.graphics.indexOf(e),n.x,n.y,n);a.emit("graphic-double-click",r),a.callbacks.onGraphicDoubleClick&&a.callbacks.onGraphicDoubleClick(r)}}})},p.prototype._pointerDownHandler=function(o){var h=this;this._pointerDownEvent=o,this.view.hitTest(v.createScreenPointFromEvent(o)).then(function(t){var i=c.find(t.results,function(t){return-1!==h.graphics.indexOf(t.graphic)});if(i){var e=i.graphic;if(-1<h.graphics.indexOf(e)){h._activeGraphic=e;var r=o.x,n=o.y,a=new d.GraphicPointerDownEvent(e,h.graphics.indexOf(e),r,n,o);h.emit("graphic-pointer-down",a),h.callbacks.onGraphicPointerDown&&h.callbacks.onGraphicPointerDown(a)}else e!==h._activeGraphic&&(h._pointerDownEvent=null,h._activeGraphic=null)}else h._pointerDownEvent=null,h._activeGraphic=null})},p.prototype._pointerUpHandler=function(t){if(this._pointerDownEvent=null,this._activeGraphic){var i=t.x,e=t.y,r=this.graphics.indexOf(this._activeGraphic),n=new d.GraphicPointerUpEvent(this._activeGraphic,r,i,e,t);this._activeGraphic=null,this.emit("graphic-pointer-up",n),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(n)}},p.prototype._pointerMoveHandler=function(s){var p=this;this._dragEvent||this.view.hitTest(v.createScreenPointFromEvent(s)).then(function(t){var i=t.results;if(i.length&&i[0].graphic){var e=i[0].graphic;if(e===p._hoverGraphic)return;if(-1<p.graphics.indexOf(e)){var r=s.x,n=s.y;if(p._hoverGraphic){var a=p.graphics.indexOf(p._hoverGraphic),o=new d.GraphicPointerOutEvent(p.graphics[a],a,r,n,s);p._hoverGraphic=null,p.emit("graphic-pointer-out",o),p.callbacks.onGraphicPointerOut&&p.callbacks.onGraphicPointerOut(o)}var h=p.graphics.indexOf(e),c=new d.GraphicPointerOverEvent(e,h,r,n,s);return p._hoverGraphic=e,p.emit("graphic-pointer-over",c),void(p.callbacks.onGraphicPointerOver&&p.callbacks.onGraphicPointerOver(c))}}p._hoverGraphic&&(r=s.x,n=s.y,a=p.graphics.indexOf(p._hoverGraphic),c=new d.GraphicPointerOutEvent(p.graphics[a],a,r,n,s),p._hoverGraphic=null,p.emit("graphic-pointer-out",c),p.callbacks.onGraphicPointerOut&&p.callbacks.onGraphicPointerOut(c))})},p.prototype._dragHandler=function(t){var i=this;if(this._pointerDownEvent){if("start"!==t.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;t.stopPropagation();var e=t.x,r=t.y,n=this.graphics.indexOf(this._activeGraphic),a=this._activeGraphic.geometry,o=this._dragEvent?e-this._dragEvent.x:0,h=this._dragEvent?r-this._dragEvent.y:0,c=e-t.origin.x,s=r-t.origin.y;if(this._activeGraphic.geometry=u.cloneMove(a,o,h,this.view),this.enableMoveAllGraphics&&this.graphics.forEach(function(t){t!==i._activeGraphic&&(t.geometry=u.cloneMove(t.geometry,o,h,i.view))}),"start"===(this._dragEvent=t).action){this._initialDragGeometry=l.clone(a);var p=new d.GraphicMoveStartEvent(this._activeGraphic,this.graphics,n,e,r,o,h,c,s,t);this.emit("graphic-move-start",p),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(p),p.defaultPrevented&&this._activeGraphic.set("geometry",a)}else"update"===t.action?(p=new d.GraphicMoveEvent(this._activeGraphic,this.graphics,n,e,r,o,h,c,s,t),this.emit("graphic-move",p),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(p),p.defaultPrevented&&this._activeGraphic.set("geometry",a)):(this._dragEvent=null,p=new d.GraphicMoveStopEvent(this._activeGraphic,this.graphics,n,e,r,o,h,c,s,t),this.emit("graphic-move-stop",p),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(p),p.defaultPrevented&&this.graphics[n].set("geometry",this._initialDragGeometry),this._initialDragGeometry=null)}},p.prototype._keyDownHandler=function(t){"a"!==t.key&&"d"!==t.key&&"n"!==t.key||"moving"!==this.state||t.stopPropagation()},r([h.property()],p.prototype,"_activeGraphic",void 0),r([h.property({readOnly:!0})],p.prototype,"type",void 0),r([h.property()],p.prototype,"callbacks",void 0),r([h.property()],p.prototype,"enableMoveAllGraphics",void 0),r([h.property()],p.prototype,"graphics",void 0),r([h.property({dependsOn:["view.ready","graphics.length","_activeGraphic"],readOnly:!0})],p.prototype,"state",null),r([h.property()],p.prototype,"view",void 0),r([h.subclass("esri.views.draw.support.GraphicMover")],p);function p(t){var i=y.call(this,t)||this;return i._activeGraphic=null,i._dragEvent=null,i._handles=new a,i._hoverGraphic=null,i._initialDragGeometry=null,i._pointerDownEvent=null,i._viewHandles=new a,i.type="graphic-mover",i.callbacks={onGraphicClick:function(){},onGraphicDoubleClick:function(){},onGraphicMoveStart:function(){},onGraphicMove:function(){},onGraphicMoveStop:function(){},onGraphicPointerOver:function(){},onGraphicPointerOut:function(){},onGraphicPointerDown:function(){},onGraphicPointerUp:function(){}},i.enableMoveAllGraphics=!1,i.graphics=[],i.view=null,i}var y}.apply(null,r))||(t.exports=n)},1747:function(t,i,e){var r,n;r=[e.dj.c(t.i),i],void 0===(n=function(t,i){Object.defineProperty(i,"__esModule",{value:!0});function e(t,i,e,r,n){this.graphic=t,this.index=i,this.x=e,this.y=r,this.viewEvent=n,this.type="graphic-click"}i.GraphicClickEvent=e;function r(t,i,e,r,n){this.graphic=t,this.index=i,this.x=e,this.y=r,this.viewEvent=n,this.type="graphic-double-click"}i.GraphicDoubleClickEvent=r;var n=(a.prototype.preventDefault=function(){this.defaultPrevented=!0},a);function a(t,i,e,r,n,a,o,h,c,s){this.graphic=t,this.allGraphics=i,this.index=e,this.x=r,this.y=n,this.dx=a,this.dy=o,this.totalDx=h,this.totalDy=c,this.viewEvent=s,this.defaultPrevented=!1,this.type="graphic-move-start"}i.GraphicMoveStartEvent=n;var o=(h.prototype.preventDefault=function(){this.defaultPrevented=!0},h);function h(t,i,e,r,n,a,o,h,c,s){this.graphic=t,this.allGraphics=i,this.index=e,this.x=r,this.y=n,this.dx=a,this.dy=o,this.totalDx=h,this.totalDy=c,this.viewEvent=s,this.defaultPrevented=!1,this.type="graphic-move"}i.GraphicMoveEvent=o;var c=(s.prototype.preventDefault=function(){this.defaultPrevented=!0},s);function s(t,i,e,r,n,a,o,h,c,s){this.graphic=t,this.allGraphics=i,this.index=e,this.x=r,this.y=n,this.dx=a,this.dy=o,this.totalDx=h,this.totalDy=c,this.viewEvent=s,this.defaultPrevented=!1,this.type="graphic-move-stop"}i.GraphicMoveStopEvent=c;function p(t,i,e,r,n){this.graphic=t,this.index=i,this.x=e,this.y=r,this.viewEvent=n,this.type="graphic-pointer-over"}i.GraphicPointerOverEvent=p;function l(t,i,e,r,n){this.graphic=t,this.index=i,this.x=e,this.y=r,this.viewEvent=n,this.type="graphic-pointer-out"}i.GraphicPointerOutEvent=l;function v(t,i,e,r,n){this.graphic=t,this.index=i,this.x=e,this.y=r,this.viewEvent=n,this.type="graphic-pointer-down"}i.GraphicPointerDownEvent=v;function u(t,i,e,r,n){this.graphic=t,this.index=i,this.x=e,this.y=r,this.viewEvent=n,this.type="graphic-pointer-up"}i.GraphicPointerUpEvent=u}.apply(null,r))||(t.exports=n)}}]);