(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/RouteTask":1594,"esri/tasks/support/GPMessage":1672,"esri/core/queryUtils":1709,"esri/tasks/mixins/NAServiceDescription":1710,"esri/tasks/support/NAMessage":1711,"esri/tasks/support/DirectionsFeatureSet":1790,"esri/tasks/support/RouteResultsContainer":2193,"esri/tasks/support/RouteResult":2194})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1594:function(e,r,t){var s,o;s=[t.dj.c(e.i),r,t(0),t(1),t(5),t(29),t(4),t(1709),t(64),t(2),t(485),t(303),t(1710),t(2193)],void 0===(o=function(e,r,t,s,l,c,o,n,d,i,f,a,u,j){var p,v=n.createQueryParamsHelper({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},stops:!0,travelMode:!0});return p=i.declared(u.NAServiceDescriptionMixin(a)),s(y,p),y.prototype.solve=function(n,i){var a=this,u=[],e=[],s={},p={};return n.stops&&n.stops.features&&this._collectGeometries(n.stops.features,e,"stops.features",s),n.pointBarriers&&n.pointBarriers.features&&this._collectGeometries(n.pointBarriers.features,e,"pointBarriers.features",s),n.polylineBarriers&&n.polylineBarriers.features&&this._collectGeometries(n.polylineBarriers.features,e,"polylineBarriers.features",s),n.polygonBarriers&&n.polygonBarriers.features&&this._collectGeometries(n.polygonBarriers.features,e,"polygonBarriers.features",s),f.normalizeCentralMeridian(e).then(function(e){for(var r in s){var t=s[r];u.push(r),p[r]=e.slice(t[0],t[1])}return a._isInputGeometryZAware(p,u)?a.getServiceDescription():o.resolve({dontCheck:!0})}).then(function(e){for(var r in("dontCheck"in e?e.dontCheck:e.hasZ)||a._dropZValuesOffInputGeometry(p,u),p)!function(t){p[t].forEach(function(e,r){n.get(t)[r].geometry=e})}(r);var t={query:l({},a.parsedUrl.query,{f:"json"},v.toQueryParams(n))};(a.requestOptions||i)&&(t=l({},a.requestOptions,i,t));var s=a.parsedUrl.path,o=d.endsWith(s,"/solve")?s:s+"/solve";return c(o,t)}).then(function(e){return a._handleSolveResponse(e)})},y.prototype._collectGeometries=function(e,r,t,s){s[t]=[r.length,r.length+e.length],e.forEach(function(e){r.push(e.geometry)})},y.prototype._handleSolveResponse=function(e){var r,t,s=[],o=[],n=e.data,i=n.directions,a=void 0===i?[]:i,u=n.routes,p=void 0===u?{}:u,l=p.features,c=void 0===l?[]:l,d=p.spatialReference,f=void 0===d?null:d,v=n.stops,y=void 0===v?{}:v,m=y.features,h=void 0===m?[]:m,g=y.spatialReference,T=void 0===g?null:g,b=n.barriers,M=n.polygonBarriers,w=n.polylineBarriers,S=n.messages,B="esri.tasks.RouteTask.NULL_ROUTE_NAME",N=!0,R=c&&f||h&&T||b&&b.spatialReference||M&&M.spatialReference||w&&w.spatialReference;a.forEach(function(e){s.push(r=e.routeName),o[r]={directions:e}}),c.forEach(function(e){-1===s.indexOf(r=e.attributes.Name)&&(s.push(r),o[r]={}),e.geometry&&(e.geometry.spatialReference=R),o[r].route=e}),h.forEach(function(e){t=e.attributes,-1===s.indexOf(r=t.RouteName||B)&&(s.push(r),o[r]={}),r!==B&&(N=!1),e.geometry&&(e.geometry.spatialReference=R),null==o[r].stops&&(o[r].stops=[]),o[r].stops.push(e)}),0<h.length&&!0===N&&(o[s[0]].stops=o[B].stops,delete o[B],s.splice(s.indexOf(B),1));var k=s.map(function(e){return o[e].routeName=e===B?null:e,o[e]});return j.fromJSON({routeResults:k,pointBarriers:b,polygonBarriers:M,polylineBarriers:w,messages:S})},t([i.subclass("esri.tasks.RouteTask")],y);function y(e){return p.call(this,e)||this}}.apply(null,s))||(e.exports=o)},1672:function(e,r,t){var s,o;s=[t.dj.c(e.i),r,t(1),t(0),t(17),t(7),t(2)],void 0===(o=function(e,r,t,s,o,n,i){var a,u=new o.default({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});return a=i.declared(n.JSONSupport),t(p,a),s([i.property({type:String,json:{write:!0}})],p.prototype,"description",void 0),s([i.property({type:String,json:{read:u.read,write:u.write}})],p.prototype,"type",void 0),s([i.subclass("esri.tasks.support.GPMessage")],p);function p(e){var r=a.call(this,e)||this;return r.description=null,r.type=null,r}}.apply(null,s))||(e.exports=o)},1709:function(e,r,t){var s,o;s=[t.dj.c(e.i),r],void 0===(o=function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t=(s.prototype.toQueryParams=function(e){var o=this;if(!e)return null;var n=e.toJSON(),i={};return Object.keys(n).forEach(function(e){var r=o._options[e];if(r){var t="boolean"!=typeof r&&r.name?r.name:e,s="boolean"!=typeof r&&r.getter?r.getter(n):n[e];null!=s&&(i[t]=function(e){if(!Array.isArray(e))return 0;var r=e[0];return"number"==typeof r||"string"==typeof r}(s)?s.join(","):"object"==typeof s?JSON.stringify(s):s)}else i[e]=n[e]},this),i},s);function s(e){void 0===e&&(e={}),this._options=e}r.createQueryParamsHelper=function(e){return new t(e)}}.apply(null,s))||(e.exports=o)},1710:function(e,r,t){var s,o;s=[t.dj.c(e.i),r,t(0),t(1),t(9),t(10),t(29),t(6),t(12),t(60),t(22),t(2),t(303)],void 0===(o=function(e,r,s,o,g,a,T,u,p,b,M,n,t){Object.defineProperty(r,"__esModule",{value:!0}),r.NAServiceDescriptionMixin=function(e){return t=n.declared(e),o(r,t),r.prototype.getServiceDescription=function(){return a(this,void 0,void 0,function(){return g(this,function(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription()),[2,this._serviceDescriptionPromise]})})},r.prototype._fetchServiceDescription=function(){return a(this,void 0,void 0,function(){var r,t,s,o,n,i;return g(this,function(e){switch(e.label){case 0:if(!this.url||!this.parsedUrl)throw new u("network-service:missing-url","Url to Network service is missing");return r=this.url,[4,T(r,{query:{f:"json"}})];case 1:for((t=e.sent().data).supportedTravelModes||(t.supportedTravelModes=[]),s=0;s<t.supportedTravelModes.length;s++)t.supportedTravelModes[s].id||(t.supportedTravelModes[s].id=t.supportedTravelModes[s].itemId);return[4,(10.4<=t.currentVersion?function(n){return a(this,void 0,void 0,function(){var r,t,s,o;return g(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,T(n+("/"===n[n.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}})];case 1:return r=e.sent().data,t=r.supportedTravelModes,s=r.defaultTravelMode,[2,{supportedTravelModes:t,defaultTravelMode:s}];case 2:throw o=e.sent(),new u("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:o});case 3:return[2]}})})}:function(h){return a(this,void 0,void 0,function(){var r,t,s,o,n,i,a,u,p,l,c,d,f,v,y,m;return g(this,function(e){switch(e.label){case 0:return[4,T(h.substring(0,h.indexOf("/rest/")+6)+"info",{query:{f:"json"}})];case 1:return(r=e.sent().data)&&r.owningSystemUrl?(h=r.owningSystemUrl,[4,T(h+("/"===h[h.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}})]):[2,{supportedTravelModes:[],defaultTravelMode:null}];case 2:return t=e.sent().data,(s=b.getDeepValue("helperServices.routingUtilities.url",t))?(o=M.urlToObject(h),n=/\/solveClosestFacility$/.test(o.path)?"Route":/\/solveClosestFacility$/.test(o.path)?"ClosestFacility":"ServiceAreas",[4,T(s+("/"===s[s.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:n}})]):[2,{supportedTravelModes:[],defaultTravelMode:null}];case 3:if(i=e.sent(),a=[],u=null,i&&i.data&&i.data.results&&i.data.results.length)for(p=i.data.results,l=0,c=p;l<c.length;l++)if("supportedTravelModes"===(d=c[l]).paramName){if(d.value&&d.value.features)for(f=0,v=d.value.features;f<v.length;f++)(y=v[f].attributes)&&(m=JSON.parse(y.TravelMode),a.push(m))}else"defaultTravelMode"===d.paramName&&(u=d.value);return[2,{supportedTravelModes:a,defaultTravelMode:u}]}})})})(r)];case 2:return o=e.sent(),n=o.defaultTravelMode,i=o.supportedTravelModes,t.defaultTravelMode=n,t.supportedTravelModes=i,[2,t]}})})},r.prototype._isInputGeometryZAware=function(e,r){for(var t=0;t<r.length;t++){var s=e[r[t]];if(s&&s.length)for(var o=0,n=s;o<n.length;o++){var i=n[o];if(p.isSome(i)&&i.hasZ)return!0}}return!1},r.prototype._dropZValuesOffInputGeometry=function(e,r){for(var t=0;t<r.length;t++){var s=e[r[t]];if(s&&s.length)for(var o=0,n=s;o<n.length;o++)n[o].z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")},s([n.subclass("esri.tasks.mixins.NAServiceDescription")],r);function r(){return null!==t&&t.apply(this,arguments)||this}var t};var i,l=(i=n.declared(r.NAServiceDescriptionMixin(t)),o(c,i),s([n.subclass("esri.tasks.mixins.NAServiceDescription")],c));function c(){return null!==i&&i.apply(this,arguments)||this}r.NAServiceDescription=l}.apply(null,s))||(e.exports=o)},1711:function(e,r,t){var s,o;s=[t.dj.c(e.i),r,t(1),t(0),t(17),t(2),t(1672)],void 0===(o=function(e,r,t,s,o,n,i){var a,u=new o.default({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});return a=n.declared(i),t(p,a),s([n.property({type:String,json:{read:u.read,write:u.write}})],p.prototype,"type",void 0),s([n.subclass("esri.tasks.support.NAMessage")],p);function p(e){var r=a.call(this,e)||this;return r.type=null,r}}.apply(null,s))||(e.exports=o)},1790:function(e,r,t){var s,o;s=[t(37),t(43),t(153),t(31),t(207),t(89)],void 0===(o=function(e,o,n,t,r,i){return r.createSubclass({declaredClass:"esri.tasks.support.DirectionsFeatureSet",properties:{geometryType:"polyline",extent:{type:e,json:{read:{source:"summary.envelope"}}},features:{value:null,json:{read:function(e,r){(e||[]).forEach(function(e){this._decompressFeatureGeometry(e,r.summary.envelope.spatialReference)},this);var s=t.fromJSON(r.spatialReference);return e.map(function(t){var e=i.fromJSON(t),r=t.geometry&&t.geometry.spatialReference;return e.geometry&&!r&&(e.geometry.spatialReference=s),e.strings=t.strings,e.events=(t.events||[]).map(function(e){var r=new i({geometry:new o({x:e.point.x,y:e.point.y,z:e.point.z,hasZ:void 0!==e.point.z,spatialReference:t.geometry&&t.geometry.spatialReference}),attributes:{ETA:e.ETA,arriveTimeUTC:e.arriveTimeUTC}});return r.strings=e.strings,r}),e})}}},mergedGeometry:{value:null,readOnly:!0,dependsOn:["features","extent.spatialReference"],get:function(){if(!this.features)return null;var e=this.features.map(function(e){return e.geometry}),r=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,r)}},routeId:null,routeName:null,strings:{value:null,readOnly:!0,dependsOn:["features"],get:function(){return this.features.map(function(e){return e.strings})}},totalDriveTime:{value:null,json:{read:{source:"summary.totalDriveTime"}}},totalLength:{value:null,json:{read:{source:"summary.totalLength"}}},totalTime:{value:null,json:{read:{source:"summary.totalTime"}}}},_decompressFeatureGeometry:function(e,r){e.geometry=this._decompressGeometry(e.compressedGeometry,r)},_decompressGeometry:function(e,r){var t,s,o,n,i,a,u,p,l=0,c=0,d=0,f=0,v=[],y=0,m=0,h=0;if(i=(i=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||[],0===parseInt(i[y],32)){y=2;var g=parseInt(i[y],32);y++,a=parseInt(i[y],32),y++,1&g&&(m=i.indexOf("|")+1,u=parseInt(i[m],32),m++),2&g&&(h=i.indexOf("|",m)+1,p=parseInt(i[h],32),h++)}else a=parseInt(i[y],32),y++;for(;y<i.length&&"|"!==i[y];){t=parseInt(i[y],32)+l,y++,l=t,s=parseInt(i[y],32)+c,y++;var T=[t/a,(c=s)/a];m&&(n=parseInt(i[m],32)+d,m++,d=n,T.push(n/u)),h&&(o=parseInt(i[h],32)+f,h++,f=o,T.push(o/p)),v.push(T)}return{paths:[v],hasZ:0<m,hasM:0<h,spatialReference:r}},_mergePolylinesToSinglePath:function(e,r){var t=[];(e||[]).forEach(function(e){e.paths.forEach(function(e){t=t.concat(e)})});var s=[],o=[0,0];return t.forEach(function(e){e[0]===o[0]&&e[1]===o[1]||(s.push(e),o=e)}),new n({paths:[s]},r)}})}.apply(null,s))||(e.exports=o)},2193:function(e,r,t){var s,o;s=[t.dj.c(e.i),r,t(1),t(0),t(89),t(7),t(2),t(520),t(207),t(1711),t(2194)],void 0===(o=function(e,r,t,s,o,n,i,a,u,p,l){function c(e){return e&&u.fromJSON(e).features.map(function(e){return e})}return f=i.declared(n.JSONSupport),t(d,f),d.prototype.readPointBarriers=function(e,r){return c(r.barriers||r.pointBarriers)},d.prototype.readPolylineBarriers=function(e){return c(e)},d.prototype.readPolygonBarriers=function(e){return c(e)},s([i.property({aliasOf:"pointBarriers"})],d.prototype,"barriers",void 0),s([i.property({type:[p]})],d.prototype,"messages",void 0),s([i.property({type:[o]})],d.prototype,"pointBarriers",void 0),s([a.reader("pointBarriers",["barriers","pointBarriers"])],d.prototype,"readPointBarriers",null),s([i.property({type:[o]})],d.prototype,"polylineBarriers",void 0),s([a.reader("polylineBarriers")],d.prototype,"readPolylineBarriers",null),s([i.property({type:[o]})],d.prototype,"polygonBarriers",void 0),s([a.reader("polygonBarriers")],d.prototype,"readPolygonBarriers",null),s([i.property({type:[l]})],d.prototype,"routeResults",void 0),s([i.subclass("esri.tasks.support.RouteResultsContainer")],d);function d(e){var r=f.call(this,e)||this;return r.barriers=null,r.messages=null,r.pointBarriers=null,r.polylineBarriers=null,r.polygonBarriers=null,r.routeResults=null,r}var f}.apply(null,s))||(e.exports=o)},2194:function(e,r,t){var s,o;s=[t.dj.c(e.i),r,t(0),t(1),t(89),t(7),t(2),t(1790)],void 0===(o=function(e,r,t,s,o,n,i,a){return p=i.declared(n.JSONSupport),s(u,p),t([i.property({type:a,json:{write:!0}})],u.prototype,"directions",void 0),t([i.property({type:o,json:{write:!0}})],u.prototype,"route",void 0),t([i.property({type:String,json:{write:!0}})],u.prototype,"routeName",void 0),t([i.property({type:[o],json:{write:!0}})],u.prototype,"stops",void 0),t([i.subclass("esri.tasks.support.RouteResult")],u);function u(e){var r=p.call(this,e)||this;return r.directions=null,r.route=null,r.routeName=null,r.stops=null,r}var p}.apply(null,s))||(e.exports=o)}}]);