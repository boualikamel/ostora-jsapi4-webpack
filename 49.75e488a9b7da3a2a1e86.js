(function(){(this||window).webpackJsonp.registerAbsMids({"esri/core/libs/gl-matrix-2/mat4f64":1633,"esri/core/libs/gl-matrix-2/mat3f64":1654,"esri/core/libs/gl-matrix-2/factories/mat3f64":1659,"esri/core/libs/gl-matrix-2/factories/mat4f64":1714,"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":1796,"esri/views/3d/layers/support/FastSymbolUpdates":1797,"esri/views/3d/support/debugFlags":1798,"esri/views/2d/engine/FeatureContainer":1800,"esri/views/2d/layers/features/tileRenderers/BaseTileRenderer":1870,"esri/views/2d/layers/features/tileRenderers/SymbolTileRenderer":2798,"esri/views/2d/layers/features/tileRenderers/support/WGLFeatureView":2799})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1633:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(1714)],void 0===(o=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4f64=i}.apply(null,r))||(e.exports=o)},1654:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(1659)],void 0===(o=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.mat3f64=i}.apply(null,r))||(e.exports=o)},1659:function(e,t,i){var r,o;r=[i.dj.c(e.i),t],void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){return[1,0,0,0,1,0,0,0,1]},t.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},t.fromValues=function(e,t,i,r,o,n,a,s,l){return[e,t,i,r,o,n,a,s,l]},t.createView=function(e,t){return new Float64Array(e,t,9)}}.apply(null,r))||(e.exports=o)},1714:function(e,t,i){var r,o;r=[i.dj.c(e.i),t],void 0===(o=function(e,t){function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Object.defineProperty(t,"__esModule",{value:!0}),t.create=i,t.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},t.fromValues=function(e,t,i,r,o,n,a,s,l,u,p,f,c,d,v,y){return[e,t,i,r,o,n,a,s,l,u,p,f,c,d,v,y]},t.createView=function(e,t){return new Float64Array(e,t,16)},t.IDENTITY=i()}.apply(null,r))||(e.exports=o)},1796:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(5),i(15),i(90),i(26),i(1797)],void 0===(o=function(e,t,d,s,v,l,y){function i(e){return{value:e.value,size:s.toPt(e.size)}}function S(e){return e.map(function(e){return i(e)})}function E(e){if("string"==typeof e||"number"==typeof e)return s.toPt(e);return{type:"size",expression:e.expression,stops:S(e.stops)}}function h(e){var t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(v.Utils.isString(e.field)){if(!e.stops)return null;if(8<e.stops.length)return null;for(var i=e.stops,r=0;r<8;++r){var o=i[Math.min(r,i.length-1)];t.values[r]=o.value,t.opacities[r]=o.opacity}}else{if(!(e.stops&&0<=e.stops.length))return null;var n=e.stops&&0<=e.stops.length&&e.stops[0].opacity;for(r=0;r<8;r++)t.values[r]=1/0,t.opacities[r]=n}return t}Object.defineProperty(t,"__esModule",{value:!0});var _=v.enums.WGLVVFlag;t.getVisualVariableSizeValueRepresentationRatio=function(e,t){if(!e||!t)return e;switch(t){case"radius":case"distance":return 2*e;case"diameter":case"width":return e;case"area":return Math.sqrt(e)}return e},t.stopToSizeStop=i,t.normalizeSizeStops=S,t.normalizeSizeElement=E,t.getVisualVariablesFields=function(e){var i=e&&0<e.length?{}:null;return i&&e.forEach(function(e){var t=e.type;e.field&&(i[t]=e.field)}),i};function T(e){for(var t=[],i=[],r=S(e),o=r.length,n=0;n<6;n++){var a=r[Math.min(n,o-1)];t.push(a.value),i.push(null==a.size?l.NAN_MAGIC_NUMBER:s.pt2px(a.size))}return{values:new Float32Array(t),sizes:new Float32Array(i)}}t.convertVisualVariables=function(e){var t=e&&0<e.length?{}:null,i=t?{}:null;if(!t)return{vvFields:t,vvRanges:i};for(var r=0,o=e;r<o.length;r++){var n=o[r],a=n.type;if(n.field&&(t[a]=n.field),"size"===a){i.size||(i.size={});var s=n;switch(v.getTypeOfSizeVisualVariable(s)){case _.SIZE_MINMAX_VALUE:i.size.minMaxValue={minDataValue:s.minDataValue,maxDataValue:s.maxDataValue,minSize:E(s.minSize),maxSize:E(s.maxSize)};break;case _.SIZE_SCALE_STOPS:i.size.scaleStops={stops:S(s.stops)};break;case _.SIZE_FIELD_STOPS:if(s.levels){var l={};for(var u in s.levels)l[u]=T(s.levels[u]);i.size.fieldStops={type:"level-dependent",levels:l}}else i.size.fieldStops=d({type:"static"},T(s.stops));break;case _.SIZE_UNIT_VALUE:i.size.unitValue={unit:s.valueUnit,valueRepresentation:s.valueRepresentation}}}else if("color"===a){var p=y.convertVisualVariables([n],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null});i.color=p.color;for(var f=0;f<32;f+=4)v.color.premultiplyAlpha(i.color.colors,f,!0)}else if("opacity"===a)i.opacity=h(n);else if("rotation"===a){var c=n;i.rotation={type:c.rotationType}}}return{vvFields:t,vvRanges:i}}}.apply(null,r))||(e.exports=o)},1797:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(34),i(33),i(214),i(1654),i(484),i(1633),i(118),i(150),i(218),i(1798)],void 0===(o=function(e,t,l,a,o,n,s,u,p,i,f,r){function c(e){return null!=e}function d(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e,t){e&&e.push(t),E(t)}function S(e){g&&console.warn("[FastSymbolUpdates] "+e)}function E(e){g&&console.info("[FastSymbolUpdates] "+e)}function h(e,t,i,r,o){var n=e.minSize,a=e.maxSize;if(e.expression)return y(o,"Could not convert size info: expression not supported"),!1;if(e.useSymbolValue){var s=r.symbolSize[i];return t.minSize[i]=s,t.maxSize[i]=s,t.offset[i]=t.minSize[i],t.factor[i]=0,t.type[i]=1,!0}if(c(e.field))return c(e.stops)?2===e.stops.length&&d(e.stops[0].size)&&d(e.stops[1].size)?(_(e.stops[0].size,e.stops[1].size,e.stops[0].value,e.stops[1].value,t,i),t.type[i]=1,!0):(y(o,"Could not convert size info: stops only supported with 2 elements"),!1):d(n)&&d(a)&&c(e.minDataValue)&&c(e.maxDataValue)?(_(n,a,e.minDataValue,e.maxDataValue,t,i),t.type[i]=1,!0):null!=f.meterIn[e.valueUnit]?(t.minSize[i]=-1/0,t.maxSize[i]=1/0,t.offset[i]=0,t.factor[i]=1/f.meterIn[e.valueUnit],t.type[i]=1,!0):("unknown"===e.valueUnit?y(o,"Could not convert size info: proportional size not supported"):y(o,"Could not convert size info: scale-dependent size not supported"),!1);if(!c(e.field)){if(e.stops&&e.stops[0]&&d(e.stops[0].size))return t.minSize[i]=e.stops[0].size,t.maxSize[i]=e.stops[0].size,t.offset[i]=t.minSize[i],t.factor[i]=0,t.type[i]=1,!0;if(d(n))return t.minSize[i]=n,t.maxSize[i]=n,t.offset[i]=n,t.factor[i]=0,t.type[i]=1,!0}return y(o,"Could not convert size info: unsupported variant of sizeInfo"),!1}function _(e,t,i,r,o,n){var a=0<Math.abs(r-i)?(t-e)/(r-i):0;o.minSize[n]=0<a?e:t,o.maxSize[n]=0<a?t:e,o.offset[n]=e-i*a,o.factor[n]=a}function T(e,t,i,r){if(e.normalizationField||e.valueRepresentation)return y(r,"Could not convert size info: unsupported property"),null;if(null!=(o=e.field)&&!v(o))return y(r,"Could not convert size info: field is not a string"),null;var o,n;if(t.size){if(e.field)if(t.size.field){if(e.field!==t.size.field)return y(r,"Could not convert size info: multiple fields in use"),null}else t.size.field=e.field}else t.size={field:e.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};switch(e.axis){case"width":return(n=h(e,t.size,0,i,r))?t:null;case"height":return(n=h(e,t.size,2,i,r))?t:null;case"depth":return(n=h(e,t.size,1,i,r))?t:null;case"width-and-depth":return(n=h(e,t.size,0,i,r))&&h(e,t.size,1,i,r),n?t:null;case null:case void 0:case"all":return(n=(n=(n=h(e,t.size,0,i,r))&&h(e,t.size,1,i,r))&&h(e,t.size,2,i,r))?t:null;default:return y(r,'Could not convert size info: unknown axis "'+e.axis+'""'),null}}function m(e,t,i){e[4*t+0]=i.r/255,e[4*t+1]=i.g/255,e[4*t+2]=i.b/255,e[4*t+3]=i.a}function b(e,t,i){var r=2===i&&"arithmetic"===e.rotationType;t.offset[i]=r?90:0,t.factor[i]=r?-1:1,t.type[i]=1}function I(e,i,r){if(!e)return null;var o=!i.supportedTypes||!!i.supportedTypes.size,n=!i.supportedTypes||!!i.supportedTypes.color,a=!i.supportedTypes||!!i.supportedTypes.rotation,s=!!i.supportedTypes&&!!i.supportedTypes.opacity;g&&(r=r||[]);var t=e.reduce(function(e,t){if(!e)return e;if(t.valueExpression)return y(r,"Could not convert visual variables: arcade expressions not supported"),null;switch(t.type){case"size":return o?T(t,e,i,r):e;case"color":return n?function(e,t,i){if(e.normalizationField)return y(i,"Could not convert color info: unsupported property"),null;if(v(e.field)){if(!e.stops)return y(i,"Could not convert color info: missing stops or colors"),null;if(8<e.stops.length)return y(i,"Could not convert color info: too many color stops"),null;t.color={field:e.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};for(var r=e.stops,o=0;o<8;++o){var n=r[Math.min(o,r.length-1)];t.color.values[o]=n.value,m(t.color.colors,o,n.color)}}else{if(!(e.stops&&0<=e.stops.length))return y(i,"Could not convert color info: no field and no colors/stops"),null;var a=e.stops&&0<=e.stops.length&&e.stops[0].color;t.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};for(o=0;o<8;o++)t.color.values[o]=1/0,m(t.color.colors,o,a)}return t}(t,e,r):e;case"opacity":return s?function(e,t,i){if(e.normalizationField)return y(i,"Could not convert opacity info: unsupported property"),null;if(v(e.field)){if(!e.stops)return y(i,"Could not convert opacity info: missing stops or opacities"),null;if(8<e.stops.length)return y(i,"Could not convert opacity info: too many opacity stops"),null;t.opacity={field:e.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};for(var r=e.stops,o=0;o<8;++o){var n=r[Math.min(o,r.length-1)];t.opacity.values[o]=n.value,t.opacity.opacityValues[o]=n.opacity}}else{if(!(e.stops&&0<=e.stops.length))return y(i,"Could not convert opacity info: no field and no opacities/stops"),null;var a=e.stops&&0<=e.stops.length&&e.stops[0].opacity;t.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};for(o=0;o<8;o++)t.opacity.values[o]=1/0,t.opacity.opacityValues[o]=a}return t}(t,e,r):null;case"rotation":return a?function(e,t,i){if(!v(e.field))return y(i,"Could not convert rotation info: field is not a string"),null;if(t.rotation){if(e.field)if(t.rotation.field){if(e.field!==t.rotation.field)return y(i,"Could not convert rotation info: multiple fields in use"),null}else t.rotation.field=e.field}else t.rotation={field:e.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};switch(e.axis){case"tilt":return b(e,t.rotation,0),t;case"roll":return b(e,t.rotation,1),t;case null:case void 0:case"heading":return b(e,t.rotation,2),t;default:return y(i,'Could not convert rotation info: unknown axis "'+e.axis+'""'),null}}(t,e,r):e;default:return l.neverReached(t),null}},{size:null,color:null,opacity:null,rotation:null});return!(0<e.length&&t)||t.size||t.color||t.opacity||t.rotation?t&&t.size&&!function(e,t,i){for(var r=0;r<3;++r){var o=t.unitInMeters;1===e.type[r]&&(o*=t.modelSize[r],e.type[r]=2),e.minSize[r]=e.minSize[r]/o,e.maxSize[r]=e.maxSize[r]/o,e.offset[r]=e.offset[r]/o,e.factor[r]=e.factor[r]/o}var n;if(0!==e.type[0])n=0;else if(0!==e.type[1])n=1;else{if(0===e.type[2])return y(i,"No size axis contains a valid size or scale"),!1;n=2}for(r=0;r<3;++r)0===e.type[r]&&(e.minSize[r]=e.minSize[n],e.maxSize[r]=e.maxSize[n],e.offset[r]=e.offset[n],e.factor[r]=e.factor[n],e.type[r]=e.type[n]);return!0}(t.size,i,r)?null:t:null}function z(e){return e&&null!=e.size}function V(e,t,i){if(!!e!=!!t)return S("State update failed ({$name} enabled/disabled)"),!1;if(e&&e.field!==t.field)return S("State update failed ({$name} field changed)"),!1;if(e&&"rotation"===i)for(var r=e,o=t,n=0;n<3;n++)if(r.type[n]!==o.type[n]||r.offset[n]!==o.offset[n]||r.factor[n]!==o.factor[n])return!1;return!0}function R(e,t){var i={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},r=z(e);return e&&e.size?(i.vvSizeEnabled=!0,i.vvSizeMinSize=e.size.minSize,i.vvSizeMaxSize=e.size.maxSize,i.vvSizeOffset=e.size.offset,i.vvSizeFactor=e.size.factor):e&&r&&(i.vvSizeValue=t.transformation.scale),e&&r&&(i.vvSymbolAnchor=t.transformation.anchor,i.vvSymbolRotationMatrix=n.mat3f64.create(),s.mat4.identity(C),function(e,t,i,r){void 0===r&&(r=u.mat4f64.create());var o=e||0,n=t||0,a=i||0;0!==o&&s.mat4.rotateZ(r,r,-o/180*Math.PI),0!==n&&s.mat4.rotateX(r,r,n/180*Math.PI),0!==a&&s.mat4.rotateY(r,r,a/180*Math.PI)}(t.transformation.rotation[2],t.transformation.rotation[0],t.transformation.rotation[1],C),o.mat3.fromMat4(i.vvSymbolRotationMatrix,C)),e&&e.color&&(i.vvColorEnabled=!0,i.vvColorValues=e.color.values,i.vvColorColors=e.color.colors),e&&e.opacity&&(i.vvOpacityEnabled=!0,i.vvOpacityValues=e.opacity.values,i.vvOpacityOpacities=e.opacity.opacityValues),i}Object.defineProperty(t,"__esModule",{value:!0});var O,L,w,A,g=!1;t.convertVisualVariables=I,t.initFastSymbolUpdatesState=function(e,t){if(0,!e)return S("State not initialized, fast updates disabled (no renderer)"),{enabled:!1};if(r.DISABLE_FAST_UPDATES)return S("State not initialized, fast updates disabled (DISABLE_FAST_SYMBOL_UPDATES set)"),{enabled:!1};var i=I(e.visualVariables,t);return i?(E("State initialized, fast updates enabled"),{enabled:!0,visualVariables:i,materialParameters:R(i,t),requiresShaderTransformation:z(i)}):(S("State not initialized, fast updates disabled (conversion failed)"),{enabled:!1})},t.updateFastSymbolUpdatesState=function(e,t,i){if(!t||!e.enabled)return!1;var r=e.visualVariables,o=I(t.visualVariables,i);return o?!!(V(r.size,o.size,"size")&&V(r.color,o.color,"color")&&V(r.rotation,o.rotation,"rotation")&&V(r.opacity,o.opacity,"opacity"))&&(e.visualVariables=o,e.materialParameters=R(o,i),e.requiresShaderTransformation=z(o),E("State updated"),!0):(S("State update failed (conversion failed)"),!1)},t.getMaterialParams=R,L=O=O||{},w=u.mat4f64.create(),A=i.vec3f64.create(),L.evaluateModelTransform=function(e,t,i){if(!e.vvSizeEnabled)return i;s.mat4.copy(w,i);var r=e.vvSymbolRotationMatrix;s.mat4.set(C,r[0],r[1],r[2],0,r[3],r[4],r[5],0,r[6],r[7],r[8],0,0,0,0,1),s.mat4.multiply(w,w,C);for(var o=0;o<3;++o){var n=e.vvSizeOffset[o]+t[0]*e.vvSizeFactor[o];A[o]=a.clamp(n,e.vvSizeMinSize[o],e.vvSizeMaxSize[o])}return s.mat4.scale(w,w,A),s.mat4.translate(w,w,e.vvSymbolAnchor),w},L.evaluateModelTransformScale=function(e,t,i){if(!t.vvSizeEnabled)return p.vec3.set(e,1,1,1);for(var r=0;r<3;++r){var o=t.vvSizeOffset[r]+i[0]*t.vvSizeFactor[r];e[r]=a.clamp(o,t.vvSizeMinSize[r],t.vvSizeMaxSize[r])}return e};var C=u.mat4f64.create();t.evaluateModelTransform=O.evaluateModelTransform,t.evaluateModelTransformScale=O.evaluateModelTransformScale}.apply(null,r))||(e.exports=o)},1798:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(1),i(0),i(13),i(2)],void 0===(o=function(e,t,i,r,o,n){return s=n.declared(o),i(a,s),r([n.property()],a.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),r([n.property()],a.prototype,"SCENEVIEW_LOCKING_LOG",void 0),r([n.property()],a.prototype,"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED",void 0),r([n.property()],a.prototype,"HIGHLIGHTS_VISUALIZE_BLOCKS",void 0),r([n.property()],a.prototype,"HIGHLIGHTS_PROFILE_TO_CONSOLE",void 0),r([n.property()],a.prototype,"DECONFLICTOR_SHOW_OUTLINES",void 0),r([n.property()],a.prototype,"DECONFLICTOR_SHOW_OUTLINES_INVISIBLE",void 0),r([n.property()],a.prototype,"DECONFLICTOR_SHOW_GRID",void 0),r([n.property()],a.prototype,"LABELS_SHOW_BORDER",void 0),r([n.property()],a.prototype,"OVERLAY_DRAW_TEST_TEXTURE",void 0),r([n.property()],a.prototype,"OVERLAY_SHOW_CENTER",void 0),r([n.property()],a.prototype,"TESTS_DISABLE_UPDATE_THRESHOLDS",void 0),r([n.property()],a.prototype,"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET",void 0),r([n.property()],a.prototype,"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES",void 0),r([n.property()],a.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),r([n.property()],a.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),r([n.property()],a.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),r([n.property()],a.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),r([n.property()],a.prototype,"I3S_TREE_SHOW_TILES",void 0),r([n.property()],a.prototype,"ENABLE_PROFILE_DEPTH_RANGE",void 0),r([n.property()],a.prototype,"DISABLE_FAST_UPDATES",void 0),r([n.property()],a.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),r([n.property()],a.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),r([n.property()],a.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),new(r([n.subclass("esri.views.3d.support.DebugFlags")],a));function a(){var e=null!==s&&s.apply(this,arguments)||this;return e.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,e.SCENEVIEW_LOCKING_LOG=!1,e.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1,e.HIGHLIGHTS_VISUALIZE_BLOCKS=!1,e.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1,e.DECONFLICTOR_SHOW_OUTLINES=!1,e.DECONFLICTOR_SHOW_OUTLINES_INVISIBLE=!1,e.DECONFLICTOR_SHOW_GRID=!1,e.LABELS_SHOW_BORDER=!1,e.OVERLAY_DRAW_TEST_TEXTURE=!1,e.OVERLAY_SHOW_CENTER=!1,e.TESTS_DISABLE_UPDATE_THRESHOLDS=!1,e.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=!1,e.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1,e.DRAW_MESH_GEOMETRY_NORMALS=!1,e.FEATURE_TILE_FETCH_SHOW_TILES=!1,e.FEATURE_TILE_TREE_SHOW_TILES=!1,e.TERRAIN_TILE_TREE_SHOW_TILES=!1,e.I3S_TREE_SHOW_TILES=!1,e.ENABLE_PROFILE_DEPTH_RANGE=!1,e.DISABLE_FAST_UPDATES=!1,e.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,e.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,e.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,e}var s}.apply(null,r))||(e.exports=o)},1800:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(9),i(10),i(11),i(5),i(4),i(4),i(80),i(90)],void 0===(o=function(e,t,n,i,r,o,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0});var p,f=(p=u.TileContainer,r(c,p),c.prototype.destroy=function(){this.removeAllChildren(),this.children.forEach(function(e){return e.destroy()}),this.attributeView.destroy()},c.prototype.whenAttached=function(){var t=this;return this.attached?a.resolve():a.create(function(e){return t.once("attached",function(){return e()})})},c.prototype.setRendererInfo=function(e,t,i){this._rendererInfo.setInfo(e,t,i),this.requestRender()},c.prototype.getMaterialItems=function(r,o){return i(this,void 0,void 0,function(){var t,i;return n(this,function(e){switch(e.label){case 0:return r&&0!==r.length?[4,this.whenAttached()]:[2,null];case 1:return e.sent(),t=this.stage.painter.textureManager,i=r.map(function(e){return t.rasterizeItem(e.symbol,e.glyphIds,o)}),[4,s.all(i)];case 2:return[2,e.sent().map(function(e,t){return{id:r[t].id,mosaicItem:e}})]}})})},c.prototype.onTileData=function(e,t){if(t.addOrUpdate&&"tileDisplayData"in t.addOrUpdate)e.setData(t,this.hasLabels,this.labelsVisible);else{var i=t.addOrUpdate&&u.TileData.decode(t.addOrUpdate),r=o({},t,{addOrUpdate:i});e.setData(r,this.hasLabels,this.labelsVisible)}this.contains(e)||this.addChild(e),this.requestRender()},c.prototype.onTileError=function(e){e.clear(),this.contains(e)||this.addChild(e)},c.prototype.renderChildren=function(e){this._rendererInfo.update(e.state),this.attributeView.bindTextures(this.stage.context),p.prototype.renderChildren.call(this,e)},c.prototype.createTile=function(e){var t=this._tileInfoView.getTileBounds(l.create(),e);return new u.WGLTile(e,t)},c.prototype.destroyTile=function(e){this.removeChild(e),e.destroy()},c.prototype.attach=function(){return this._initializeExtensions(),p.prototype.attach.call(this)},c.prototype.createRenderParams=function(e){return o({},p.prototype.createRenderParams.call(this,e),{rendererInfo:this._rendererInfo,attributeView:this.attributeView})},c.prototype._initializeExtensions=function(){var e=this.stage.context.capabilities;e.textureFloat,e.vao},c);function c(e,t){var i=p.call(this,e,t)||this;return i._rendererInfo=new u.WGLRendererInfo,i.attributeView=new u.AttributeStoreView,i}t.FeatureContainer=f}.apply(null,r))||(e.exports=o)},1870:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(1),i(0),i(206),i(2)],void 0===(o=function(e,t,i,r,o,n){Object.defineProperty(t,"__esModule",{value:!0});var a,s=(a=n.declared(o.HandleOwner),i(l,a),l.prototype.destroy=function(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null},Object.defineProperty(l.prototype,"updating",{get:function(){return this.isUpdating()},enumerable:!0,configurable:!0}),l.prototype.acquireTile=function(e){var t=this,i=this.createTile(e);return i.once("isReady",function(){return t.notifyChange("updating")}),this.tiles.set(e.id,i),i},l.prototype.lockAttributeTextureUpload=function(){},l.prototype.unlockAttributeTextureUpload=function(){},l.prototype.forceAttributeTextureUpload=function(){},l.prototype.forEachTile=function(e){this.tiles.forEach(e)},l.prototype.releaseTile=function(e){this.tiles.delete(e.key.id),this.disposeTile(e)},l.prototype.isUpdating=function(){var t=!0;return this.tiles.forEach(function(e){t=t&&e.isReady}),!t},l.prototype.setHighlight=function(){},l.prototype.invalidateLabels=function(){},l.prototype.requestUpdate=function(){this.layerView.requestUpdate()},r([n.property()],l.prototype,"layer",void 0),r([n.property()],l.prototype,"layerView",void 0),r([n.property()],l.prototype,"tileInfoView",void 0),r([n.property()],l.prototype,"updating",null),r([n.subclass("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],l));function l(e){var t=a.call(this,e)||this;return t.tiles=new Map,t}t.default=s}.apply(null,r))||(e.exports=o)},2798:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(1),i(0),i(5),i(9),i(10),i(2),i(80),i(90),i(1912),i(1870),i(1796),i(2799)],void 0===(o=function(e,t,i,r,o,n,a,s,l,u,p,f,c,d){Object.defineProperty(t,"__esModule",{value:!0});var v,y=(v=s.declared(f.default),i(S,v),S.prototype.install=function(e){var t=new d.WGLFeatureView(this.tileInfoView,this.layerView,this.layer);this.featuresView=t,e.addChild(t)},S.prototype.uninstall=function(e){e.removeChild(this.featuresView),this.featuresView.destroy()},S.prototype.hitTest=function(e,t){return this.featuresView.hitTest(e,t)},S.prototype.supportsRenderer=function(e){return null!=e&&-1!==["simple","class-breaks","unique-value","dot-density","dictionary"].indexOf(e.type)},S.prototype.onConfigUpdate=function(e,t){var i=null;if("visualVariables"in e){var r=(p.simplifyVVRenderer(e).visualVariables||[]).map(function(e){var t=e.clone();return"normalizationField"in e&&(t.normalizationField=null),e.valueExpression&&"$view.scale"!==e.valueExpression&&(t.valueExpression=null,t.field="nop"),t});i=c.convertVisualVariables(r)}this.featuresView.setRendererInfo(e,i,this.layerView.effects),this.featuresView.setClips(this.layerView.clips)},S.prototype.onTileData=function(e){var t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileData(t,e.data),this.layerView.view.labelManager.requestUpdate()},S.prototype.onTileError=function(e){var t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileError(t)},S.prototype.forceAttributeTextureUpload=function(){this.featuresView.attributeView.forceTextureUpload()},S.prototype.lockAttributeTextureUpload=function(){this.featuresView.attributeView.lockTextureUpload()},S.prototype.unlockAttributeTextureUpload=function(){this.featuresView.attributeView.unlockTextureUpload()},S.prototype.getMaterialItems=function(t){return a(this,void 0,void 0,function(){return n(this,function(e){return[2,this.featuresView.getMaterialItems(t)]})})},S.prototype.invalidateLabels=function(){this.layer.labelingInfo&&this.layer.labelsVisible&&(this.tiles.forEach(function(e){return e.isDirty=!0}),this.layerView.view.labelManager.requestUpdate())},S.prototype.createTile=function(e){var t=this.tileInfoView.getTileBounds(l.create(),e),i=new u.WGLTile(e,t);return this.layer.labelingInfo&&this.layerView.view.labelManager.addTile(this.layerView,i),i},S.prototype.disposeTile=function(e){this.featuresView.removeChild(e),this.layer.labelingInfo&&this.layerView.view.labelManager.removeTile(this.layerView,e.key.id),e.destroy(),this.layerView.view.labelManager.requestUpdate()},r([s.subclass("esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer")],S));function S(){return null!==v&&v.apply(this,arguments)||this}t.default=y}.apply(null,r))||(e.exports=o)},2799:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(5),i(11),i(9),i(10),i(4),i(90),i(1800),i(27)],void 0===(o=function(e,t,i,r,o,n,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0});var p,f=(p=l.FeatureContainer,r(c,p),c.prototype.renderChildren=function(e){this.hasAnimation&&e.painter.effects.integrate.draw(e,e.attributeView),p.prototype.renderChildren.call(this,e)},c.prototype.hitTest=function(e,t){var i=[e,t],r=a.createResolver();return this._pointToCallbacks.set(i,r),this.requestRender(),r.promise},c.prototype.doRender=function(e){var t=this._layer,i=t.minScale,r=t.maxScale,o=e.state.scale;o<=(i||1/0)&&r<=o&&p.prototype.doRender.call(this,e)},Object.defineProperty(c.prototype,"hasAnimation",{get:function(){return this.hasLabels},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"hasLabels",{get:function(){return!(!this._layer.labelingInfo||!this._layer.labelingInfo.length)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"labelsVisible",{get:function(){return this._layer.labelsVisible},enumerable:!0,configurable:!0}),c.prototype.prepareRenderPasses=function(e){var t=this,i=e.registerRenderPass({name:"label",brushes:[s.brushes.Label],target:function(){return t._layer.labelsVisible?t.children:null},drawPhase:u.WGLDrawPhase.LABEL|u.WGLDrawPhase.LABEL_ALPHA}),r=e.registerRenderPass({name:"geometry",brushes:[s.brushes.Fill,s.brushes.Line,s.brushes.Marker,s.brushes.Text],target:function(){return t.children},effects:[{apply:e.effects.highlight,enable:function(){return!!t._layerView.hasHighlight()}},{apply:e.effects.hittest,enable:function(){return!!t._pointToCallbacks.size},args:function(){return t._pointToCallbacks}}]});return p.prototype.prepareRenderPasses.call(this,e).concat([r,i])},c);function c(e,t,i){var r=p.call(this,e,t.clips)||this;return r._pointToCallbacks=new Map,r._layer=i,r._layerView=t,r}t.WGLFeatureView=f}.apply(null,r))||(e.exports=o)}}]);