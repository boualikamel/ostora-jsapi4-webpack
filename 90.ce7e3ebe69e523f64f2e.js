(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/editingSupport":1623})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{1623:function(e,t,a){var r,d;r=[a.dj.c(e.i),t,a(9),a(10),a(5),a(89),a(18),a(6),a(8),a(4),a(22),a(485)],void 0===(d=function(e,t,m,b,f,a,y,g,w,F,i,A){function v(e,t,a){if(a){if("attributes"in e&&!e.attributes[t.globalIdField])throw new g(t.type+"-layer:invalid-parameter","Feature should have 'globalId' when 'globalIdUsed' is true");if(!("attributes"in e||e.globalId))throw new g(t.type+"-layer:invalid-parameter","'globalId' of the feature should be passed when 'globalIdUsed' is true")}}function I(e,t){var a=e.feature,r=e.attachment;if(!a||"attributes"in a&&!a.attributes[t.globalIdField])throw new g(t.type+"-layer:invalid-parameter","Attachment should have reference to a feature with 'globalId'");if(!("attributes"in a||a.globalId))throw new g(t.type+"-layer:invalid-parameter","Attachment should have reference to 'globalId' of the parent feature");if(!r.globalId)throw new g(t.type+"-layer:invalid-parameter","Attachment should have 'globalId'");if(!r.data&&!r.uploadId)throw new g(t.type+"-layer:invalid-parameter","Attachment should have 'data' or 'uploadId'");if(!(r.data instanceof File&&r.data.name||r.name))throw new g(t.type+"-layer:invalid-parameter","'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!t.capabilities.editing.supportsUploadWithItemId&&r.uploadId)throw new g(t.type+"-layer:invalid-parameter","This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof r.data){var d=i.dataComponents(r.data);if(d&&!d.isBase64)throw new g(t.type+"-layer:invalid-parameter","Attachment 'data' should be a Blob, File or Base64 encoded string")}}function E(e){var t=new a;return e.attributes||(e.attributes={}),t.geometry=e.geometry,t.attributes=e.attributes,t}Object.defineProperty(t,"__esModule",{value:!0}),t.isEditableLayer=function(e){return!0===e.get("capabilities.operations.supportsEditing")},t.applyEdits=function(p,c,h){return b(this,void 0,void 0,function(){var a,r,d,i,n,s,l,u,o;return m(this,function(e){switch(e.label){case 0:return d={edits:c,result:F.create(function(e,t){a=e,r=t})},p.emit("apply-edits",d),[4,p.load()];case 1:if(e.sent(),i=p.source,!(t=i)||null==t.applyEdits)return[2,F.reject(new g(p.type+"-layer:no-editing-support","Layer source does not support applyEdits capability",{layer:p}))];if(!p.editingEnabled)throw new g(p.type+"-layer:editing-disabled","Editing is disabled for layer",{layer:p});return[4,function(i,n,s){return b(this,void 0,void 0,function(){var t,a,r,d;return m(this,function(e){if(t=n.addFeatures&&n.addFeatures.length||n.updateFeatures&&n.updateFeatures.length||n.deleteFeatures&&n.deleteFeatures.length,a=n.addAttachments&&n.addAttachments.length||n.updateAttachments&&n.updateAttachments.length||n.deleteAttachments&&n.deleteAttachments.length,!n||!t&&!a)throw new g(i.type+"-layer:missing-parameters","'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!i.capabilities.data.isVersioned&&s&&s.gdbVersion)throw new g(i.type+"-layer:invalid-parameter","'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!i.capabilities.editing.supportsRollbackOnFailure&&s&&s.rollbackOnFailureEnabled)throw new g(i.type+"-layer:invalid-parameter","This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");if(!i.capabilities.editing.supportsGlobalId&&s&&s.globalIdUsed)throw new g(i.type+"-layer:invalid-parameter","This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!i.capabilities.editing.supportsGlobalId&&a)throw new g(i.type+"-layer:invalid-parameter","'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if((!s||!s.globalIdUsed)&&a)throw new g(i.type+"-layer:invalid-parameter","When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true");return(r=f({},n)).addFeatures=y.isCollection(r.addFeatures)?r.addFeatures.toArray():r.addFeatures||[],r.updateFeatures=y.isCollection(r.updateFeatures)?r.updateFeatures.toArray():r.updateFeatures||[],r.deleteFeatures=y.isCollection(r.deleteFeatures)?r.deleteFeatures.toArray():r.deleteFeatures||[],r.addAttachments=r.addAttachments||[],r.updateAttachments=r.updateAttachments||[],r.deleteAttachments=r.deleteAttachments||[],r.addFeatures=r.addFeatures.map(E),r.updateFeatures=r.updateFeatures.map(E),d=s&&s.globalIdUsed,r.addFeatures.forEach(function(e){return v(e,i,d)}),r.updateFeatures.forEach(function(e){return v(e,i,d)}),r.deleteFeatures.forEach(function(e){return v(e,i,d)}),r.addAttachments.forEach(function(e){return I(e,i)}),r.updateAttachments.forEach(function(e){return I(e,i)}),[2,function(s){return b(this,void 0,void 0,function(){var t,a,r,d,i,n;return m(this,function(e){switch(e.label){case 0:return t=s.addFeatures,a=s.updateFeatures,r=t.concat(a).map(function(e){return e.geometry}),[4,A.normalizeCentralMeridian(r)];case 1:return d=e.sent(),i=t.length,n=a.length,d.slice(0,i).forEach(function(e,t){s.addFeatures[t].geometry=e}),d.slice(i,i+n).forEach(function(e,t){s.updateFeatures[t].geometry=e}),[2,s]}})})}(r)]})})}(p,c,h)];case 2:n=e.sent(),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,i.applyEdits(n,h)];case 4:return s=e.sent(),((u={addedFeatures:(l=function(e){return e.filter(function(e){return!e.error}).map(w.clone)})(s.addFeatureResults),updatedFeatures:l(s.updateFeatureResults),deletedFeatures:l(s.deleteFeatureResults),addedAttachments:l(s.addAttachmentResults),updatedAttachments:l(s.updateAttachmentResults),deletedAttachments:l(s.deleteAttachmentResults)}).addedFeatures.length||u.updatedFeatures.length||u.deletedFeatures.length||u.addedAttachments.length||u.updatedAttachments.length||u.deletedAttachments.length)&&p.emit("edits",u),a(u),[2,s];case 5:throw o=e.sent(),r(o),o;case 6:return[2]}var t})})}}.apply(null,r))||(e.exports=d)}}]);