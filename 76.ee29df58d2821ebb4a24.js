(function(){(this||window).webpackJsonp.registerAbsMids({"esri/portal/support/portalLayers":1585,"esri/layers/support/lazyLayerLoader":1671,"esri/portal/support/mapNotesUtils":1750})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{1585:function(e,n,r){var t,a;t=[r.dj.c(e.i),n,r(5),r(29),r(18),r(6),r(4),r(1671),r(158),r(1750)],void 0===(a=function(e,n,a,r,t,i,u,c,o,l){function s(e){switch(e.type){case"Map Service":return p(e).then(function(e){return e?{className:"TileLayer"}:{className:"MapImageLayer"}});case"Feature Service":return f(e).then(function(e){if("object"!=typeof e)return{className:"GroupLayer"};var n={};return null!=e.id&&(n.layerId=e.id),{className:"FeatureLayer",properties:n}});case"Feature Collection":return(n=e).load().then(function(){return n.fetchData()}).then(function(e){if(e&&Array.isArray(e.layers)){if(l.isMapNotesLayer(e))return{className:"MapNotesLayer"};if(1===e.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}});case"Scene Service":return f(c=e).then(function(e){if("object"!=typeof e)return{className:"GroupLayer"};var t={},n=void 0;if(n=null!=e.id?(t.layerId=e.id,c.url+"/layers/"+e.id):c.url,Array.isArray(c.typeKeywords)&&0<c.typeKeywords.length)for(var r={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},a=0,i=Object.keys(r);a<i.length;a++){var u=i[a];if(-1!==c.typeKeywords.indexOf(u))return{className:r[u]}}return h(n).then(function(e){var n="SceneLayer",r={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&r[e.layerType]&&(n=r[e.layerType]),{className:n,properties:t}})});case"Image Service":return p(r=e).then(function(e){var n=new t(r.typeKeywords);return e?n.find(function(e){return"elevation 3d layer"===e.toLowerCase()})?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}});case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return u.reject(new i("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}var r,c,n}function y(n){return(0,c.layerLookupMap[n.className])().then(function(e){return{constructor:e,properties:n.properties}})}function p(e){return h(e.url).then(function(e){return e.tileInfo})}function f(n){return!n.url||n.url.match(/\/\d+$/)?u.resolve({}):n.load().then(function(){return n.fetchData()}).then(function(e){return e&&Array.isArray(e.layers)?1===e.layers.length&&{id:e.layers[0].id}:h(n.url).then(function(e){return e&&Array.isArray(e.layers)?1===e.layers.length&&{id:e.layers[0].id}:{}})})}function h(e){return r(e,{responseType:"json",query:{f:"json"}}).then(function(e){return e.data})}Object.defineProperty(n,"__esModule",{value:!0}),n.fromItem=function(t){return!t.portalItem||t.portalItem instanceof o||t.portalItem.constructor&&t.portalItem.constructor._meta||(t=a({},t,{portalItem:new o(t.portalItem)})),t.portalItem.load().then(s).then(y).then(function(e){var n=a({portalItem:t.portalItem},e.properties),r=e.constructor;return u.resolve(new r(n))})},n.selectLayerClassPath=s}.apply(null,t))||(e.exports=a)},1671:function(e,n,t){var r,a;r=[t.dj.c(e.i),n,t(4)],void 0===(a=function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.layerLookupMap={CSVLayer:function(){return r.create(function(n){return t.e(23).then(function(){var e=[t(1578)];n.apply(null,e)}.bind(this)).catch(t.oe)})},ElevationLayer:function(){return r.create(function(n){return Promise.resolve().then(function(){var e=[t(219)];n.apply(null,e)}.bind(this)).catch(t.oe)})},FeatureLayer:function(){return r.create(function(n){return Promise.resolve().then(function(){var e=[t(154)];n.apply(null,e)}.bind(this)).catch(t.oe)})},GroupLayer:function(){return r.create(function(n){return t.e(10).then(function(){var e=[t(1573)];n.apply(null,e)}.bind(this)).catch(t.oe)})},GeoRSSLayer:function(){return r.create(function(n){return t.e(29).then(function(){var e=[t(1579)];n.apply(null,e)}.bind(this)).catch(t.oe)})},ImageryLayer:function(){return r.create(function(n){return t.e(12).then(function(){var e=[t(1574)];n.apply(null,e)}.bind(this)).catch(t.oe)})},KMLLayer:function(){return r.create(function(n){return t.e(25).then(function(){var e=[t(1581)];n.apply(null,e)}.bind(this)).catch(t.oe)})},MapImageLayer:function(){return r.create(function(n){return t.e(11).then(function(){var e=[t(1572)];n.apply(null,e)}.bind(this)).catch(t.oe)})},MapNotesLayer:function(){return r.create(function(n){return t.e(86).then(function(){var e=[t(1784)];n.apply(null,e)}.bind(this)).catch(t.oe)})},OpenStreetMapLayer:function(){return r.create(function(n){return t.e(30).then(function(){var e=[t(1582)];n.apply(null,e)}.bind(this)).catch(t.oe)})},PointCloudLayer:function(){return r.create(function(n){return t.e(14).then(function(){var e=[t(1583)];n.apply(null,e)}.bind(this)).catch(t.oe)})},SceneLayer:function(){return r.create(function(n){return t.e(19).then(function(){var e=[t(1575)];n.apply(null,e)}.bind(this)).catch(t.oe)})},BuildingSceneLayer:function(){return r.create(function(n){return t.e(16).then(function(){var e=[t(1577)];n.apply(null,e)}.bind(this)).catch(t.oe)})},IntegratedMeshLayer:function(){return r.create(function(n){return t.e(24).then(function(){var e=[t(1580)];n.apply(null,e)}.bind(this)).catch(t.oe)})},StreamLayer:function(){return r.create(function(n){return t.e(27).then(function(){var e=[t(1576)];n.apply(null,e)}.bind(this)).catch(t.oe)})},TileLayer:function(){return r.create(function(n){return Promise.resolve().then(function(){var e=[t(220)];n.apply(null,e)}.bind(this)).catch(t.oe)})},UnknownLayer:function(){return r.create(function(n){return t.e(87).then(function(){var e=[t(1785)];n.apply(null,e)}.bind(this)).catch(t.oe)})},UnsupportedLayer:function(){return r.create(function(n){return t.e(88).then(function(){var e=[t(1786)];n.apply(null,e)}.bind(this)).catch(t.oe)})},VectorTileLayer:function(){return r.create(function(n){return Promise.resolve().then(function(){var e=[t(319)];n.apply(null,e)}.bind(this)).catch(t.oe)})},WebTileLayer:function(){return r.create(function(n){return Promise.resolve().then(function(){var e=[t(311)];n.apply(null,e)}.bind(this)).catch(t.oe)})},WMSLayer:function(){return r.create(function(n){return t.e(20).then(function(){var e=[t(1584)];n.apply(null,e)}.bind(this)).catch(t.oe)})},WMTSLayer:function(){return r.create(function(n){return t.e(67).then(function(){var e=[t(1787)];n.apply(null,e)}.bind(this)).catch(t.oe)})},BingMapsLayer:function(){return r.create(function(n){return t.e(8).then(function(){var e=[t(317)];n.apply(null,e)}.bind(this)).catch(t.oe)})}}}.apply(null,r))||(e.exports=a)},1750:function(e,n,r){var t,a;t=[r.dj.c(e.i),n],void 0===(a=function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isMapNotesLayer=function(e){var r=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"],n=e.layers||e.featureCollection&&e.featureCollection.layers;if(n&&Array.isArray(n)){var t=n[0];return t.layerDefinition&&Array.isArray(t.layerDefinition.fields)&&t.layerDefinition.fields.forEach(function(e){var n=r.indexOf(e.name);-1<n&&r.splice(n,1)}),!r.length}}}.apply(null,t))||(e.exports=a)}}]);