(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/layers/GroupLayerView":1612,"esri/views/layers/LayerView":1635})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{1612:function(e,i,t){var r,n;r=[t.dj.c(e.i),i,t(1),t(0),t(18),t(123),t(23),t(2),t(1635)],void 0===(n=function(e,i,t,r,n,s,a,l,o){return y=l.declared(o),t(d,y),d.prototype.initialize=function(){var i=this;this._watchHandles=new a,this._watchHandles.add(this.layerViews.on("change",function(e){return i._layerViewsChangeHandler(e)})),this._watchHandles.add(this.layerViews.on("after-changes",this._layerViewsAfterChangesHandler.bind(this))),this._watchHandles.add(this.layer.watch("visibilityMode",function(){return i._visibilityModeHandler()},!0)),this._watchHandles.add(this.watch("visible",this._visibleHandler.bind(this),!0)),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()},d.prototype.destroy=function(){this._watchHandles&&(this._watchHandles.destroy(),this._watchHandles=null)},Object.defineProperty(d.prototype,"layerViews",{set:function(e){this._set("layerViews",s.referenceSetter(e,this._get("layerViews")))},enumerable:!0,configurable:!0}),d.prototype.isUpdating=function(){return this.layerViews.some(function(e){return e.updating})},d.prototype._hasLayerViewVisibleOverrides=function(){return this.layerViews.some(function(e){return e._isOverridden("visible")})},d.prototype._findLayerViewForLayer=function(i){return i&&this.layerViews.find(function(e){return e.layer===i})},d.prototype._firstVisibleOnLayerOrder=function(){var t=this,e=this.layer.layers.find(function(e){var i=t._findLayerViewForLayer(e);return i&&i.visible});return e&&this._findLayerViewForLayer(e)},d.prototype._enforceExclusiveVisibility=function(i){this._hasLayerViewVisibleOverrides()&&(i||!(i=this._firstVisibleOnLayerOrder())&&0<this.layerViews.length&&(i=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach(function(e){e.visible=e===i}))},d.prototype._layerViewsChangeHandler=function(e){var t=this;this._watchHandles.remove("visible"),this._watchHandles.add(this.layerViews.map(function(i){return i.watch("visible",function(e){return t._layerViewVisibleHandler(e,i)},!0)}).toArray(),"visible");var i=e.added[e.added.length-1],r=null;i&&i.visible&&(r=i),this._enforceVisibility(r)},d.prototype._layerViewsAfterChangesHandler=function(){var i=this;this._watchHandles.remove("updating"),this._watchHandles.add(this.layerViews.map(function(e){return e.watch("updating",function(){return i._updateUpdating()},!0)}).toArray(),"updating"),this._updateUpdating()},d.prototype._enforceVisibility=function(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":var i=this.visible;this.layerViews.forEach(function(e){e.visible=i});break;case"exclusive":this._enforceExclusiveVisibility(e)}},d.prototype._visibilityModeHandler=function(){this._enforceVisibility()},d.prototype._layerViewVisibleHandler=function(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":e!==this.visible&&(i.visible=this.visible);break;case"exclusive":this._enforceExclusiveVisibility(e&&i)}},d.prototype._visibleHandler=function(){this._hasLayerViewVisibleOverrides()&&"inherited"===this.layer.visibilityMode&&this._enforceVisibility()},d.prototype._updateUpdating=function(){this.notifyChange("updating")},r([l.property({cast:s.castForReferenceSetter})],d.prototype,"layerViews",null),r([l.subclass("esri.views.layers.GroupLayerView")],d);function d(e){var i=y.call(this,e)||this;return i.layerViews=new n,i}var y}.apply(null,r))||(e.exports=n)},1635:function(e,i,t){var r,n;r=[t.dj.c(e.i),i,t(1),t(0),t(13),t(54),t(206),t(121),t(3),t(119),t(2)],void 0===(n=function(e,i,t,r,n,s,a,l,o,d,y){return u=y.declared(a.HandleOwnerMixin(l.IdentifiableMixin(d.EsriPromiseMixin(s.EventedMixin(n))))),t(p,u),p.prototype.initialize=function(){var r=this;this.addResolvingPromise(this.layer),this.when().catch(function(e){if("layerview:create-error"!==e.name){var i=r.layer&&r.layer.id||"no id",t=r.layer&&r.layer.title||"no title";throw o.getLogger(r.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+t+"', id: '"+i+"')",e),e}})},p.prototype.destroy=function(){this.layer=this.parent=null},Object.defineProperty(p.prototype,"fullOpacity",{get:function(){function e(e){return null==e?1:e}return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),p.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},p.prototype.isUpdating=function(){return!1},r([y.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],p.prototype,"fullOpacity",null),r([y.property()],p.prototype,"layer",void 0),r([y.property()],p.prototype,"parent",void 0),r([y.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended"]})],p.prototype,"suspended",null),r([y.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],p.prototype,"updating",null),r([y.property({dependsOn:["layer.visible"]})],p.prototype,"visible",null),r([y.subclass("esri.views.layers.LayerView")],p);function p(e){var i=u.call(this,e)||this;return i.layer=null,i.parent=null,i}var u}.apply(null,r))||(e.exports=n)}}]);