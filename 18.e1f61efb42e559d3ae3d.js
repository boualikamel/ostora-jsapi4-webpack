(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/sources/support/CSVSourceWorker":1587,"esri/layers/graphics/data/projectionSupport":1649,"esri/core/libs/quickselect/quickselect":1665,"esri/core/libs/rbush/rbush":1683,"esri/layers/graphics/sources/support/clientSideDefaults":1816,"dstore/Csv":2448})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1587:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i(9),i(10),i(517),i(2448),i(28),i(29),i(6),i(14),i(8),i(4),i(22),i(316),i(55),i(44),i(487),i(302),i(1722),i(1649),i(1723),i(1816),i(488)],void 0===(r=function(e,a,l,r,t,G,J,o,F,s,b,u,h,Z,A,z,Q,W,$,i,U,n,w){Object.defineProperty(a,"__esModule",{value:!0});var M=n.createDrawingInfo("esriGeometryPoint"),H=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"];a.csvLatitudeFieldNames=["lat","latitude","y","ycenter","latitude83","latdecdeg","point-y"],a.csvLongitudeFieldNames=["lon","lng","long","longitude","x","xcenter","longitude83","longdecdeg","point-x"],a.csvDetectedDelimiters=[","," ",";","|","\t"];var f,c,d,p,m=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,K=[0,0],ee=function(e,t){this.x=e,this.y=t},te=(f=t._parseInfo(),c=new RegExp("^"+f.regexp+"$"),d=new RegExp("["+f.group+"\\s\\xa0]","g"),p=f.factor,function(e){var t=c.exec(e);if(f.factor=p,!t)return NaN;var i=t[1];if(!t[1]){if(!t[2])return NaN;i=t[2],f.factor*=-1}return(i=i.replace(d,"").replace(f.decimal,"."))*f.factor}),v="isInteger"in Number?Number.isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},g=(y.prototype.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=null,this._fieldsIndex=null},y.prototype.load=function(o,s){return void 0===s&&(s={}),r(this,void 0,void 0,function(){var t,i,n,r,a;return l(this,function(e){switch(e.label){case 0:return[4,u.all([this._fetch(o.url,s),this._checkProjection(s&&o.parsing&&o.parsing.spatialReference)])];case 1:return t=e.sent()[0],i=this._parse(t,o.parsing),this._queryEngine=this._createQueryEngine(t,i),i.layerDefinition.extent=this._queryEngine.fullExtent,i.layerDefinition.timeInfo&&(n=this._queryEngine.timeExtent,r=n.start,a=n.end,i.layerDefinition.timeInfo.timeExtent=[r,a]),[2,i]}})})},y.prototype.applyEdits=function(){return r(this,void 0,void 0,function(){return l(this,function(e){throw new F("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer")})})},y.prototype.queryFeatures=function(t,i){return void 0===t&&(t={}),void 0===i&&(i={}),r(this,void 0,void 0,function(){return l(this,function(e){return[2,this._queryEngine.executeQuery(t,i.signal)]})})},y.prototype.queryFeatureCount=function(t,i){return void 0===t&&(t={}),void 0===i&&(i={}),r(this,void 0,void 0,function(){return l(this,function(e){return[2,this._queryEngine.executeQueryForCount(t,i.signal)]})})},y.prototype.queryObjectIds=function(t,i){return void 0===t&&(t={}),void 0===i&&(i={}),r(this,void 0,void 0,function(){return l(this,function(e){return[2,this._queryEngine.executeQueryForIds(t,i.signal)]})})},y.prototype.queryExtent=function(t,i){return void 0===t&&(t={}),void 0===i&&(i={}),r(this,void 0,void 0,function(){return l(this,function(e){return[2,this._queryEngine.executeQueryForExtent(t,i.signal)]})})},y.prototype._fetch=function(i,n){return r(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:if(!i)throw new F("csv-source:invalid-source","url not defined");return t=h.urlToObject(i),[4,o(t.path,{query:t.query,responseType:"text",signal:n.signal})];case 1:return[2,e.sent().data]}})})},y.prototype._parse=function(e,t){void 0===t&&(t={});for(var i={columnDelimiter:t.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:t.latitudeField,longitudeFieldName:t.longitudeField}};e&&"\n"===e[0];)e=e.slice(1);"\n"!==e[e.length-1]&&(e+="\n");var n=this._readFirstLine(e);if(!n)throw new F("csv","CSV is empty",{csv:e});if(!t.columnDelimiter){var r=this._inferDelimiter(n);if(!r)throw new F("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");i.columnDelimiter=r}var a=n.split(i.columnDelimiter),o=i.layerDefinition={name:"csv",drawingInfo:M,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:t.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:t.spatialReference||{wkid:102100}}};if(!t.latitudeField||!t.longitudeField){var s=this._inferLocationInfo(a);if(!t.longitudeField&&!s.longitudeFieldName||!t.latitudeField&&!s.latitudeFieldName)throw new F("csv","Unable to identify latitudeField and/or longitudeField from CSV");i.locationInfo={longitudeFieldName:t.longitudeField||s.longitudeFieldName,latitudeFieldName:t.latitudeField||s.latitudeFieldName}}var l=this._inferFields(e,i.columnDelimiter,a,i.locationInfo);if(t.fields&&t.fields.length){for(var u=new Map,h=0,f=t.fields;h<f.length;h++){var c=f[h];u.set(c.name.toLowerCase(),c)}for(var d=0,p=l;d<p.length;d++){c=p[d];var m=u.get(c.name.toLowerCase());if(m){var v=c.name;b.mixin(c,m),c.name=v}}}if(o.fields=l,o.fields.some(function(e){return"esriFieldTypeOID"===e.type&&(o.objectIdField=e.name,!0)})||(c={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},o.objectIdField=c.name,o.fields.unshift(c)),this._fieldsIndex=new w(o.fields),o.timeInfo){var g=o.timeInfo;if(g.startTimeField){var y=this._fieldsIndex.get(g.startTimeField);y?(g.startTimeField=y.name,y.type="esriFieldTypeDate"):g.startTimeField=null}if(g.endTimeField){var x=this._fieldsIndex.get(g.endTimeField);x?(g.endTimeField=x.name,x.type="esriFieldTypeDate"):g.endTimeField=null}if(g.trackIdField){var _=this._fieldsIndex.get(g.trackIdField);g.trackIdField=_?_.name:null}g.startTimeField||g.endTimeField||(o.timeInfo=null)}return i},y.prototype._inferLocationInfo=function(e){var i=null,n=null;return e.forEach(function(e){var t=e.toLowerCase();-1===a.csvLatitudeFieldNames.indexOf(t)||n||(n=e),-1===a.csvLongitudeFieldNames.indexOf(t)||i||(i=e)}),{longitudeFieldName:i,latitudeFieldName:n}},y.prototype._inferFields=function(e,t,r,a){for(var o=[],s=this._sampleLines(e).map(function(e){return e.split(t).map(function(e){return e.trim()})}),l=this,i=0;i<r.length;i++)!function(t){var e=r[t];if(e===a.longitudeFieldName||e===a.latitudeFieldName)o.push({name:e,type:"esriFieldTypeDouble",alias:e});else{var i=s.map(function(e){return e[t]}),n={name:e,type:null,alias:e};switch(l._inferFieldType(i)){case"integer":n.type="esriFieldTypeInteger";break;case"double":n.type="esriFieldTypeDouble";break;case"date":n.type="esriFieldTypeDate",n.length=36;break;default:n.type="esriFieldTypeString",n.length=255}o.push(n)}}(i);return o},y.prototype._inferFieldType=function(e){var r=this;if(!e.length)return"string";var a=/[^+-.,0-9]/;return e.map(function(e){var t=!1;if(""===e||a.test(e))t=!0;else{var i=te(e);if(!isNaN(i))return/[.,]/.test(e)||!v(i)||214783647<i||i<-214783648?"double":"integer";if(-1===e.indexOf("E"))t=!0;else{if(i=Number(e),!isNaN(i))return"double";if(-1===e.indexOf(","))t=!0;else{if(e=e.replace(",","."),i=Number(e),!isNaN(i))return"double";t=!0}}}if(t){if(/^[-]?\d*[.,]?\d*$/.test(e))return"string";var n=new Date(e);return r._isValidDate(n,e)?"date":"string"}return"string"}).reduce(function(e,t){return e===t?t:"string"===e||"string"===t?"string":"double"===e||"double"===t?"double":void 0})},y.prototype._isValidDate=function(e,t){if(!e||"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))return!1;var i=!0;if(s("chrome")&&/\d+\W*$/.test(t)){var n=t.match(/[a-zA-Z]{2,}/);if(n){for(var r=!1,a=0;!r&&a<=n.length;)r=!m.test(n[a]),a++;i=!r}}return i},y.prototype._readFirstLine=function(e){return e.substring(0,e.indexOf("\n")).trim()},y.prototype._sampleLines=function(e,t){void 0===t&&(t=10);for(var i=!1,n=[],r=e.indexOf("\n")+1;!i&&n.length<t;){var a,o=e.indexOf("\n",r);if(-1!==o)(a=-1===o&&r<e.length-1?e.substring(r).trim():e.substring(r,o).trim())&&n.push(a),r=o+1;else i=!0}return n},y.prototype._inferDelimiter=function(i){var n=0,r="";return a.csvDetectedDelimiters.forEach(function(e){var t=i.split(e).length;n<t&&(n=t,r=e)}),""===r?null:r},y.prototype._createQueryEngine=function(e,t){for(var i,n=t.locationInfo,r=n.latitudeFieldName,a=n.longitudeFieldName,o=t.layerDefinition,s=o.objectIdField,l=o.fields,u=o.extent,h=o.timeInfo,f=[],c=[],d=new Set,p=new Set,m=[],v=0,g=l;v<g.length;v++){var y=g[v],x=y.name,_=y.type;"esriFieldTypeDate"===_?d.add(x):-1<H.indexOf(_)&&p.add(x),x!==s&&m.push(x)}var F=new G;F.delimiter=t.columnDelimiter,F.fieldNames=m,F.newline="\n";var b=F.parse(e),w=0;b.shift();for(var M=0,N=b;M<N.length;M++){var I=N[M],S=this._parseCoordinateValue(I[r]),T=this._parseCoordinateValue(I[a]);if(null!=T&&null!=S&&!isNaN(S)&&!isNaN(T)){for(var j in I[r]=S,I[a]=T,I)if(j!==r&&j!==a)if(d.has(j)){var D=new Date(I[j]);I[j]=this._isValidDate(D,I[j])?D.getTime():null}else if(p.has(j)){var Y=te(I[j]);isNaN(Y)?I[j]=null:I[j]=Y}I[s]=w,w++,f.push(new ee(T,S)),c.push(I)}}if(!A.equals({wkid:4326},u.spatialReference))if(A.isWebMercator(u.spatialReference))for(var E=0,X=f;E<X.length;E++){var B=X[E];i=z.lngLatToXY(B.x,B.y,K),B.x=i[0],B.y=i[1]}else f=Z.projectMany(f,J.SpatialReference.WGS84,u.spatialReference,null,!0);for(var O=new $.default({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1}),q=new U.default({fields:t.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:h,objectIdField:s,spatialReference:u.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:O}),P=[],R=0;R<f.length;R++){var k=f[R],L=k.x,V=k.y,C=c[R];C[s]=R+1,P.push(new Q.default(new W.default([],[L,V]),C,null,C[s]))}return O.addMany(P),q},y.prototype._parseCoordinateValue=function(e){if(null==e||""===e)return null;var t=te(e);return(isNaN(t)||181<Math.abs(t))&&(t=parseFloat(e)),t},y.prototype._checkProjection=function(t){return r(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i.checkProjectionSupport(A.WGS84,t)];case 1:return e.sent(),[3,3];case 2:throw e.sent(),new F("csv-layer","Projection not supported");case 3:return[2]}})})},y);function y(){this._fieldsIndex=null,this._queryEngine=null}a.default=g}.apply(null,n))||(e.exports=r)},1649:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i(9),i(10),i(6),i(4),i(316),i(55),i(44)],void 0===(r=function(e,t,o,s,l,u,h,f,r){function i(e,t){var i,n,r;if(!t)return null;if("x"in t){var a={x:0,y:0};return i=e(t.x,t.y,v),a.x=i[0],a.y=i[1],null!=t.z&&(a.z=t.z),null!=t.m&&(a.m=t.m),a}if("xmin"in t){a={xmin:0,ymin:0,xmax:0,ymax:0};return n=e(t.xmin,t.ymin,v),a.xmin=n[0],a.ymin=n[1],r=e(t.xmax,t.ymax,v),a.xmax=r[0],a.ymax=r[1],t.hasZ&&(a.zmin=t.zmin,a.zmax=t.zmax,a.hasZ=!0),t.hasM&&(a.mmin=t.mmin,a.mmax=t.mmax,a.hasM=!0),a}return"rings"in t?{rings:c(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:c(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:d(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function c(e,t){for(var i=[],n=0,r=e;n<r.length;n++){var a=r[n];i.push(d(a,t))}return i}function d(e,t){for(var i=[],n=0,r=e;n<r.length;n++){var a=r[n],o=t(a[0],a[1],[0,0]);i.push(o),2<a.length&&o.push(a[2]),3<a.length&&o.push(a[3])}return i}function p(e,t){return!(!f.isValid(e)||!f.isValid(t)||f.equals(e,t)||r.canProject(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var m="feature-store:unsupported-query",v=[0,0];t.doesBrowserSupportProjection=function(e,t){return!p(e,t)||h.isSupported()},t.checkProjectionSupport=function(r,a){return s(this,void 0,void 0,function(){var t,i,n;return o(this,function(e){if(!a)return[2];if(Array.isArray(r)){for(t=0,i=r;t<i.length;t++)if(p((n=i[t]).geometry&&n.geometry.spatialReference,a)){if(h.isSupported())return[2,h.load()];throw new l(m,"projection not supported",{inSpatialReference:r,outSpatialReference:a})}return[2]}if(!p(r,a))return[2];if(h.isSupported())return[2,h.load()];throw new l(m,"projection not supported",{inSpatialReference:r,outSpatialReference:a})})})};var a=i.bind(null,r.lngLatToXY),g=i.bind(null,r.xyToLngLat);t.project=function(e,t,i){return e?(i||(i=t,t=e.spatialReference),f.isValid(t)&&f.isValid(i)&&!f.equals(t,i)?r.canProject(t,i)?(f.isWebMercator(i)?a:g)(e):h.projectMany([e],t,i,null,!0)[0]:e):e};var y=new(n.prototype.push=function(n,r,a){return s(this,void 0,void 0,function(){var t,i=this;return o(this,function(e){return n&&n.length&&r&&a&&!f.equals(r,a)||u.resolve(n),t={geometries:n,inSpatialReference:r,outSpatialReference:a,resolve:null},this._jobs.push(t),[2,u.create(function(e){t.resolve=e,null===i._timer&&(i._timer=setTimeout(i._process,10))},function(){var e=i._jobs.indexOf(t);-1<e&&i._jobs.splice(e,1)})]})})},n.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,i=e.inSpatialReference,n=e.outSpatialReference;(0,e.resolve)(r.canProject(i,n)?f.isWebMercator(n)?t.map(a):t.map(g):h.projectMany(t,i,n,null,!0)),0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}},n);function n(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}t.projectMany=function(t,i,n){return s(this,void 0,void 0,function(){return o(this,function(e){return[2,y.push(t,i,n)]})})}}.apply(null,n))||(e.exports=r)},1665:function(e,t,i){var n;void 0===(n=function(){"use strict";function p(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function a(e,t){return e<t?-1:t<e?1:0}return function(e,t,i,n,r){!function e(t,i,n,r,a){for(;n<r;){if(600<r-n){var o=r-n+1,s=i-n+1,l=Math.log(o),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);e(t,i,Math.max(n,Math.floor(i-s*u/o+h)),Math.min(r,Math.floor(i+(o-s)*u/o+h)),a)}var f=t[i],c=n,d=r;for(p(t,n,i),0<a(t[r],f)&&p(t,n,r);c<d;){for(p(t,c,d),c++,d--;a(t[c],f)<0;)c++;for(;0<a(t[d],f);)d--}0===a(t[n],f)?p(t,n,d):p(t,++d,r),d<=i&&(n=d+1),i<=d&&(r=d-1)}}(e,t,i||0,n||e.length-1,r||a)}}.apply(null,[]))||(e.exports=n)},1683:function(e,t,i){var n,r;n=[i(1665)],void 0===(r=function(s){"use strict";function i(e,t){if(!(this instanceof i))return new i(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}function h(e,t,i){if(!i)return t.indexOf(e);for(var n=0;n<t.length;n++)if(i(e,t[n]))return n;return-1}function d(e,t){g(e,0,e.children.length,t,e)}function g(e,t,i,n,r){(r=r||m(null)).minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var a,o=t;o<i;o++)a=e.children[o],f(r,e.leaf?n(a):a);return r}function f(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function a(e,t){return e.minX-t.minX}function o(e,t){return e.minY-t.minY}function y(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function c(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function u(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,i,n,r){for(var a,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=n||(a=t+Math.ceil((i-t)/n/2)*n,s(e,a,t,i,r),o.push(t,a,a,i))}return i.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],n=this.toBBox;if(!u(e,t))return i;for(var r,a,o,s,l=[];t;){for(r=0,a=t.children.length;r<a;r++)o=t.children[r],u(e,s=t.leaf?n(o):o)&&(t.leaf?i.push(o):p(e,s)?this._all(o,i):l.push(o));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!u(e,t))return!1;for(var n,r,a,o,s=[];t;){for(n=0,r=t.children.length;n<r;n++)if(a=t.children[n],u(e,o=t.leaf?i(a):a)){if(t.leaf||p(e,o))return!0;s.push(a)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(e,t){if(!e)return this;for(var i,n,r,a,o=this.data,s=this.toBBox(e),l=[],u=[];o||l.length;){if(o||(o=l.pop(),n=l[l.length-1],i=u.pop(),a=!0),o.leaf&&-1!==(r=h(e,o.children,t)))return o.children.splice(r,1),l.push(o),this._condense(l),this;a||o.leaf||!p(o,s)?n?(i++,o=n.children[i],a=!1):o=null:(l.push(o),u.push(i),i=0,o=(n=o).children[0])}return this},toBBox:function(e){return e},compareMinX:a,compareMinY:o,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,n){var r,a=i-t+1,o=this._maxEntries;if(a<=o)return d(r=m(e.slice(t,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,n-1))),(r=m([])).leaf=!1,r.height=n;var s,l,u,h,f=Math.ceil(a/o),c=f*Math.ceil(Math.sqrt(o));for(v(e,t,i,c,this.compareMinX),s=t;s<=i;s+=c)for(v(e,s,u=Math.min(s+c-1,i),f,this.compareMinY),l=s;l<=u;l+=f)h=Math.min(l+f-1,u),r.children.push(this._build(e,l,h,n-1));return d(r,this.toBBox),r},_chooseSubtree:function(e,t,i,n){for(var r,a,o,s,l,u,h,f;n.push(t),!t.leaf&&n.length-1!==i;){for(h=f=1/0,r=0,a=t.children.length;r<a;r++)l=y(o=t.children[r]),c=e,d=o,(u=(Math.max(d.maxX,c.maxX)-Math.min(d.minX,c.minX))*(Math.max(d.maxY,c.maxY)-Math.min(d.minY,c.minY))-l)<f?(f=u,h=l<h?l:h,s=o):u===f&&l<h&&(h=l,s=o);t=s||t.children[0]}var c,d;return t},_insert:function(e,t,i){var n=this.toBBox,r=i?e:n(e),a=[],o=this._chooseSubtree(r,this.data,t,a);for(o.children.push(e),f(o,r);0<=t&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(r,a,t)},_split:function(e,t){var i=e[t],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var a=this._chooseSplitIndex(i,r,n),o=m(i.children.splice(a,i.children.length-a));o.height=i.height,o.leaf=i.leaf,d(i,this.toBBox),d(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=m([e,t]),this.data.height=e.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var n,r,a,o,s,l,u,h,f,c,d,p,m,v;for(l=u=1/0,n=t;n<=i-t;n++)r=g(e,0,n,this.toBBox),a=g(e,n,i,this.toBBox),f=r,c=a,void 0,d=Math.max(f.minX,c.minX),p=Math.max(f.minY,c.minY),m=Math.min(f.maxX,c.maxX),v=Math.min(f.maxY,c.maxY),o=Math.max(0,m-d)*Math.max(0,v-p),s=y(r)+y(a),o<l?(l=o,h=n,u=s<u?s:u):o===l&&s<u&&(u=s,h=n);return h},_chooseSplitAxis:function(e,t,i){var n=e.leaf?this.compareMinX:a,r=e.leaf?this.compareMinY:o;this._allDistMargin(e,t,i,n)<this._allDistMargin(e,t,i,r)&&e.children.sort(n)},_allDistMargin:function(e,t,i,n){e.children.sort(n);var r,a,o=this.toBBox,s=g(e,0,t,o),l=g(e,i-t,i,o),u=c(s)+c(l);for(r=t;r<i-t;r++)a=e.children[r],f(s,e.leaf?o(a):a),u+=c(s);for(r=i-t-1;t<=r;r--)a=e.children[r],f(l,e.leaf?o(a):a),u+=c(l);return u},_adjustParentBBoxes:function(e,t,i){for(var n=i;0<=n;n--)f(t[n],e)},_condense:function(e){for(var t,i=e.length-1;0<=i;i--)0===e[i].children.length?0<i?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():d(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},i}.apply(null,n))||(e.exports=r)},1816:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i(5),i(14),i(8),i(523)],void 0===(r=function(e,t,a,o,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?n.defaultPointSymbolJSON:"esriGeometryPolyline"===e?n.defaultPolylineSymbolJSON:n.defaultPolygonSymbolJSON}}},t.createDefaultAttributesFunction=function(t,i){if(o("csp-restrictions"))return function(){var e;return a(((e={})[i]=null,e),t)};try{var e="this."+i+" = null;";for(var n in t)e+="this."+n+" = "+JSON.stringify(t[n])+";";var r=new Function(e);return function(){return new r}}catch(e){return function(){var e;return a(((e={})[i]=null,e),t)}}},t.createDefaultTemplate=function(e){return void 0===e&&(e={}),[{name:"New Feature",description:"",prototype:{attributes:i.clone(e)}}]}}.apply(null,n))||(e.exports=r)},2448:function(e,t,i){var n,r;n=[i(21),i(67)],void 0===(r=function(v,e){var g=/^\s*"([\S\s]*)"\s*$/,y=/""/g,h=/"/g;function x(e,t){var i,n={},r=e.length;for(i=0;i<r;i++)n[e[i]]=t[i];return n}return e(null,{fieldNames:null,delimiter:",",newline:"\r\n",trim:!1,parse:function(e){var t,i,n,r,a,o,s,l,u=[],h=e.split(this.newline),f=this.fieldNames,c=0,d=[],p="",m="";e:for(o=0,n=h.length;o<n;o++)if(v.trim(h[o])){for(s=0,r=(t=h[o].split(this.delimiter)).length;s<r;s++){for(l=-1,p+=m+(i=t[s]),m="";0<=(l=i.indexOf('"',l+1));)c++;if(c%2==0){if(0<c){if(!(a=g.exec(p))){console.warn("Csv: discarding row with invalid value: "+p),d=[],p="",c=0;continue e}d.push(a[1].replace(y,'"'))}else d.push(this.trim||!f?v.trim(p):p);p="",c=0}else m=this.delimiter}0===c?(f?u.push(x(f,d)):f=this.fieldNames=d,d=[]):m=this.newline}return u},toCsv:function(e){return this.stringify(this.data,e)},stringify:function(e,t){var i,n,r,a=(t=t||{}).alwaysQuote,o=this.fieldNames,s=this.delimiter,l=this.newline,u="";for(i=-1;i<e.length;i++)for(-1<i&&(u+=l),n=0;n<o.length;n++)null==(r=i<0?o[n]:e[i][o[n]])&&(r=""),"string"!=typeof r&&(r=r.toString()),u+=(0<n?s:"")+(a||0<=r.indexOf('"')||0<=r.indexOf(s)?'"'+r.replace(h,'""')+'"':r);return t.trailingNewline&&(u+=l),u}})}.apply(null,n))||(e.exports=r)}}]);