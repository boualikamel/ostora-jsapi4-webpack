(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/StreamLayerView2D":1617})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{1617:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(5),r(9),r(10),r(6),r(2),r(207),r(1589),r(1913)],void 0===(i=function(e,t,r,n,i,c,o,a,s,u,p,l){return d=s.declared(p),r(y,d),y.prototype.destroy=function(){this.connectionStatus="disconnected"},Object.defineProperty(y.prototype,"connectionError",{get:function(){if(this.errorString)return new a("stream-controller",this.errorString)},enumerable:!0,configurable:!0}),y.prototype.on=function(e,t){"data-received"===e&&(this._enabledDataRecieved=!0,this._proxy.enableEvent("data-received",!0));var r=this.inherited(arguments,[e,t]),n=this;return{remove:function(){r.remove(),n.hasEventListener("data-received")||n._proxy.enableEvent("data-received",!1)}}},y.prototype.queryLatestObservations=function(e,t){var r=this;return this._proxy.queryLatestObservations(this._cleanUpQuery(e),t).then(function(e){var t=u.fromJSON(e);return t.features.forEach(function(e){e.layer=r.layer,e.sourceLayer=r.layer}),t})},y.prototype._createClientOptions=function(){var t=this,e=this.inherited(arguments);return i({},e,{setProperty:function(e){t.set(e.propertyName,e.value)}})},y.prototype._createTileRendererHash=function(){var e=this.inherited(arguments),t=this.layer;return e+"."+(t.filter&&JSON.stringify(t.filter.geometry)+"."+t.filter.where)+"."+(t.purgeOptions&&t.purgeOptions.age+"."+t.purgeOptions.displayCount)+"."+t.maximumTrackPoints},y.prototype._createServiceOptions=function(){return o(this,void 0,void 0,function(){var t,r,n,i,o,a,s,u;return c(this,function(e){return t=this.layer,r=t.capabilities,n=t.objectIdField,i=t.fields.map(function(e){return e.toJSON()}),o=t.fullExtent&&t.fullExtent.toJSON(),a=l.toJSONGeometryType(t.geometryType),s=t.timeInfo&&t.timeInfo.toJSON()||null,u=this.layer.source,[2,{type:"stream",maxRecordCount:r.query.maxRecordCount,tileMaxRecordCount:r.query.tileMaxRecordCount,capabilities:r,fields:i,fullExtent:o,geometryType:a,objectIdField:n,timeInfo:s,source:this.layer.parsedUrl.path,streamUrls:u.sourceJSON.streamUrls,content:this.layer.parsedUrl.query,serviceFilter:function(e){if(!e)return null;var t={};return e.geometry&&(t.geometry=e.geometry.toJSON()),e.where&&(t.where=e.where),t}(this.layer.filter),purgeOptions:this.layer.purgeOptions,maximumTrackPoints:this.layer.maximumTrackPoints,enableDataRecieved:this._enabledDataRecieved}]})})},n([s.property()],y.prototype,"errorString",void 0),n([s.property({dependsOn:["errorString"],readOnly:!0})],y.prototype,"connectionError",null),n([s.property()],y.prototype,"connectionStatus",void 0),n([s.subclass("esri.views.2d.layers.StreamLayerView2D")],y);function y(){var e=null!==d&&d.apply(this,arguments)||this;return e._enabledDataRecieved=!1,e.errorString=null,e.connectionStatus="disconnected",e}var d}.apply(null,n))||(e.exports=i)}}]);