(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/MapImageLayer":1572})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1572:function(e,r,t){var a,o;a=[t.dj.c(e.i),r,t(5),t(1),t(0),t(91),t(9),t(10),t(29),t(6),t(12),t(120),t(4),t(2),t(530),t(100),t(541),t(159),t(124),t(122),t(213),t(155),t(542),t(529),t(101),t(528)],void 0===(o=function(e,r,m,t,a,o,i,p,n,s,l,y,u,d,h,c,g,v,f,b,w,S,x,I,M,O){return L=d.declared(I.TemporalLayer(S.ScaleRangeLayer(w.RefreshableLayer(x.SublayersOwner(g.ArcGISMapService(v.ArcGISService(f.OperationalLayer(b.PortalLayer(y.MultiOriginJSONMixin(c)))))))))),t(J,L),J.prototype.normalizeCtorArgs=function(e,r){return"string"==typeof e?m({url:e},r):e},J.prototype.load=function(e){var r=this,t=l.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then(function(){return r._fetchService(t)})),this.when()},J.prototype.readImageFormat=function(e,r){var t=r.supportedImageFormatTypes;return t&&-1<t.indexOf("PNG32")?"png32":"png24"},J.prototype.createExportImageParameters=function(e,r,t,a){var o=a&&a.pixelRatio||1;e&&10<=this.version&&(e=e.clone().shiftCentralMeridian());var i=new O.ExportImageParameters({layer:this,scale:h.getScale({extent:e,width:r})*o}),p=i.toJSON();i.layer=null,i.destroy();var n=!a||!a.rotation||this.version<10.3?{}:{rotation:-a.rotation},s=e&&e.spatialReference,l=s.wkid||JSON.stringify(s.toJSON());p.dpi*=o;var y={};if(a&&a.timeExtent){var u=a.timeExtent.toJSON(),d=u.start,c=u.end;d&&c&&d===c?y.time=""+d:null==d&&null==c||(y.time=(null==d?"null":d)+","+(null==c?"null":c))}return m({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:l,imageSR:l,size:r+","+t},p,n,y)},J.prototype.fetchImage=function(e,r,t,a){var o={responseType:"image"};a&&a.timestamp&&(o.query={_ts:a.timestamp}),a&&a.signal&&(o.signal=a.signal);var i=this.parsedUrl.path+"/export",p=m({},this.parsedUrl.query,this.createExportImageParameters(e,r,t,a),{f:"image",_ts:this.alwaysRefetch?Date.now():null});return null==p.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(o.query?o.query=m({},p,o.query):o.query=p,n(i,o).then(function(e){return e.data}).catch(function(e){if(u.isAbortError(e))throw e;throw new s("mapimagelayer:image-fetch-error","Unable to load image: "+i,{error:e})})):u.reject(new s("mapimagelayer:dynamiclayer-not-supported","service "+this.url+" doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.",{query:p}))},J.prototype._fetchService=function(a){return p(this,void 0,void 0,function(){var r,t;return i(this,function(e){switch(e.label){case 0:return this.sourceJSON?(this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}),[2]):[4,n(this.parsedUrl.path,{query:m({f:"json"},this.parsedUrl.query),signal:a})];case 1:return r=e.sent(),t=r.data,r.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl}),[2]}})})},a([d.property()],J.prototype,"alwaysRefetch",void 0),a([d.property()],J.prototype,"dpi",void 0),a([d.property()],J.prototype,"gdbVersion",void 0),a([d.property({json:{read:!1,write:!1}})],J.prototype,"popupEnabled",void 0),a([d.property()],J.prototype,"imageFormat",void 0),a([d.reader("imageFormat",["supportedImageFormatTypes"])],J.prototype,"readImageFormat",null),a([d.property({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],J.prototype,"imageMaxHeight",void 0),a([d.property({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],J.prototype,"imageMaxWidth",void 0),a([d.property()],J.prototype,"imageTransparency",void 0),a([d.property({json:{read:!1,write:!1}})],J.prototype,"labelsVisible",void 0),a([d.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],J.prototype,"isReference",void 0),a([d.property({type:["ArcGISMapServiceLayer"]})],J.prototype,"operationalLayerType",void 0),a([d.property()],J.prototype,"sourceJSON",void 0),a([d.property()],J.prototype,"sublayers",void 0),a([d.property({type:["show","hide","hide-children"]})],J.prototype,"listMode",void 0),a([d.property({json:{read:!1},readOnly:!0,value:"map-image"})],J.prototype,"type",void 0),a([d.property(M.url)],J.prototype,"url",void 0),a([d.subclass("esri.layers.MapImageLayer")],J);function J(e,r){var t=L.call(this,e)||this;return t.alwaysRefetch=!1,t.dpi=96,t.gdbVersion=null,t.imageFormat="png24",t.imageMaxHeight=2048,t.imageMaxWidth=2048,t.imageTransparency=!0,t.labelsVisible=!1,t.isReference=null,t.operationalLayerType="ArcGISMapServiceLayer",t.sourceJSON=null,t.sublayers=null,t.type="map-image",t.url=null,t}var L}.apply(null,a))||(e.exports=o)}}]);