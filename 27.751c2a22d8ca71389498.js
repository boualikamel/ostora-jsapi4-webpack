(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/StreamLayer":1576,"esri/views/layers/support/FeatureFilter":1732})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1576:function(e,t,c){var r,i;r=[c.dj.c(e.i),c(14),c(8),c(3),c(4),c(31),c(37),c(154),c(126),c(1732)],void 0===(i=function(e,i,n,t,r,o,s,a,l,p){var u=t.getLogger("esri.layers.StreamLayer");return a.createSubclass({declaredClass:"esri.layers.StreamLayer",constructor:function(e){this._set("type","stream"),this._set("operationalLayerType","ArcGISStreamLayer"),this.outFields=["*"],"WebSocket"in window||(this.loadError=new Error("WebSocket is not supported in this browser"),console.log("WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))},normalizeCtorArgs:function(e,t){return"string"==typeof e?n.mixin({},{url:e},t):e&&e.sourceJSON?n.mixin({},{collectionLayer:e},t):(e&&e.filter&&(e.filter=this._makeFilter({where:e.filter.where||null,geometry:e.filter.geometry||null}),delete e.geometryDefinition,delete e.definitionExpression),e)},properties:{definitionExpression:{value:null,get:function(){return this.filter.where},set:function(e){var t=this._makeFilter({where:e});this._set("filter",t),this.notifyChange("definitionExpression")}},listMode:{type:["show","hide"]},geometryDefinition:{value:null,get:function(){return this.filter.geometry},set:function(e){var t=this._makeFilter({geometry:e});this._set("filter",t),this.notifyChange("geometryDefinition")}},filter:{value:null,type:p,constructOnly:!1},maxReconnectAttempts:10,maximumTrackPoints:1,operationalLayerType:{type:["ArcGISStreamLayer"],value:"ArcGISStreamLayer"},purgeOptions:{value:{},set:function(e){var t=this._get("purgeOptions"),r={},i=!1;if(e&&"object"==typeof e&&t!==e)return e.hasOwnProperty("displayCount")&&0<e.displayCount&&(r.displayCount=e.displayCount,i=!0),e.hasOwnProperty("age")&&0<=e.age&&(r.age=e.age,i=!0),i?this._set("purgeOptions",r):void 0}},socketDirection:"subscribe",sourceJSON:null,spatialReference:{value:o.WGS84,type:o,json:{origins:{service:{read:{source:"spatialReference"}}}}},type:{value:"stream",json:{read:!1}},url:{set:function(e){var t=l.sanitizeUrlWithLayerId(this,e,u);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}}},createGraphicsSource:function(){return r.create(function(t){c.e(48).then(function(){var e=[c(2802)];t.apply(null,e)}.bind(this)).catch(c.oe)}).then(function(e){var t=new e({layer:this});return t.when(function(){return this.emit("graphics-source-create",{graphicsSource:t}),t}.bind(this))}.bind(this))},loadFromPortal:function(e){return e=n.mixin(e,{supportedTypes:["Stream Service"]}),this.inherited(arguments,[e])},_initLayerProperties:function(e){this.source=e;var t=this.source.relatedFeaturesInfo,r=n.mixin({},e.sourceJSON,t?{objectIdField:t.joinField}:{});t&&(this.source.relatedFeaturesInfo.outFields=this.outFields?this.outFields.splice(0):null),this.sourceJSON=e.sourceJSON,this.read(r,{origin:"service",url:this.parsedUrl}),t&&t.outFields&&"*"!==t.outFields[0]&&(t.outFields=t.outFields.map(function(e){return e.toLowerCase()})),this._verifyFields(),this.useQueryTimestamp=i("ie")||i("safari")},_makeFilter:function(e){var t;if(e){var r,i=e.hasOwnProperty("where")?e.where:this.filter.where;if(e.hasOwnProperty("geometry")){if((r=e.geometry)&&!r.hasOwnProperty("xmin"))throw console.log("geometry is not an extent: ",r),new Error("Cannot set filter. Only Extent is supported for the geometry filter");r&&!r.declaredClass&&(r=new s(r))}else r=this.filter&&this.filter.geometry||null;t={where:i,geometry:r}}else t={geometry:null,where:null};return t},_readObjectIdField:function(e){if(e.objectIdField)return e.objectIdField;if(e.fields){for(var t,r=e.fields,i=0,n=r.length;i<n;i++){var o=r[i];if("esriFieldTypeOID"===o.type){t=o.name;break}}if(!t){var s=1,a=[];if(r.forEach(function(e){"objectid"===e.name.split("_")[0]&&a.push(e.name)}),a.length)for(;-1!==a.indexOf("objectid_"+s);)s+=1;t="objectid_"+s}return t}},_verifyFields:function(){}})}.apply(null,r))||(e.exports=i)},1732:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(0),r(1),r(5),r(28),r(131),r(63),r(17),r(7),r(8),r(2),r(38),r(301)],void 0===(n=function(e,t,r,i,p,n,o,s,a,l,u,c,d,y){var h,f,m=new a.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),w=new a.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return h=c.declared(l.JSONSupport),i(v,h),(f=v).prototype.writeWhere=function(e,t){t.where=e||"1=1"},v.prototype.enable=function(){this._set("enabled",!0)},v.prototype.createQuery=function(e){void 0===e&&(e={});var t=this,r=t.where,i=t.geometry,n=t.spatialRelationship,o=t.timeExtent,s=t.objectIds,a=t.units,l=t.distance;return new y(p({geometry:u.clone(i),objectIds:u.clone(s),spatialRelationship:n,timeExtent:u.clone(o),where:r,units:a,distance:l},e))},v.prototype.clone=function(){var e=this,t=e.where,r=e.geometry,i=e.spatialRelationship,n=e.hiddenIds,o=e.timeExtent,s=e.objectIds,a=e.units,l=e.distance,p=new Set;return n.forEach(function(e){return p.add(e)}),new f({geometry:u.clone(r),hiddenIds:p,objectIds:u.clone(s),spatialRelationship:i,timeExtent:u.clone(o),where:t,units:a,distance:l})},r([c.property({type:String})],v.prototype,"where",void 0),r([c.writer("where")],v.prototype,"writeWhere",null),r([c.property({types:n.geometryTypes,json:{read:d.fromJSON,write:!0}})],v.prototype,"geometry",void 0),r([c.property({type:String,json:{read:{source:"spatialRel",reader:m.read},write:{target:"spatialRel",writer:m.write}}})],v.prototype,"spatialRelationship",void 0),r([c.property({json:{write:function(e,t,r){return t[r]=s.valuesOfSet(e)},read:function(e){return s.createSetFromValues(e)}}})],v.prototype,"hiddenIds",void 0),r([c.property({type:Number,json:{write:{overridePolicy:function(e){return{enabled:0<e}}}}})],v.prototype,"distance",void 0),r([c.property({type:[Number],json:{write:!0}})],v.prototype,"objectIds",void 0),r([c.property({type:String,json:{read:w.read,write:{writer:w.write,overridePolicy:function(e){return{enabled:e&&0<this.distance}}}}})],v.prototype,"units",void 0),r([c.property({type:o,json:{write:!0}})],v.prototype,"timeExtent",void 0),r([c.property({readOnly:!0})],v.prototype,"enabled",void 0),f=r([c.subclass("esri.views.layers.support.FeatureFilter")],v);function v(e){var t=h.call(this,e)||this;return t.where=null,t.geometry=null,t.spatialRelationship="intersects",t.hiddenIds=new Set,t.distance=void 0,t.objectIds=null,t.units=null,t.timeExtent=null,t.enabled=!1,t}}.apply(null,i))||(e.exports=n)}}]);