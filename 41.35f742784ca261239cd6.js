(function(){(this||window).webpackJsonp.registerAbsMids({"esri/renderers/visualVariables/support/visualVariableUtils":130,"esri/tasks/PrintTask":1593,"esri/tasks/support/GPMessage":1672,"dojox/gfx/_base":1681,"dojox/gfx/matrix":1712,"dojo/_base/Color":1751,"dojox/gfx/shape":1877,"dojox/gfx/canvas":2177,"dojox/gfx/path":2178,"dojox/gfx/arc":2179,"dojox/gfx/decompose":2180,"dojox/gfx/bezierutils":2181,"esri/tasks/Geoprocessor":2182,"esri/layers/support/MapImage":2183,"esri/tasks/support/DataFile":2184,"esri/tasks/support/JobInfo":2185,"esri/tasks/support/LinearUnit":2186,"esri/tasks/support/ParameterValue":2187,"esri/tasks/support/RasterData":2188,"esri/tasks/support/fileFormat":2189,"esri/tasks/support/layoutTemplate":2190,"esri/tasks/support/printTaskUtils":2191,"esri/tasks/support/PrintTemplate":2192})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[41,3],{130:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(24),r(89),r(3),r(12),r(218),r(323)],void 0===(n=function(e,t,P,r,i,k,N,S){function c(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(function(e){return"color"===e.type})[0]:e;if(i){if("esri.renderers.visualVariables.ColorVariable"!==i.declaredClass)return void M.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");var n="number"==typeof t,a=n?null:t,s=a&&a.attributes,o=n?t:null,l=i.field,u=i.cache,h=u.ipData,c=u.hasExpression,p=i.cache.compiledFunc;if(!l&&!c){var d=i.stops;return d&&d[0]&&d[0].color}if("number"!=typeof o)if(c){if(!k.isSome(r)||!k.isSome(r.arcade))return void M.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,g=y.getViewInfo(f),v=y.createExecContext(a,g);if(!p){var x=y.createSyntaxTree(i.valueExpression);p=y.createFunction(x),i.cache.compiledFunc=p}o=y.executeFunction(p,v)}else s&&(o=s[l]);var m=i.normalizationField,b=s?parseFloat(s[m]):void 0;if(null!=o&&(!m||n||!isNaN(b)&&0!==b)){isNaN(b)||n||(o/=b);var S=F(o,h);if(S){var _=S[0],w=S[1],T=_===w?i.stops[_].color:P.blendColors(i.stops[_].color,i.stops[w].color,S[2],k.isSome(r)?r.color:void 0);return new P(T)}}}}function p(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(function(e){return"opacity"===e.type})[0]:e;if(i){if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void M.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");var n="number"==typeof t,a=n?null:t,s=a&&a.attributes,o=n?t:null,l=i.field,u=i.cache,h=u.ipData,c=u.hasExpression,p=i.cache.compiledFunc;if(!l&&!c){var d=i.stops;return d&&d[0]&&d[0].opacity}if("number"!=typeof o)if(c){if(k.isNone(r)||k.isNone(r.arcade))return void M.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,g=y.getViewInfo(f),v=y.createExecContext(a,g);if(!p){var x=y.createSyntaxTree(i.valueExpression);p=y.createFunction(x),i.cache.compiledFunc=p}o=y.executeFunction(p,v)}else s&&(o=s[l]);var m=i.normalizationField,b=s?parseFloat(s[m]):void 0;if(null!=o&&(!m||n||!isNaN(b)&&0!==b)){isNaN(b)||n||(o/=b);var S=F(o,h);if(S){var _=S[0],w=S[1];if(_===w)return i.stops[_].opacity;var T=i.stops[_].opacity;return T+(i.stops[w].opacity-T)*S[2]}}}}function d(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(function(e){return"rotation"===e.type})[0]:e;if(i){if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void M.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");var n=i.axis||"heading",a="heading"===n&&"arithmetic"===i.rotationType?90:0,s="heading"===n&&"arithmetic"===i.rotationType?-1:1,o="number"==typeof t?null:t,l=o&&o.attributes,u=i.field,h=i.cache.hasExpression,c=i.cache.compiledFunc,p=0;if(!u&&!h)return p;if(h){if(k.isNone(r)||k.isNone(r.arcade))return void M.error("Use of arcade expressions requires an arcade context");var d={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,y=f.getViewInfo(d),g=f.createExecContext(o,y);if(!c){var v=f.createSyntaxTree(i.valueExpression);c=f.createFunction(v),i.cache.compiledFunc=c}p=f.executeFunction(c,g)}else l&&(p=l[u]||0);return"number"!=typeof p||isNaN(p)?null:a+s*p}}function f(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(function(e){return"size"===e.type})[0]:e;if(i){if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void M.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");var n=a(function(e,t,r){var i,n,a,s,o="number"==typeof t,l=o?null:t,u=l&&l.attributes,h=o?t:null,c=e.cache.isScaleDriven,p=e.cache.compiledFunc;if(c){var d=k.isSome(r)?r.scale:void 0,f=k.isSome(r)?r.view:void 0;h=null==d||f&&"3d"===f.type?(a=n=null,s=(i=e).stops,a=s?(n=s[0].value,s[s.length-1].value):(n=i.minDataValue||0,i.maxDataValue||0),(n+a)/2):d}else if(!o)switch(e.inputValueType){case"expression":if(k.isNone(r)||k.isNone(r.arcade))return void M.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,v=g.getViewInfo(y),x=g.createExecContext(l,v);if(!p){var m=g.createSyntaxTree(e.valueExpression);p=g.createFunction(m),e.cache.compiledFunc=p}h=g.executeFunction(p,x);break;case"field":u&&(h=u[e.field]);break;case"unknown":h=null}if(!S.isValidNumber(h))return null;if(o||!e.normalizationField)return h;var b=u?parseFloat(u[e.normalizationField]):null;return S.isValidNumber(b)&&0!==b?h/b:null}(i,t,r),i,t,r,i.cache.ipData);return null==n||isNaN(n)?0:n}}function D(e,t,r){return null==e?null:S.isSizeVariable(e)?f(e,t,r):S.isValidNumber(e)?e:null}function R(e,t,r){return S.isValidNumber(r)&&r<e?r:S.isValidNumber(t)&&e<t?t:e}function a(e,t,r,i,n){switch(t.transformationType){case"additive":return L=r,C=i,e+(D((M=t).minSize,L,C)||M.minDataValue);case"constant":return _=r,w=i,T=(S=t).stops,null==(P=T&&T.length&&T[0].size)&&(P=S.minSize),D(P,_,w);case"clamped-linear":return function(e,t,r,i){var n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),a=D(t.minSize,r,i),s=D(t.maxSize,r,i),o=k.isSome(i)?i.shape:void 0;if(e<=t.minDataValue)return a;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&o){var l="circle"===o,u=l?O*Math.pow(a/2,2):a*a,h=u+n*((l?O*Math.pow(s/2,2):s*s)-u);return l?2*Math.sqrt(h/O):Math.sqrt(h)}return a+n*(s-a)}(e,t,r,i);case"proportional":return d=e,f=t,y=r,g=i,v=k.isSome(g)?g.shape:void 0,x=d/f.minDataValue,m=D(f.minSize,y,g),b=D(f.maxSize,y,g),R("circle"===v?2*Math.sqrt(x*Math.pow(m/2,2)):"square"===v||"diamond"===v||"image"===v?Math.sqrt(x*Math.pow(m,2)):x*m,m,b);case"stops":return function(e,t,r,i,n){var a=F(e,n),s=a[0],o=a[1],l=a[2];if(s===o)return D(t.stops[s].size,r,i);var u=D(t.stops[s].size,r,i);return u+(D(t.stops[o].size,r,i)-u)*l}(e,t,r,i,n);case"real-world-size":return a=e,s=t,o=r,l=i,u=(k.isSome(l)&&l.resolution?l.resolution:1)*N.meterIn[s.valueUnit],h=D(s.minSize,o,l),c=D(s.maxSize,o,l),R("area"===(p=s.valueRepresentation)?2*Math.sqrt(a/O)/u:"radius"===p||"distance"===p?2*a/u:a/u,h,c);case"identity":return e;case"unknown":return null}var a,s,o,l,u,h,c,p,d,f,y,g,v,x,m,b,S,_,w,T,P,M,L,C}function F(r,e){if(e){var i=0,n=e.length-1;return e.some(function(e,t){return r<e?(n=t,!0):(i=t,!1)}),[i,n,(r-e[i])/(e[n]-e[i])]}}Object.defineProperty(t,"__esModule",{value:!0});var M=i.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),u=new r,O=Math.PI;t.getColor=c,t.getOpacity=p,t.getRotationAngle=d,t.getSize=f,t.getSizeFromNumberOrVariable=D,t.getSizeForValue=a,t.getSizeRangeAtScale=function(e,t,r){var i=e.cache.isScaleDriven,n=r&&"3d"===r.type;if(!(i&&n||t))return null;var a={scale:t,view:r},s=D(e.minSize,u,a),o=D(e.maxSize,u,a);if(null!=s||null!=o){if(o<s){var l=o;o=s,s=l}return{minSize:s,maxSize:o}}},t.getVisualVariableValues=function(e,r,i){if(e.visualVariables){for(var n=[],t=[],a=[],s=[],o=[],l=0,u=e.visualVariables;l<u.length;l++){var h=u[l];switch(h.type){case"color":t.push(h);break;case"opacity":a.push(h);break;case"rotation":o.push(h);break;case"size":s.push(h)}}return t.forEach(function(e){var t=c(e,r,i);n.push({variable:e,value:t})}),a.forEach(function(e){var t=p(e,r,i);n.push({variable:e,value:t})}),o.forEach(function(e){var t=d(e,r,i);n.push({variable:e,value:t})}),s.forEach(function(e){var t=f(e,r,i);n.push({variable:e,value:t})}),n.filter(function(e){return null!=e.value})}}}.apply(null,i))||(e.exports=n)},1593:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(10),r(1),r(0),r(9),r(2177),r(125),r(29),r(63),r(17),r(8),r(4),r(15),r(22),r(2),r(152),r(130),r(2182),r(303),r(2189),r(2190),r(2191),r(2192),r(301)],void 0===(n=function(e,t,h,f,r,i,w,o,s,a,T,n,_,l,y,g,u,P,d,c,p,M,L,C,k,v){function N(e){return e&&(e.path||"image/svg+xml"===e.contentType)}var x,D={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},R=new n.default({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),m=new n.default({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),b=new v({returnGeometry:!0});return x=u.declared(p),r(S,x),Object.defineProperty(S.prototype,"_geoprocessor",{get:function(){return new c({url:this.url})},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"mode",{get:function(){return this._gpMetadata&&this._gpMetadata.executionType?m.fromJSON(this._gpMetadata.executionType):"sync"},enumerable:!0,configurable:!0}),S.prototype.execute=function(t,r){var i=this,e=this.url,n=e.lastIndexOf("/GPServer/");return 0<n&&(e=e.slice(0,n+9)),l.resolve().then(function(){return i._gpServerUrl===e?{data:i._gpMetadata}:(i._gpServerUrl=e,a(e,{query:{f:"json"}}))}).then(function(e){return i._gpMetadata=e.data,i._cimVersion=i._gpMetadata.cimVersion,i._is11xService=!!i._cimVersion,i._getGpPrintParams(t)}).then(function(e){function t(e){return"sync"===i.mode?e.results&&e.results[0]&&e.results[0].value:i._geoprocessor.getResultData(e.jobId,"Output_File",r).then(function(e){return e.value})}return"async"===i.mode?i._geoprocessor.submitJob(e,r).then(function(e){return i._geoprocessor.waitForJobCompletion(e.jobId,{interval:i.updateDelay}).then(t)}):i._geoprocessor.execute(e,r).then(t)})},S.prototype._createOperationalLayers=function(h,c){return f(this,void 0,void 0,function(){var t,r,i,n,a,s,o,l,u;return w(this,function(e){switch(e.label){case 0:t=[],r={layerView:null,printTemplate:c,view:h},i=0,c.preserveScale&&(i=c.outScale||h.scale),n=C.getVisibleLayerViews(h,i),a=0,s=n,e.label=1;case 1:return a<s.length?(o=s[a],!(l=o.layer).loaded||C.isGroupLayer(l)?[3,26]:(u=void 0,r.layerView=o,C.isBingMapsLayer(l)?(u=this._createBingMapsLayerJSON(l),[3,25]):[3,2])):[3,27];case 2:return C.isCSVLayer(l)?[4,this._createCSVLayerJSON(l,r)]:[3,4];case 3:return u=e.sent(),[3,25];case 4:return C.isFeatureLayer(l)?[4,this._createFeatureLayerJSON(l,r)]:[3,6];case 5:return u=e.sent(),[3,25];case 6:return C.isGraphicsLayer(l)?[4,this._createGraphicsLayerJSON(l,r)]:[3,8];case 7:return u=e.sent(),[3,25];case 8:return C.isImageryLayer(l)?(u=this._createImageryLayerJSON(l),[3,25]):[3,9];case 9:return C.isKMLLayer(l)?[4,this._createKMLLayerJSON(l,r)]:[3,11];case 10:return u=e.sent(),[3,25];case 11:return C.isMapImageLayer(l)?(u=this._createMapImageLayerJSON(l,r),[3,25]):[3,12];case 12:return C.isMapNotesLayer(l)?[4,this._createMapNotesLayerJSON(r)]:[3,14];case 13:return u=e.sent(),[3,25];case 14:return C.isOpenStreetMapLayer(l)?(u=this._createOpenStreetMapLayerJSON(),[3,25]):[3,15];case 15:return C.isStreamLayer(l)?[4,this._createStreamLayerJSON(l,r)]:[3,17];case 16:return u=e.sent(),[3,25];case 17:return C.isTileLayer(l)?(u=this._createTileLayerJSON(l),[3,25]):[3,18];case 18:return C.isVectorTileLayer(l)?[4,this._createVectorTileLayerJSON(l,r)]:[3,20];case 19:return u=e.sent(),[3,25];case 20:return C.isWebTileLayer(l)?(u=this._createWebTileLayerJSON(l),[3,25]):[3,21];case 21:return C.isWMSLayer(l)?(u=this._createWMSLayerJSON(l),[3,25]):[3,22];case 22:return C.isWMTSLayer(l)?(u=this._createWMTSLayerJSON(l),[3,25]):[3,23];case 23:return[4,this._createScreenshotJSON(l,r)];case 24:u=e.sent(),e.label=25;case 25:u&&(Array.isArray(u)?t.push.apply(t,u):(u.id=l.id,u.title=this._legendLayerNameMap[l.id]||l.title,u.opacity=l.opacity,u.minScale=l.minScale||0,u.maxScale=l.maxScale||0,t.push(u))),e.label=26;case 26:return a++,[3,1];case 27:return i&&t.forEach(function(e){e.minScale=0,e.maxScale=0}),h.graphics&&h.graphics.length?[4,this._createFeatureCollectionJSON(null,h.graphics,c)]:[3,29];case 28:(u=e.sent())&&t.push(u),e.label=29;case 29:return[2,t]}})})},S.prototype._createBingMapsLayerJSON=function(e){return{culture:e.culture,key:e.key,type:"BingMaps"+("aerial"===e.style?"Aerial":"hybrid"===e.style?"Hybrid":"Road")}},S.prototype._createCSVLayerJSON=function(i,e){var n=e.layerView,a=e.printTemplate;return f(this,void 0,void 0,function(){var t,r;return w(this,function(e){switch(e.label){case 0:return this._legendLayers&&this._legendLayers.push({id:i.id}),this._is11xService?(t={type:"CSV"},i.write(t,{origin:"web-map"}),delete t.popupInfo,delete t.layerType,t.showLabels=a.showLabels&&i.labelsVisible,[3,3]):[3,1];case 1:return[4,this._getGraphics(n)];case 2:return r=e.sent(),[2,this._createFeatureCollectionJSON(i,r,a)];case 3:return[2,t]}})})},S.prototype._createFeatureCollectionJSON=function(b,S,_){return f(this,void 0,void 0,function(){var o,l,u,h,c,p,t,d,r,i,n,a,s,f,y,g,v,x,m=this;return w(this,function(e){switch(e.label){case 0:return o=b,l=C.createPolygonLayer(),u=C.createPolylineLayer(),h=C.createPointLayer(),c=C.createMultipointLayer(),(p=C.createPointLayer()).layerDefinition.name="textLayer",delete p.layerDefinition.drawingInfo,o&&("esri.layers.FeatureLayer"===o.declaredClass||"esri.layers.StreamLayer"===o.declaredClass?l.layerDefinition.name=u.layerDefinition.name=h.layerDefinition.name=c.layerDefinition.name=this._legendLayerNameMap[o.id]||o.get("arcgisProps.title")||o.title:"esri.layers.GraphicsLayer"===o.declaredClass&&(S=o.graphics.items)),o&&o.renderer?(t=o.renderer.toJSON(),l.layerDefinition.drawingInfo.renderer=t,u.layerDefinition.drawingInfo.renderer=t,h.layerDefinition.drawingInfo.renderer=t,c.layerDefinition.drawingInfo.renderer=t):(delete l.layerDefinition.drawingInfo,delete u.layerDefinition.drawingInfo,delete h.layerDefinition.drawingInfo,delete c.layerDefinition.drawingInfo),r=o&&o.fields,i=o&&o.renderer,r&&i&&"function"==typeof i.collectRequiredFields?(n=new Set,[4,i.collectRequiredFields(n,r)]):[3,2];case 1:e.sent(),d=T.valuesOfSet(n),e.label=2;case 2:r&&(a=r.map(function(e){return e.toJSON()}),l.layerDefinition.fields=a,u.layerDefinition.fields=a,h.layerDefinition.fields=a,c.layerDefinition.fields=a),s=S&&S.length,y=function(t){var r,i,n,a,s;return w(this,function(e){switch(e.label){case 0:return!1!==(r=S[t]||S.getItemAt(t)).visible&&r.geometry?((f=r.toJSON()).hasOwnProperty("popupTemplate")&&delete f.popupTemplate,f.geometry&&f.geometry.z&&delete f.geometry.z,f.symbol&&f.symbol.outline&&"esriCLS"===f.symbol.outline.type&&!g._is11xService?[2,"continue"]:(!g._is11xService&&f.symbol&&f.symbol.outline&&f.symbol.outline.color&&f.symbol.outline.color[3]&&(f.symbol.outline.color[3]=255),i=o&&o.renderer&&("valueExpression"in o.renderer&&o.renderer.valueExpression||"hasVisualVariables"in o.renderer&&o.renderer.hasVisualVariables()),!f.symbol&&o&&o.renderer&&i&&!g._is11xService?[4,(n=o.renderer).getSymbolAsync(r)]:[3,2])):[2,"continue"];case 1:if(!(a=e.sent()))return[2,"continue"];f.symbol=a.toJSON(),"hasVisualVariables"in n&&n.hasVisualVariables()&&C.applyVisualVariables(f.symbol,{renderer:n,graphic:r,symbol:a}),e.label=2;case 2:return f.symbol&&(f.symbol.angle||delete f.symbol.angle,N(f.symbol)?f.symbol=g._convertSvgToPictureMarkerSymbolJson(f.symbol):f.symbol.text&&delete f.attributes),_&&_.forceFeatureAttributes||!d||!d.length||(s={},d.forEach(function(e){f.attributes&&f.attributes.hasOwnProperty(e)&&(s[e]=f.attributes[e])}),f.attributes=s),"polygon"===r.geometry.type?l.featureSet.features.push(f):"polyline"===r.geometry.type?u.featureSet.features.push(f):"point"===r.geometry.type?f.symbol&&f.symbol.text?p.featureSet.features.push(f):h.featureSet.features.push(f):"multipoint"===r.geometry.type?c.featureSet.features.push(f):"extent"===r.geometry.type&&(f.geometry=P.fromExtent(r.geometry).toJSON(),l.featureSet.features.push(f)),[2]}})},g=this,v=0,e.label=3;case 3:return v<s?[5,y(v)]:[3,6];case 4:e.sent(),e.label=5;case 5:return v++,[3,3];case 6:return(x=[l,u,c,h,p].filter(function(e){return 0<e.featureSet.features.length})).forEach(function(e){var t=e.featureSet.features.every(function(e){return e.symbol});!t||_&&_.forceFeatureAttributes||e.featureSet.features.forEach(function(e){delete e.attributes}),t&&delete e.layerDefinition.drawingInfo,e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&m._convertSvgRenderer(e.layerDefinition.drawingInfo.renderer)}),[2,x.length?{featureCollection:{layers:x}}:null]}})})},S.prototype._createFeatureLayerJSON=function(c,p){return f(this,void 0,void 0,function(){var t,r,i,n,a,s,o,l,u,h;return w(this,function(e){switch(e.label){case 0:return this._legendLayers&&this._legendLayers.push({id:c.id}),r=c.renderer,c.featureReduction||r&&"dot-density"===r.type?[2,this._createScreenshotJSON(c,p)]:(i=p.layerView,n=p.printTemplate,a=p.view,s=r&&("valueExpression"in r&&r.valueExpression||"hasVisualVariables"in r&&r.hasVisualVariables()),o=c.source&&"feature-layer"!==c.source.type,!this._is11xService&&s||c.featureReduction||o||!r||"field"in r&&null!=r.field&&("string"!=typeof r.field||!c.getField(r.field))?[3,1]:(t={},this._setURLandToken(t,c),c.write(t,{origin:"web-map"}),delete t.layerType,delete t.popupInfo,delete t.visibility,t.showLabels=n.showLabels&&c.labelsVisible,t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.renderer&&(this._convertSvgRenderer(t.layerDefinition.drawingInfo.renderer),"visualVariables"in r&&r.visualVariables&&r.visualVariables[0]&&"size"===(l=r.visualVariables[0]).type&&l.maxSize&&"number"!=typeof l.maxSize&&l.minSize&&"number"!=typeof l.minSize&&(u=d.getSizeRangeAtScale(l,a.scale),t.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=u.minSize,t.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=u.maxSize)),[3,4]));case 1:return[4,this._getGraphics(i)];case 2:return h=e.sent(),[4,this._createFeatureCollectionJSON(c,h,n)];case 3:t=e.sent(),e.label=4;case 4:return[2,t]}})})},S.prototype._createGraphicsLayerJSON=function(t,e){var r=e.printTemplate;return f(this,void 0,void 0,function(){return w(this,function(e){return[2,this._createFeatureCollectionJSON(t,null,r)]})})},S.prototype._createImageryLayerJSON=function(e){this._legendLayers&&this._legendLayers.push({id:e.id});var t={bandIds:e.bandIds,compressionQuality:e.compressionQuality,format:e.format,interpolation:e.interpolation};if((e.mosaicRule||e.definitionExpression)&&(t.mosaicRule=e.exportImageServiceParameters.mosaicRule.toJSON()),e.renderingRule||e.renderer)if(this._is11xService)e.renderingRule&&(t.renderingRule=e.renderingRule.toJSON()),e.renderer&&(t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.renderer.toJSON());else{var r=e.exportImageServiceParameters.combineRendererWithRenderingRule();r&&(t.renderingRule=r.toJSON())}return this._setURLandToken(t,e),t},S.prototype._createKMLLayerJSON=function(l,u){return f(this,void 0,void 0,function(){var t,r,i,n,a,s,o;return w(this,function(e){switch(e.label){case 0:return t=u.printTemplate,this._is11xService?(r={type:"kml"},l.write(r,{origin:"web-map"}),delete r.layerType,r.url=g.normalize(l.url),[2,r]):(i=[],(n=u.layerView).allVisibleMapImages.forEach(function(e,t){var r={id:l.id+"_image"+t,type:"image",title:l.id,minScale:l.minScale||0,maxScale:l.maxScale||0,opacity:l.opacity,extent:e.extent};"data:image/png;base64,"===e.href.substr(0,22)?r.imageData=e.href.substr(22):r.url=e.href,i.push(r)}),a=n.allVisiblePoints.items.concat(n.allVisiblePolylines.items,n.allVisiblePolygons.items),o=[{id:l.id}],[4,this._createFeatureCollectionJSON(null,a,t)]);case 1:return s=h.apply(void 0,o.concat([e.sent()])),i.push(s),[2,i]}})})},S.prototype._createMapImageLayerJSON=function(e,t){var r,i=t.view,s={id:e.id,subLayerIds:[]},o=[],l=i.scale,u=function(e){var t=0===l,r=0===e.minScale||l<=e.minScale,i=0===e.maxScale||l>=e.maxScale;if(e.visible&&(t||r&&i))if(e.sublayers)e.sublayers.forEach(u);else{var n=e.toExportImageJSON().drawingInfo,a=e.toJSON();a.layerDefinition.drawingInfo=n,o.unshift(a),s.subLayerIds.push(e.id)}};return e.sublayers&&e.sublayers.forEach(u),o.length&&(r={layers:o=o.map(function(e){return{id:e.id,name:e.name,layerDefinition:e.layerDefinition}}),visibleLayers:s.subLayerIds},this._setURLandToken(r,e),this._legendLayers.push(s)),r},S.prototype._createMapNotesLayerJSON=function(e){var s=e.layerView,o=e.printTemplate;return f(this,void 0,void 0,function(){var t,r,i,n,a;return w(this,function(e){switch(e.label){case 0:t=[],r=0,i=s.graphicsViews,e.label=1;case 1:return r<i.length?(n=i[r],[4,this._createFeatureCollectionJSON(n,n.graphics,o)]):[3,4];case 2:(a=e.sent())&&t.push.apply(t,a.featureCollection.layers),e.label=3;case 3:return r++,[3,1];case 4:return[2,{featureCollection:{layers:t}}]}})})},S.prototype._createOpenStreetMapLayerJSON=function(){return{type:"OpenStreetMap"}},S.prototype._createScreenshotJSON=function(c,e){var p=e.printTemplate,d=e.view;return f(this,void 0,void 0,function(){var t,r,i,n,a,s,o,l,u,h;return w(this,function(e){switch(e.label){case 0:return t={type:"image"},r={format:"png",ignoreBackground:!0,layers:[c],rotation:0},i=this._ssExtent||d.extent.clone(),n=96,s=a=!0,p.exportOptions&&(0<(o=p.exportOptions).dpi&&(n=o.dpi),0<o.width&&(a=o.width%2==d.width%2),0<o.height&&(s=o.height%2==d.height%2)),"map-only"!==p.layout||!p.preserveScale||p.outScale&&p.outScale!==d.scale||96!==n||a&&s||(r.area={x:0,y:0,width:d.width,height:d.height},a||--r.area.width,s||--r.area.height,this._ssExtent||(l=d.toMap(y.createScreenPoint(r.area.width,r.area.height)),i.ymin=l.y,i.xmax=l.x,this._ssExtent=i)),t.extent=i.clone()._normalize(!0).toJSON(),[4,d.takeScreenshot(r)];case 1:return u=e.sent(),h=g.dataComponents(u.dataUrl),t.imageData=h.data,[2,t]}})})},S.prototype._createStreamLayerJSON=function(r,e){var i=e.layerView,n=e.printTemplate;return f(this,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return this._legendLayers&&this._legendLayers.push({id:r.id}),[4,this._getGraphics(i)];case 1:return t=e.sent(),[2,this._createFeatureCollectionJSON(r,t,n)]}})})},S.prototype._createTileLayerJSON=function(e){var t={};return this._setURLandToken(t,e),t},S.prototype._createVectorTileLayerJSON=function(n,a){return f(this,void 0,void 0,function(){var t,r,i;return w(this,function(e){return this._is11xService&&n.serviceUrl&&n.styleUrl&&(t=s.id&&s.id.findCredential(n.styleUrl),r=s.id&&s.id.findCredential(n.serviceUrl),!t&&!r||"2.1.0"!==this._cimVersion)?((i={type:"VectorTileLayer"}).styleUrl=g.normalize(n.styleUrl),t&&(i.token=t.token),r&&r.token!==i.token&&(i.additionalTokens=[{url:n.serviceUrl,token:r.token}]),[2,i]):[2,this._createScreenshotJSON(n,a)]})})},S.prototype._createWebTileLayerJSON=function(e){var t={type:"WebTiledLayer",urlTemplate:e.urlTemplate.replace(/\${/g,"{"),credits:e.copyright};return e.subDomains&&0<e.subDomains.length&&(t.subDomains=e.subDomains),t},S.prototype._createWMSLayerJSON=function(e){var t,r=[],i=function(e){e.visible&&(e.sublayers?e.sublayers.forEach(i):e.name&&r.unshift(e.name))};return e.sublayers&&e.sublayers.forEach(i),r.length&&(t={type:"wms",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,transparentBackground:e.imageTransparency,visibleLayers:r,url:g.normalize(e.url),version:e.version}),t},S.prototype._createWMTSLayerJSON=function(e){var t=e.activeLayer;return{type:"wmts",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,format:t.imageFormat,layer:t.id,style:t.styleId,tileMatrixSet:t.tileMatrixSetId,url:g.normalize(e.url)}},S.prototype._setURLandToken=function(e,t){if(t.url){e.url=g.normalize(t.url);var r=s.id&&s.id.findCredential(t.url);r&&(e.token=r.token)}},S.prototype._convertSvgToPictureMarkerSymbolJson=function(e){var t;this._canvasParent?(this._canvasSurface.clear(),this._canvasSurface.setDimensions(1024,1024)):(this._canvasParent=document.createElement("div"),this._canvasSurface=o.createSurface(this._canvasParent,1024,1024)),t="image/svg+xml"===e.contentType?this._canvasSurface.createObject(o.Image,{src:"data:image/svg+xml;base64,"+e.imageData,width:y.pt2px(e.width),height:y.pt2px(e.height),x:0,y:0}):this._canvasSurface.createObject(o.Path,e.path).setFill(e.color).setStroke(e.outline),"pendingRender"in this._canvasSurface&&this._canvasSurface._render(!0);var r=this._canvasSurface.rawNode.getContext("2d"),i=t.getBoundingBox(),n=Math.ceil(i.width+i.x),a=Math.ceil(i.height+i.y),s=r.getImageData(i.x,i.y,n,a);return r.canvas.width=n,r.canvas.height=a,r.putImageData(s,0,0),{type:"esriPMS",imageData:r.canvas.toDataURL("image/png").substr(22),angle:e.angle,contentType:"image/png",height:e.size?e.size:a-i.y,width:e.size?e.size:n-i.x,xoffset:e.xoffset,yoffset:e.yoffset}},S.prototype._convertSvgRenderer=function(e){var t=this,r=e.type;if("simple"===r&&N(e.symbol))e.symbol=this._convertSvgToPictureMarkerSymbolJson(e.symbol);else if("unique-value"===r||"class-breaks"===r){N(e.defaultSymbol)&&(e.defaultSymbol=this._convertSvgToPictureMarkerSymbolJson(e.defaultSymbol));var i=e["unique-value"===r?"uniqueValueInfos":"classBreakInfos"];i&&i.forEach(function(e){N(e.symbol)&&(e.symbol=t._convertSvgToPictureMarkerSymbolJson(e.symbol))})}},S.prototype._getGraphics=function(e){return e.queryFeatures(b).then(function(e){return e.features})},S.prototype._getPrintDefinition=function(s,o){return f(this,void 0,void 0,function(){var t,r,i,n,a;return w(this,function(e){switch(e.label){case 0:return t=s.view,r=t.spatialReference,n={},[4,this._createOperationalLayers(t,o)];case 1:return n.operationalLayers=e.sent(),i=n,a=this._ssExtent||s.extent||t.extent,r&&r.isWrappable&&(a=a.clone()._normalize(!0),r=a.spatialReference),i.mapOptions={extent:a&&a.toJSON(),spatialReference:r&&r.toJSON(),showAttribution:o.attributionVisible},this._ssExtent=null,t.rotation&&(i.mapOptions.rotation=-t.rotation),o.preserveScale&&(i.mapOptions.scale=o.outScale||t.scale),[2,i]}})})},S.prototype._getGpPrintParams=function(S){return f(this,void 0,void 0,function(){var t,r,i,n,a,s,o,l,u,h,c,p,d,f,y,g,v,x,m,b=this;return w(this,function(e){switch(e.label){case 0:return null==(t=S.template||new k).showLabels&&(t.showLabels=!0),r=t.exportOptions,n=L.toJSON(t.layout),r&&(a=r.dpi,i={dpi:a},"map_only"!==n.toLowerCase()&&""!==n||(s=r.width,o=r.height,i.outputSize=[s,o])),(l=t.layoutOptions)&&(c=h=void 0,"Miles"===l.scalebarUnit||"Kilometers"===l.scalebarUnit?(h="Kilometers",c="Miles"):"Meters"!==l.scalebarUnit&&"Feet"!==l.scalebarUnit||(h="Meters",c="Feet"),u={titleText:l.titleText,authorText:l.authorText,copyrightText:l.copyrightText,customTextElements:l.customTextElements,scaleBarOptions:{metricUnit:R.toJSON(h),metricLabel:D[h],nonMetricUnit:R.toJSON(c),nonMetricLabel:D[c]}}),p=null,l&&l.legendLayers&&(p=l.legendLayers.map(function(e){b._legendLayerNameMap[e.layerId]=e.title;var t={id:e.layerId};return e.subLayerIds&&(t.subLayerIds=e.subLayerIds),t})),[4,this._getPrintDefinition(S,t)];case 1:return(d=e.sent()).operationalLayers&&(y=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),g=/[\u0600-\u06FF]/,v=function(e){var t=e.text,r=e.font,i=r&&r.family&&r.family.toLowerCase();t&&r&&("arial"===i||"arial unicode ms"===i)&&(r.family=y.test(t)?"Arial Unicode MS":"Arial","normal"!==r.style&&g.test(t)&&(r.family="Arial Unicode MS"))},d.operationalLayers.forEach(function(e){e.featureCollection&&e.featureCollection.layers&&e.featureCollection.layers.forEach(function(e){e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&e.layerDefinition.drawingInfo.renderer.symbol&&"esriTS"===(f=e.layerDefinition.drawingInfo.renderer).symbol.type&&v(f.symbol),e.featureSet&&e.featureSet.features&&e.featureSet.features.forEach(function(e){e.symbol&&"esriTS"===e.symbol.type&&v(e.symbol)})})})),S.outSpatialReference&&(d.mapOptions.spatialReference=S.outSpatialReference.toJSON()),_.mixin(d,{exportOptions:i,layoutOptions:u}),_.mixin(d.layoutOptions,{legendOptions:{operationalLayers:null!=p?p:this._legendLayers.slice()}}),this._legendLayers.length=0,x=JSON.stringify(d),m={Web_Map_as_JSON:x,Format:M.toJSON(t.format),Layout_Template:n},S.extraParameters&&_.mixin(m,S.extraParameters),[2,m]}})})},i([u.property({dependsOn:["url"]})],S.prototype,"_geoprocessor",null),i([u.property()],S.prototype,"_gpMetadata",void 0),i([u.property({dependsOn:["_gpMetadata"],readOnly:!0})],S.prototype,"mode",null),i([u.property()],S.prototype,"updateDelay",void 0),i([u.subclass("esri.tasks.PrintTask")],S);function S(e){var t=x.call(this,e)||this;return t._ssExtent=null,t._legendLayers=[],t._legendLayerNameMap={},t._gpServerUrl=null,t._cimVersion=null,t._is11xService=!1,t._gpMetadata=null,t.updateDelay=1e3,t}}.apply(null,i))||(e.exports=n)},1672:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(17),r(7),r(2)],void 0===(n=function(e,t,r,i,n,a,s){var o,l=new n.default({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});return o=s.declared(a.JSONSupport),r(u,o),i([s.property({type:String,json:{write:!0}})],u.prototype,"description",void 0),i([s.property({type:String,json:{read:l.read,write:l.write}})],u.prototype,"type",void 0),i([s.subclass("esri.tasks.support.GPMessage")],u);function u(e){var t=o.call(this,e)||this;return t.description=null,t.type=null,t}}.apply(null,i))||(e.exports=n)},1681:function(e,t,r){var i,n;i=[r(25),r(21),r(1751),r(324),r(75),r(51),r(62),r(210),r(307)],void 0===(n=function(t,n,r,a,u,i,s,h,c){var o=n.getObject("dojox.gfx",!0),l=o._base={};o._hasClass=function(e,t){var r=e.getAttribute("className");return r&&0<=(" "+r+" ").indexOf(" "+t+" ")},o._addClass=function(e,t){var r=e.getAttribute("className")||"";(!r||(" "+r+" ").indexOf(" "+t+" ")<0)&&e.setAttribute("className",r+(r?" ":"")+t)},o._removeClass=function(e,t){var r=e.getAttribute("className");r&&e.setAttribute("className",r.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)"),"$1$2"))},l._getFontMeasurements=function(){var e,t,r={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};a("ie")&&((t=u.doc.documentElement.style.fontSize||"")||(u.doc.documentElement.style.fontSize="100%"));var i=h.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},u.body());for(e in r)r[i.style.fontSize=e]=16*Math.round(12*i.offsetHeight/16)/12/1e3;return a("ie")&&(u.doc.documentElement.style.fontSize=t),u.body().removeChild(i),r};var p=null;l._getCachedFontMeasurements=function(e){return!e&&p||(p=l._getFontMeasurements()),p};var d=null,f={};l._getTextBox=function(e,t,r){var i,n,a,s,o=arguments.length;if((i=d=d||h.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},u.body())).className="",(n=i.style).borderWidth="0",n.margin="0",n.padding="0",n.outline="0",1<o&&t)for(a in t)a in f||(n[a]=t[a]);if(2<o&&r&&(i.className=r),i.innerHTML=e,i.getBoundingClientRect){var l=i.getBoundingClientRect();s={l:l.left,t:l.top,w:l.width||l.right-l.left,h:l.height||l.bottom-l.top}}else s=c.getMarginBox(i);return i.innerHTML="",s},l._computeTextLocation=function(e,t,r,i){var n={};switch(e.align){case"end":n.x=e.x-t;break;case"middle":n.x=e.x-t/2;break;default:n.x=e.x}var a=i?.75:1;return n.y=e.y-r*a,n},l._computeTextBoundingBox=function(e){if(!o._base._isRendered(e))return{x:0,y:0,width:0,height:0};var t,r=e.getShape(),i=e.getFont()||o.defaultFont,n=e.getTextWidth(),a=o.normalizedLength(i.size);return{x:(t=l._computeTextLocation(r,n,a,!0)).x,y:t.y,width:n,height:a}},l._isRendered=function(e){for(var t=e.parent;t&&t.getParent;)t=t.parent;return null!==t};var y=0;l._getUniqueId=function(){for(var e;e=t._scopeName+"xUnique"+ ++y,s.byId(e););return e};var g,v=a("pointer-events")?"touchAction":null;return l._fixMsTouchAction=v?function(e){e.rawNode.style[v]="none"}:function(){},n.mixin(o,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(g={},function(e){var t=g[e];return t||((t=g[e]=new Function).prototype=o["default"+e]),new t}),normalizeColor:function(e){return e instanceof r?e:new r(e)},normalizeParameters:function(e,t){var r;if(t){var i={};for(r in e)r in t&&!(r in i)&&(e[r]=t[r])}return e},makeParameters:function(e,t){var r=null;if(!t)return n.delegate(e);var i={};for(r in e)r in i||(i[r]=n.clone(r in t?t[r]:e[r]));return i},formatNumber:function(e,t){var r=e.toString();if(0<=r.indexOf("e"))r=e.toFixed(4);else{var i=r.indexOf(".");0<=i&&5<r.length-i&&(r=e.toFixed(4))}return e<0?r:t?" "+r:r},makeFontString:function(e){return e.style+" "+e.variant+" "+e.weight+" "+e.size+" "+e.family},splitFontString:function(e){var t=o.getDefault("Font"),r=e.split(/\s+/);do{if(r.length<5)break;t.style=r[0],t.variant=r[1],t.weight=r[2];var i=r[3].indexOf("/");t.size=i<0?r[3]:r[3].substring(0,i);var n=4;i<0&&("/"==r[4]?n=6:"/"==r[4].charAt(0)&&(n=5)),n<r.length&&(t.family=r.slice(n).join(" "))}while(0);return t},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return o._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(e){return e*o.px_in_pt()},px2pt:function(e){return e/o.px_in_pt()},normalizedLength:function(e){if(0===e.length)return 0;if(2<e.length){var t=o.px_in_pt(),r=parseFloat(e);switch(e.slice(-2)){case"px":return r;case"pt":return r*t;case"in":return 72*r*t;case"pc":return 12*r*t;case"mm":return r*o.mm_in_pt*t;case"cm":return r*o.cm_in_pt*t}}return parseFloat(e)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(e,t){return e&&t&&e===t},switchTo:function(e){var t="string"==typeof e?o[e]:e;t&&(i.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(e){o[e]=t[e]}),"string"==typeof e?o.renderer=e:i.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(e){return o.renderer=o[e]&&o[e].Surface===o.Surface?e:null}))}}),o}.apply(null,i))||(e.exports=n)},1712:function(e,t,r){var i,n;i=[r(1681),r(21)],void 0===(n=function(e,a){var u=e.matrix={},t={};return u._degToRad=function(e){return t[e]||(t[e]=Math.PI*e/180)},u._radToDeg=function(e){return e/Math.PI*180},u.Matrix2D=function(e){if(e)if("number"==typeof e)this.xx=this.yy=e;else if(e instanceof Array){if(0<e.length){for(var t=u.normalize(e[0]),r=1;r<e.length;++r){var i=t,n=u.normalize(e[r]);(t=new u.Matrix2D).xx=i.xx*n.xx+i.xy*n.yx,t.xy=i.xx*n.xy+i.xy*n.yy,t.yx=i.yx*n.xx+i.yy*n.yx,t.yy=i.yx*n.xy+i.yy*n.yy,t.dx=i.xx*n.dx+i.xy*n.dy+i.dx,t.dy=i.yx*n.dx+i.yy*n.dy+i.dy}a.mixin(this,t)}}else a.mixin(this,e)},a.extend(u.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0}),a.mixin(u,{identity:new u.Matrix2D,flipX:new u.Matrix2D({xx:-1}),flipY:new u.Matrix2D({yy:-1}),flipXY:new u.Matrix2D({xx:-1,yy:-1}),translate:function(e,t){return 1<arguments.length?new u.Matrix2D({dx:e,dy:t}):new u.Matrix2D({dx:e.x,dy:e.y})},scale:function(e,t){return 1<arguments.length?new u.Matrix2D({xx:e,yy:t}):"number"==typeof e?new u.Matrix2D({xx:e,yy:e}):new u.Matrix2D({xx:e.x,yy:e.y})},rotate:function(e){var t=Math.cos(e),r=Math.sin(e);return new u.Matrix2D({xx:t,xy:-r,yx:r,yy:t})},rotateg:function(e){return u.rotate(u._degToRad(e))},skewX:function(e){return new u.Matrix2D({xy:Math.tan(e)})},skewXg:function(e){return u.skewX(u._degToRad(e))},skewY:function(e){return new u.Matrix2D({yx:Math.tan(e)})},skewYg:function(e){return u.skewY(u._degToRad(e))},reflect:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var r=e*e,i=t*t,n=r+i,a=2*e*t/n;return new u.Matrix2D({xx:2*r/n-1,xy:a,yx:a,yy:2*i/n-1})},project:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var r=e*e,i=t*t,n=r+i,a=e*t/n;return new u.Matrix2D({xx:r/n,xy:a,yx:a,yy:i/n})},normalize:function(e){return e instanceof u.Matrix2D?e:new u.Matrix2D(e)},isIdentity:function(e){return 1==e.xx&&0==e.xy&&0==e.yx&&1==e.yy&&0==e.dx&&0==e.dy},clone:function(e){var t=new u.Matrix2D;for(var r in e)"number"==typeof e[r]&&"number"==typeof t[r]&&t[r]!=e[r]&&(t[r]=e[r]);return t},invert:function(e){var t=u.normalize(e),r=t.xx*t.yy-t.xy*t.yx;return t=new u.Matrix2D({xx:t.yy/r,xy:-t.xy/r,yx:-t.yx/r,yy:t.xx/r,dx:(t.xy*t.dy-t.yy*t.dx)/r,dy:(t.yx*t.dx-t.xx*t.dy)/r})},_multiplyPoint:function(e,t,r){return{x:e.xx*t+e.xy*r+e.dx,y:e.yx*t+e.yy*r+e.dy}},multiplyPoint:function(e,t,r){var i=u.normalize(e);return"number"==typeof t&&"number"==typeof r?u._multiplyPoint(i,t,r):u._multiplyPoint(i,t.x,t.y)},multiplyRectangle:function(e,t){var r=u.normalize(e);if(t=t||{x:0,y:0,width:0,height:0},u.isIdentity(r))return{x:t.x,y:t.y,width:t.width,height:t.height};var i=u.multiplyPoint(r,t.x,t.y),n=u.multiplyPoint(r,t.x,t.y+t.height),a=u.multiplyPoint(r,t.x+t.width,t.y),s=u.multiplyPoint(r,t.x+t.width,t.y+t.height),o=Math.min(i.x,n.x,a.x,s.x),l=Math.min(i.y,n.y,a.y,s.y);return{x:o,y:l,width:Math.max(i.x,n.x,a.x,s.x)-o,height:Math.max(i.y,n.y,a.y,s.y)-l}},multiply:function(e){for(var t=u.normalize(e),r=1;r<arguments.length;++r){var i=t,n=u.normalize(arguments[r]);(t=new u.Matrix2D).xx=i.xx*n.xx+i.xy*n.yx,t.xy=i.xx*n.xy+i.xy*n.yy,t.yx=i.yx*n.xx+i.yy*n.yx,t.yy=i.yx*n.xy+i.yy*n.yy,t.dx=i.xx*n.dx+i.xy*n.dy+i.dx,t.dy=i.yx*n.dx+i.yy*n.dy+i.dy}return t},_sandwich:function(e,t,r){return u.multiply(u.translate(t,r),e,u.translate(-t,-r))},scaleAt:function(e,t,r,i){switch(arguments.length){case 4:return u._sandwich(u.scale(e,t),r,i);case 3:return"number"==typeof r?u._sandwich(u.scale(e),t,r):u._sandwich(u.scale(e,t),r.x,r.y)}return u._sandwich(u.scale(e),t.x,t.y)},rotateAt:function(e,t,r){return 2<arguments.length?u._sandwich(u.rotate(e),t,r):u._sandwich(u.rotate(e),t.x,t.y)},rotategAt:function(e,t,r){return 2<arguments.length?u._sandwich(u.rotateg(e),t,r):u._sandwich(u.rotateg(e),t.x,t.y)},skewXAt:function(e,t,r){return 2<arguments.length?u._sandwich(u.skewX(e),t,r):u._sandwich(u.skewX(e),t.x,t.y)},skewXgAt:function(e,t,r){return 2<arguments.length?u._sandwich(u.skewXg(e),t,r):u._sandwich(u.skewXg(e),t.x,t.y)},skewYAt:function(e,t,r){return 2<arguments.length?u._sandwich(u.skewY(e),t,r):u._sandwich(u.skewY(e),t.x,t.y)},skewYgAt:function(e,t,r){return 2<arguments.length?u._sandwich(u.skewYg(e),t,r):u._sandwich(u.skewYg(e),t.x,t.y)}}),e.Matrix2D=u.Matrix2D,u}.apply(null,i))||(e.exports=n)},1751:function(e,t,r){var i,n;i=[r(25),r(21),r(51),r(104)],void 0===(n=function(e,t,s,r){var o=e.Color=function(e){e&&this.setColor(e)};return o.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:r.transparentColor||[0,0,0,0]},t.extend(o,{r:255,g:255,b:255,a:1,_set:function(e,t,r,i){this.r=e,this.g=t,this.b=r,this.a=i},setColor:function(e){return t.isString(e)?o.fromString(e,this):t.isArray(e)?o.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof o||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+s.map(["r","g","b"],function(e){var t=this[e].toString(16);return t.length<2?"0"+t:t},this).join("")},toCss:function(e){var t=this.r+", "+this.g+", "+this.b;return(e?"rgba("+t+", "+this.a:"rgb("+t)+")"},toString:function(){return this.toCss(!0)}}),o.blendColors=e.blendColors=function(e,t,r,i){var n=i||new o;return n.r=Math.round(e.r+(t.r-e.r)*r),n.g=Math.round(e.g+(t.g-e.g)*r),n.b=Math.round(e.b+(t.b-e.b)*r),n.a=e.a+(t.a-e.a)*r,n.sanitize()},o.fromRgb=e.colorFromRgb=function(e,t){var r=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return r&&o.fromArray(r[1].split(/\s*,\s*/),t)},o.fromHex=e.colorFromHex=function(r,e){var i=e||new o,n=4==r.length?4:8,a=(1<<n)-1;return r=Number("0x"+r.substr(1)),isNaN(r)?null:(s.forEach(["b","g","r"],function(e){var t=r&a;r>>=n,i[e]=4==n?17*t:t}),i.a=1,i)},o.fromArray=e.colorFromArray=function(e,t){var r=t||new o;return r._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(r.a)&&(r.a=1),r.sanitize()},o.fromString=e.colorFromString=function(e,t){var r=o.named[e];return r&&o.fromArray(r,t)||o.fromRgb(e,t)||o.fromHex(e,t)},o}.apply(null,i))||(e.exports=n)},1877:function(e,t,r){var i,n;i=[r(1681),r(21),r(67),r(25),r(324),r(68),r(51),r(210),r(1751),r(1712)],void 0===(n=function(r,a,e,s,t,i,n,o,l,u){function h(e,t){for(var r=e.length-1;t<r;)e[t]=e[++t];e.length=r}var c=r.shape={};return c.Shape=e("dojox.gfx.shape.Shape",null,{constructor:function(){if(this.rawNode=null,this.shape=null,this.matrix=null,this.fillStyle=null,this.strokeStyle=null,this.bbox=null,this.parent=null,this.parentMatrix=null,t("gfxRegistry")){var e=c.register(this);this.getUID=function(){return e}}},destroy:function(){t("gfxRegistry")&&c.dispose(this),this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null),this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var e=this.getBoundingBox();if(!e)return null;var t=this._getRealMatrix(),r=u;return[r.multiplyPoint(t,e.x,e.y),r.multiplyPoint(t,e.x+e.width,e.y),r.multiplyPoint(t,e.x+e.width,e.y+e.height),r.multiplyPoint(t,e.x,e.y+e.height)]},getEventSource:function(){return this.rawNode},setClip:function(e){this.clip=e},getClip:function(){return this.clip},setShape:function(e){return this.shape=r.makeParameters(this.shape,e),this.bbox=null,this},setFill:function(e){if(!e)return this.fillStyle=null,this;var t=null;if("object"==typeof e&&"type"in e)switch(e.type){case"linear":t=r.makeParameters(r.defaultLinearGradient,e);break;case"radial":t=r.makeParameters(r.defaultRadialGradient,e);break;case"pattern":t=r.makeParameters(r.defaultPattern,e)}else t=r.normalizeColor(e);return this.fillStyle=t,this},setStroke:function(e){if(!e)return this.strokeStyle=null,this;("string"==typeof e||a.isArray(e)||e instanceof l)&&(e={color:e});var t=this.strokeStyle=r.makeParameters(r.defaultStroke,e);return t.color=r.normalizeColor(t.color),this},setTransform:function(e){return this.matrix=u.clone(e?u.normalize(e):u.identity),this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var e=this.getParent();return e&&(e._moveChildToFront(this),this._moveToFront()),this},moveToBack:function(){var e=this.getParent();return e&&(e._moveChildToBack(this),this._moveToBack()),this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(e){return e?this.setTransform([this.matrix,e]):this},applyLeftTransform:function(e){return e?this.setTransform([e,this.matrix]):this},applyTransform:function(e){return e?this.setTransform([this.matrix,e]):this},removeShape:function(e){return this.parent&&this.parent.remove(this,e),this},_setParent:function(e,t){return this.parent=e,this._updateParentMatrix(t)},_updateParentMatrix:function(e){return this.parentMatrix=e?u.clone(e):null,this._applyTransform()},_getRealMatrix:function(){for(var e=this.matrix,t=this.parent;t;)t.matrix&&(e=u.multiply(t.matrix,e)),t=t.parent;return e}}),c._eventsProcessing={on:function(e,t){return i(this.getEventSource(),e,c.fixCallback(this,r.fixTarget,t))},connect:function(e,t,r){return"on"==e.substring(0,2)&&(e=e.substring(2)),this.on(e,r?a.hitch(t,r):t)},disconnect:function(e){return e.remove()}},c.fixCallback=function(t,r,i,n){if(n||(n=i,i=null),a.isString(n)){if(!(i=i||s.global)[n])throw['dojox.gfx.shape.fixCallback: scope["',n,'"] is null (scope="',i,'")'].join("");return function(e){return r(e,t)?i[n].apply(i,arguments||[]):void 0}}return i?function(e){return r(e,t)?n.apply(i,arguments||[]):void 0}:function(e){return r(e,t)?n.apply(i,arguments):void 0}},a.extend(c.Shape,c._eventsProcessing),c.Container={_init:function(){this.children=[],this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(e){var t=e.getParent();return t&&t.remove(e,!0),this.children.push(e),e._setParent(this,this._getRealMatrix())},remove:function(e,t){for(var r=0;r<this.children.length;++r)if(this.children[r]==e){t||(e.parent=null,e.parentMatrix=null),h(this.children,r);break}return this},clear:function(e){for(var t,r=0;r<this.children.length;++r)(t=this.children[r]).parent=null,t.parentMatrix=null,e&&t.destroy();return this.children=[],this},getBoundingBox:function(){if(this.children){var i=null;return n.forEach(this.children,function(e){var t=e.getBoundingBox();if(t){var r=e.getTransform();r&&(t=u.multiplyRectangle(r,t)),i?(i.x=Math.min(i.x,t.x),i.y=Math.min(i.y,t.y),i.endX=Math.max(i.endX,t.x+t.width),i.endY=Math.max(i.endY,t.y+t.height)):i={x:t.x,y:t.y,endX:t.x+t.width,endY:t.y+t.height}}}),i&&(i.width=i.endX-i.x,i.height=i.endY-i.y),i}return null},_moveChildToFront:function(e){for(var t=0;t<this.children.length;++t)if(this.children[t]==e){h(this.children,t),this.children.push(e);break}return this},_moveChildToBack:function(e){for(var t=0;t<this.children.length;++t)if(this.children[t]==e){h(this.children,t),this.children.unshift(e);break}return this}},c.Surface=e("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null,this._parent=null,this._nodes=[],this._events=[]},destroy:function(){if(n.forEach(this._nodes,o.destroy),this._nodes=[],n.forEach(this._events,function(e){e&&e.remove()}),this._events=[],this.rawNode=null,t("ie"))for(;this._parent.lastChild;)o.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(e){},whenLoaded:function(e,t){var r=a.hitch(e,t);this.isLoaded?r(this):i.once(this,"load",function(e){r(e)})}}),a.extend(c.Surface,c._eventsProcessing),c.Rect=e("dojox.gfx.shape.Rect",c.Shape,{constructor:function(e){this.shape=r.getDefault("Rect"),this.rawNode=e},getBoundingBox:function(){return this.shape}}),c.Ellipse=e("dojox.gfx.shape.Ellipse",c.Shape,{constructor:function(e){this.shape=r.getDefault("Ellipse"),this.rawNode=e},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:e.cx-e.rx,y:e.cy-e.ry,width:2*e.rx,height:2*e.ry}}return this.bbox}}),c.Circle=e("dojox.gfx.shape.Circle",c.Shape,{constructor:function(e){this.shape=r.getDefault("Circle"),this.rawNode=e},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:e.cx-e.r,y:e.cy-e.r,width:2*e.r,height:2*e.r}}return this.bbox}}),c.Line=e("dojox.gfx.shape.Line",c.Shape,{constructor:function(e){this.shape=r.getDefault("Line"),this.rawNode=e},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:Math.min(e.x1,e.x2),y:Math.min(e.y1,e.y2),width:Math.abs(e.x2-e.x1),height:Math.abs(e.y2-e.y1)}}return this.bbox}}),c.Polyline=e("dojox.gfx.shape.Polyline",c.Shape,{constructor:function(e){this.shape=r.getDefault("Polyline"),this.rawNode=e},setShape:function(e,t){return e&&e instanceof Array?(this.inherited(arguments,[{points:e}]),t&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[e]),this},_normalizePoints:function(){var e=this.shape.points,t=e&&e.length;if(t&&"number"==typeof e[0]){for(var r=[],i=0;i<t;i+=2)r.push({x:e[i],y:e[i+1]});this.shape.points=r}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var e=this.shape.points,t=e.length,r=e[0],i={l:r.x,t:r.y,r:r.x,b:r.y},n=1;n<t;++n)r=e[n],i.l>r.x&&(i.l=r.x),i.r<r.x&&(i.r=r.x),i.t>r.y&&(i.t=r.y),i.b<r.y&&(i.b=r.y);this.bbox={x:i.l,y:i.t,width:i.r-i.l,height:i.b-i.t}}return this.bbox}}),c.Image=e("dojox.gfx.shape.Image",c.Shape,{constructor:function(e){this.shape=r.getDefault("Image"),this.rawNode=e},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}}),c.Text=e(c.Shape,{constructor:function(e){this.fontStyle=null,this.shape=r.getDefault("Text"),this.rawNode=e},getFont:function(){return this.fontStyle},setFont:function(e){return this.fontStyle="string"==typeof e?r.splitFontString(e):r.makeParameters(r.defaultFont,e),this._setFont(),this},getBoundingBox:function(){var e=null;return this.getShape().text&&(e=r._base._computeTextBoundingBox(this)),e}}),c.Creator={createShape:function(e){switch(e.type){case r.defaultPath.type:return this.createPath(e);case r.defaultRect.type:return this.createRect(e);case r.defaultCircle.type:return this.createCircle(e);case r.defaultEllipse.type:return this.createEllipse(e);case r.defaultLine.type:return this.createLine(e);case r.defaultPolyline.type:return this.createPolyline(e);case r.defaultImage.type:return this.createImage(e);case r.defaultText.type:return this.createText(e);case r.defaultTextPath.type:return this.createTextPath(e)}return null},createGroup:function(){return this.createObject(r.Group)},createRect:function(e){return this.createObject(r.Rect,e)},createEllipse:function(e){return this.createObject(r.Ellipse,e)},createCircle:function(e){return this.createObject(r.Circle,e)},createLine:function(e){return this.createObject(r.Line,e)},createPolyline:function(e){return this.createObject(r.Polyline,e)},createImage:function(e){return this.createObject(r.Image,e)},createText:function(e){return this.createObject(r.Text,e)},createPath:function(e){return this.createObject(r.Path,e)},createTextPath:function(e){return this.createObject(r.TextPath,{}).setText(e)},createObject:function(e,t){return null}},c}.apply(null,i))||(e.exports=n)},2177:function(e,t,r){var n,a;n=[r(1681),r(21),r(51),r(67),r(75),r(307),r(62),r(1877),r(2178),r(2179),r(1712),r(2180),r(2181)],void 0===(a=function(o,n,u,e,t,l,h,r,a,c,d,s,x){var f=o.canvas={},y=null,g=d.multiplyPoint,v=Math.PI,m=2*v,b=v/2,S=n.extend;if(t.global.CanvasRenderingContext2D)var _=t.doc.createElement("canvas").getContext("2d"),w="function"==typeof _.setLineDash,T="function"==typeof _.fillText;var P={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};function M(e,t,r,i,n,a,s,o,l,u){var h,c,p=t.length,d=0;for(u?(c=u.l/n,d=u.i):c=t[0]/n;a<s;)s<a+c&&(h={l:(a+c-s)*n,i:d},c=s-a),d%2||(e.beginPath(),e.arc(r,i,n,a,a+c,o),l&&e.stroke()),a+=c,c=t[++d%p]/n;return h}function L(e,t,r,i){var n,a=0,s=0,o=0;for(i?(n=i.l,o=i.i):n=t[0];s<1;){if(1==(s=x.tAtLength(e,n)))a={l:n-x.computeLength(e),i:o};var l=x.splitBezierAtT(e,s);o%2||r.push(l[0]),e=l[1],n=t[++o%t.length]}return a}function C(e,t,r,i){for(var n=[t.last.x,t.last.y].concat(r),a=4===r.length,s=!(e instanceof Array),o=a?"quadraticCurveTo":"bezierCurveTo",l=[],u=L(n,t.canvasDash,l,i),h=0;h<l.length;++h){var c=l[h];s?(e.moveTo(c[0],c[1]),e[o].apply(e,c.slice(2))):(e.push("moveTo",[c[0],c[1]]),e.push(o,c.slice(2)))}return u}function k(e,t,r,i,n,a,s){var o,l,u=0,h=0,c=0,p=x.distance(r,i,n,a),d=0,f=t.canvasDash,y=r,g=i,v=!(e instanceof Array);for(s?(c=s.l,d=s.i):c+=f[0];.01<Math.abs(1-h);)p<c&&(u={l:c-p,i:d},c=p),o=r+(n-r)*(h=c/p),l=i+(a-i)*h,d++%2||(v?(e.moveTo(y,g),e.lineTo(o,l)):(e.push("moveTo",[y,g]),e.push("lineTo",[o,l]))),y=o,g=l,c+=f[d%f.length];return u}f.Shape=e("dojox.gfx.canvas.Shape",r.Shape,{_render:function(e){e.save(),this._renderTransform(e),this._renderClip(e),this._renderShape(e),this._renderFill(e,!0),this._renderStroke(e,!0),e.restore()},_renderClip:function(e){this.canvasClip&&(this.canvasClip.render(e),e.clip())},_renderTransform:function(e){if("canvasTransform"in this){var t=this.canvasTransform;e.translate(t.dx,t.dy),e.rotate(t.angle2),e.scale(t.sx,t.sy),e.rotate(t.angle1)}},_renderShape:function(e){},_renderFill:function(e,t){if("canvasFill"in this){var r=this.fillStyle;if("canvasFillImage"in this){var i=r.width,n=r.height,a=this.canvasFillImage.width,s=this.canvasFillImage.height,o=i==a?1:i/a,l=n==s?1:n/s,u=Math.min(o,l),h=(i-u*a)/2,c=(n-u*s)/2;y.width=i,y.height=n;var p=y.getContext("2d");p.clearRect(0,0,i,n),p.drawImage(this.canvasFillImage,0,0,a,s,h,c,u*a,u*s),this.canvasFill=e.createPattern(y,"repeat"),delete this.canvasFillImage}e.fillStyle=this.canvasFill,t&&("pattern"!==r.type||0===r.x&&0===r.y||e.translate(r.x,r.y),e.fill())}else e.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(e,t){var r=this.strokeStyle;r?(e.strokeStyle=r.color.toString(),e.lineWidth=r.width,e.lineCap=r.cap,"number"==typeof r.join?(e.lineJoin="miter",e.miterLimit=r.join):e.lineJoin=r.join,this.canvasDash?w?(e.setLineDash(this.canvasDash),t&&e.stroke()):this._renderDashedStroke(e,t):t&&e.stroke()):t||(e.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(e,t){},getEventSource:function(){return null},on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,setClip:function(e){this.inherited(arguments);var t=e?"width"in e?"rect":"cx"in e?"ellipse":"points"in e?"polyline":"d"in e?"path":null:null;return e&&!t||(this.canvasClip=e?D(t,e):null,this.parent&&this.parent._makeDirty()),this}});function N(e,t,r){var i=e.prototype[t];e.prototype[t]=r?function(){return this.parent&&this.parent._makeDirty(),i.apply(this,arguments),r.call(this),this}:function(){return this.parent&&this.parent._makeDirty(),i.apply(this,arguments)}}var D=function(e,t){switch(e){case"ellipse":return{canvasEllipse:O({shape:t}),render:function(e){return f.Ellipse.prototype._renderShape.call(this,e)}};case"rect":return{shape:n.delegate(t,{r:0}),render:function(e){return f.Rect.prototype._renderShape.call(this,e)}};case"path":return{canvasPath:R(t),render:function(e){this.canvasPath._renderShape(e)}};case"polyline":return{canvasPolyline:t.points,render:function(e){return f.Polyline.prototype._renderShape.call(this,e)}}}return null},R=function(e){var t=new dojox.gfx.canvas.Path;return t.canvasPath=[],t._setPath(e.d),t};N(f.Shape,"setTransform",function(){this.matrix?this.canvasTransform=o.decompose(this.matrix):delete this.canvasTransform}),N(f.Shape,"setFill",function(){var t,e=this.fillStyle;if(e){if("object"==typeof e&&"type"in e){var r=this.surface.rawNode.getContext("2d");switch(e.type){case"linear":case"radial":t="linear"==e.type?r.createLinearGradient(e.x1,e.y1,e.x2,e.y2):r.createRadialGradient(e.cx,e.cy,0,e.cx,e.cy,e.r),u.forEach(e.colors,function(e){t.addColorStop(e.offset,o.normalizeColor(e.color).toString())});break;case"pattern":y=y||document.createElement("canvas");var i=new Image;this.surface.downloadImage(i,e.src),this.canvasFillImage=i}}else t=e.toString();this.canvasFill=t}else delete this.canvasFill}),N(f.Shape,"setStroke",function(){var e=this.strokeStyle;if(e){var t=this.strokeStyle.style.toLowerCase();if(t in P&&(t=P[t]),t instanceof Array){var r;for(t=t.slice(),this.canvasDash=t,r=0;r<t.length;++r)t[r]*=e.width;if("butt"!=e.cap){for(r=0;r<t.length;r+=2)t[r]-=e.width,t[r]<1&&(t[r]=1);for(r=1;r<t.length;r+=2)t[r]+=e.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!w&&!!this.canvasDash}),N(f.Shape,"setShape"),f.Group=e("dojox.gfx.canvas.Group",f.Shape,{constructor:function(){r.Container._init.call(this)},_render:function(e){e.save(),this._renderTransform(e),this._renderClip(e);for(var t=0;t<this.children.length;++t)this.children[t]._render(e);e.restore()},destroy:function(){r.Container.clear.call(this,!0),f.Shape.prototype.destroy.apply(this,arguments)}}),f.Rect=e("dojox.gfx.canvas.Rect",[f.Shape,r.Rect],{_renderShape:function(e){var t=this.shape,r=Math.min(t.r,t.height/2,t.width/2),i=t.x,n=i+t.width,a=t.y,s=a+t.height,o=i+r,l=n-r,u=a+r,h=s-r;e.beginPath(),e.moveTo(o,a),r?(e.arc(l,u,r,-b,0,!1),e.arc(l,h,r,0,b,!1),e.arc(o,h,r,b,v,!1),e.arc(o,u,r,v,v+b,!1)):(e.lineTo(l,a),e.lineTo(n,h),e.lineTo(o,s),e.lineTo(i,u)),e.closePath()},_renderDashedStroke:function(e,t){var r,i=this.shape,n=Math.min(i.r,i.height/2,i.width/2),a=i.x,s=a+i.width,o=i.y,l=o+i.height,u=a+n,h=s-n,c=o+n,p=l-n;n?(e.beginPath(),r=k(e,this,u,o,h,o),t&&e.stroke(),r=M(e,this.canvasDash,h,c,n,-b,0,!1,t,r),e.beginPath(),r=k(e,this,s,c,s,p,r),t&&e.stroke(),r=M(e,this.canvasDash,h,p,n,0,b,!1,t,r),e.beginPath(),r=k(e,this,h,l,u,l,r),t&&e.stroke(),r=M(e,this.canvasDash,u,p,n,b,v,!1,t,r),e.beginPath(),r=k(e,this,a,p,a,c,r),t&&e.stroke(),M(e,this.canvasDash,u,c,n,v,v+b,!1,t,r)):(e.beginPath(),r=k(e,this,u,o,h,o),r=k(e,this,h,o,s,p,r),r=k(e,this,s,p,u,l,r),k(e,this,u,l,a,c,r),t&&e.stroke())}});var F=[];!function(){var e=c.curvePI4;F.push(e.s,e.c1,e.c2,e.e);for(var t=45;t<360;t+=45){var r=d.rotateg(t);F.push(g(r,e.c1),g(r,e.c2),g(r,e.e))}}();var O=function(e){var t,r,i,n=[],a=e.shape,s=d.normalize([d.translate(a.cx,a.cy),d.scale(a.rx,a.ry)]);t=g(s,F[0]),n.push([t.x,t.y]);for(var o=1;o<F.length;o+=3)r=g(s,F[o]),i=g(s,F[o+1]),t=g(s,F[o+2]),n.push([r.x,r.y,i.x,i.y,t.x,t.y]);if(e._needsDash){var l=[],u=n[0];for(o=1;o<n.length;++o){var h=[];L(u.concat(n[o]),e.canvasDash,h),u=[n[o][4],n[o][5]],l.push(h)}e._dashedPoints=l}return n};f.Ellipse=e("dojox.gfx.canvas.Ellipse",[f.Shape,r.Ellipse],{setShape:function(){return this.inherited(arguments),this.canvasEllipse=O(this),this},setStroke:function(){return this.inherited(arguments),w||(this.canvasEllipse=O(this)),this},_renderShape:function(e){var t,r=this.canvasEllipse;for(e.beginPath(),e.moveTo.apply(e,r[0]),t=1;t<r.length;++t)e.bezierCurveTo.apply(e,r[t]);e.closePath()},_renderDashedStroke:function(e,t){var r=this._dashedPoints;e.beginPath();for(var i=0;i<r.length;++i)for(var n=r[i],a=0;a<n.length;++a){var s=n[a];e.moveTo(s[0],s[1]),e.bezierCurveTo(s[2],s[3],s[4],s[5],s[6],s[7])}t&&e.stroke()}}),f.Circle=e("dojox.gfx.canvas.Circle",[f.Shape,r.Circle],{_renderShape:function(e){var t=this.shape;e.beginPath(),e.arc(t.cx,t.cy,t.r,0,m,1)},_renderDashedStroke:function(e,t){var r,n=this.shape,a=0,s=this.canvasDash.length;for(i=0;a<m;)r=this.canvasDash[i%s]/n.r,i%2||(e.beginPath(),e.arc(n.cx,n.cy,n.r,a,a+r,0),t&&e.stroke()),a+=r,++i}}),f.Line=e("dojox.gfx.canvas.Line",[f.Shape,r.Line],{_renderShape:function(e){var t=this.shape;e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2)},_renderDashedStroke:function(e,t){var r=this.shape;e.beginPath(),k(e,this,r.x1,r.y1,r.x2,r.y2),t&&e.stroke()}}),f.Polyline=e("dojox.gfx.canvas.Polyline",[f.Shape,r.Polyline],{setShape:function(){this.inherited(arguments);var e,t,r,i=this.shape.points,n=i[0];if(this.bbox=null,this._normalizePoints(),i.length)if("number"==typeof n)e=i;else for(e=[],r=0;r<i.length;++r)t=i[r],e.push(t.x,t.y);else e=[];return this.canvasPolyline=e,this},_renderShape:function(e){var t=this.canvasPolyline;if(t.length){e.beginPath(),e.moveTo(t[0],t[1]);for(var r=2;r<t.length;r+=2)e.lineTo(t[r],t[r+1])}},_renderDashedStroke:function(e,t){var r=this.canvasPolyline,i=0;e.beginPath();for(var n=0;n<r.length;n+=2)i=k(e,this,r[n],r[n+1],r[n+2],r[n+3],i);t&&e.stroke()}}),f.Image=e("dojox.gfx.canvas.Image",[f.Shape,r.Image],{setShape:function(){this.inherited(arguments);var e=new Image;return this.surface.downloadImage(e,this.shape.src),this.canvasImage=e,this},_renderShape:function(e){var t=this.shape;e.drawImage(this.canvasImage,t.x,t.y,t.width,t.height)}}),f.Text=e("dojox.gfx.canvas.Text",[f.Shape,r.Text],{_setFont:function(){this.fontStyle?this.canvasFont=o.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var e,t=this.shape,r=0;return t.text&&((e=this.surface.rawNode.getContext("2d")).save(),this._renderTransform(e),this._renderFill(e,!1),this._renderStroke(e,!1),this.canvasFont&&(e.font=this.canvasFont),r=e.measureText(t.text).width,e.restore()),r},_render:function(e){e.save(),this._renderTransform(e),this._renderFill(e,!1),this._renderStroke(e,!1),this._renderShape(e),e.restore()},_renderShape:function(e){var t,r=this.shape;r.text&&(t="middle"===r.align?"center":r.align,e.textAlign=t,this.canvasFont&&(e.font=this.canvasFont),this.canvasFill&&e.fillText(r.text,r.x,r.y),this.strokeStyle&&(e.beginPath(),e.strokeText(r.text,r.x,r.y),e.closePath()))}}),N(f.Text,"setFont"),T||f.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var V={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};f.Path=e("dojox.gfx.canvas.Path",[f.Shape,a.Path],{constructor:function(){this.lastControl={}},setShape:function(){return this.canvasPath=[],this._dashedPath=[],this.inherited(arguments)},setStroke:function(){return this.inherited(arguments),w||(this.segmented=!1,this._confirmSegmented()),this},_setPath:function(){this._dashResidue=null,this.inherited(arguments)},_updateWithSegment:function(e){var t=n.clone(this.last);this[V[e.action]](this.canvasPath,e.action,e.args,this._needsDash?this._dashedPath:null),this.last=t,this.inherited(arguments)},_renderShape:function(e){var t=this.canvasPath;e.beginPath();for(var r=0;r<t.length;r+=2)e[t[r]].apply(e,t[r+1])},_renderDashedStroke:w?function(){}:function(e,t){var r=this._dashedPath;e.beginPath();for(var i=0;i<r.length;i+=2)e[r[i]].apply(e,r[i+1]);t&&e.stroke()},_moveToA:function(e,t,r,i){e.push("moveTo",[r[0],r[1]]),i&&i.push("moveTo",[r[0],r[1]]);for(var n=2;n<r.length;n+=2)e.push("lineTo",[r[n],r[n+1]]),i&&(this._dashResidue=k(i,this,r[n-2],r[n-1],r[n],r[n+1],this._dashResidue));this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl={}},_moveToR:function(e,t,r,i){var n;n="x"in this.last?[this.last.x+=r[0],this.last.y+=r[1]]:[this.last.x=r[0],this.last.y=r[1]],e.push("moveTo",n),i&&i.push("moveTo",n);for(var a=2;a<r.length;a+=2)e.push("lineTo",[this.last.x+=r[a],this.last.y+=r[a+1]]),i&&(this._dashResidue=k(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(e,t,r,i){for(var n=0;n<r.length;n+=2)i&&(this._dashResidue=k(i,this,this.last.x,this.last.y,r[n],r[n+1],this._dashResidue)),e.push("lineTo",[r[n],r[n+1]]);this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl={}},_lineToR:function(e,t,r,i){for(var n=0;n<r.length;n+=2)e.push("lineTo",[this.last.x+=r[n],this.last.y+=r[n+1]]),i&&(this._dashResidue=k(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(e,t,r,i){for(var n=0;n<r.length;++n)e.push("lineTo",[r[n],this.last.y]),i&&(this._dashResidue=k(i,this,i[i.length-1][0],i[i.length-1][1],r[n],this.last.y,this._dashResidue));this.last.x=r[r.length-1],this.lastControl={}},_hLineToR:function(e,t,r,i){for(var n=0;n<r.length;++n)e.push("lineTo",[this.last.x+=r[n],this.last.y]),i&&(this._dashResidue=k(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(e,t,r,i){for(var n=0;n<r.length;++n)e.push("lineTo",[this.last.x,r[n]]),i&&(this._dashResidue=k(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,r[n],this._dashResidue));this.last.y=r[r.length-1],this.lastControl={}},_vLineToR:function(e,t,r,i){for(var n=0;n<r.length;++n)e.push("lineTo",[this.last.x,this.last.y+=r[n]]),i&&(this._dashResidue=k(i,this,i[i.length-1][0],i[i.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(e,t,r,i){for(var n=0;n<r.length;n+=6)e.push("bezierCurveTo",r.slice(n,n+6)),i&&(this._dashResidue=C(i,this,e[e.length-1],this._dashResidue));this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl.x=r[r.length-4],this.lastControl.y=r[r.length-3],this.lastControl.type="C"},_curveToR:function(e,t,r,i){for(var n=0;n<r.length;n+=6)e.push("bezierCurveTo",[this.last.x+r[n],this.last.y+r[n+1],this.lastControl.x=this.last.x+r[n+2],this.lastControl.y=this.last.y+r[n+3],this.last.x+r[n+4],this.last.y+r[n+5]]),i&&(this._dashResidue=C(i,this,e[e.length-1],this._dashResidue)),this.last.x+=r[n+4],this.last.y+=r[n+5];this.lastControl.type="C"},_smoothCurveToA:function(e,t,r,i){for(var n=0;n<r.length;n+=4){var a="C"==this.lastControl.type;e.push("bezierCurveTo",[a?2*this.last.x-this.lastControl.x:this.last.x,a?2*this.last.y-this.lastControl.y:this.last.y,r[n],r[n+1],r[n+2],r[n+3]]),i&&(this._dashResidue=C(i,this,e[e.length-1],this._dashResidue)),this.lastControl.x=r[n],this.lastControl.y=r[n+1],this.lastControl.type="C"}this.last.x=r[r.length-2],this.last.y=r[r.length-1]},_smoothCurveToR:function(e,t,r,i){for(var n=0;n<r.length;n+=4){var a="C"==this.lastControl.type;e.push("bezierCurveTo",[a?2*this.last.x-this.lastControl.x:this.last.x,a?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+r[n],this.last.y+r[n+1],this.last.x+r[n+2],this.last.y+r[n+3]]),i&&(this._dashResidue=C(i,this,e[e.length-1],this._dashResidue)),this.lastControl.x=this.last.x+r[n],this.lastControl.y=this.last.y+r[n+1],this.lastControl.type="C",this.last.x+=r[n+2],this.last.y+=r[n+3]}},_qCurveToA:function(e,t,r,i){for(var n=0;n<r.length;n+=4)e.push("quadraticCurveTo",r.slice(n,n+4));i&&(this._dashResidue=C(i,this,e[e.length-1],this._dashResidue)),this.last.x=r[r.length-2],this.last.y=r[r.length-1],this.lastControl.x=r[r.length-4],this.lastControl.y=r[r.length-3],this.lastControl.type="Q"},_qCurveToR:function(e,t,r,i){for(var n=0;n<r.length;n+=4)e.push("quadraticCurveTo",[this.lastControl.x=this.last.x+r[n],this.lastControl.y=this.last.y+r[n+1],this.last.x+r[n+2],this.last.y+r[n+3]]),i&&(this._dashResidue=C(i,this,e[e.length-1],this._dashResidue)),this.last.x+=r[n+2],this.last.y+=r[n+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(e,t,r,i){for(var n=0;n<r.length;n+=2){var a="Q"==this.lastControl.type;e.push("quadraticCurveTo",[this.lastControl.x=a?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=a?2*this.last.y-this.lastControl.y:this.last.y,r[n],r[n+1]]),i&&(this._dashResidue=C(i,this,e[e.length-1],this._dashResidue)),this.lastControl.type="Q"}this.last.x=r[r.length-2],this.last.y=r[r.length-1]},_qSmoothCurveToR:function(e,t,r,i){for(var n=0;n<r.length;n+=2){var a="Q"==this.lastControl.type;e.push("quadraticCurveTo",[this.lastControl.x=a?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=a?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+r[n],this.last.y+r[n+1]]),i&&(this._dashResidue=C(i,this,e[e.length-1],this._dashResidue)),this.lastControl.type="Q",this.last.x+=r[n],this.last.y+=r[n+1]}},_arcTo:function(t,e,r,i){for(var n="a"==e,a=0;a<r.length;a+=7){var s=r[a+5],o=r[a+6];n&&(s+=this.last.x,o+=this.last.y);var l=c.arcAsBezier(this.last,r[a],r[a+1],r[a+2],r[a+3]?1:0,r[a+4]?1:0,s,o);u.forEach(l,function(e){t.push("bezierCurveTo",e)}),i&&(this._dashResidue=C(i,this,p,this._dashResidue)),this.last.x=s,this.last.y=o}this.lastControl={}},_closePath:function(e,t,r,i){e.push("closePath",[]),i&&(this._dashResidue=k(i,this,this.last.x,this.last.y,i[1][0],i[1][1],this._dashResidue)),this.lastControl={}}}),u.forEach(["moveTo","lineTo","hLineTo","vLineTo","curveTo","smoothCurveTo","qCurveTo","qSmoothCurveTo","arcTo","closePath"],function(e){N(f.Path,e)}),f.TextPath=e("dojox.gfx.canvas.TextPath",[f.Shape,a.TextPath],{_renderShape:function(e){this.shape},_setText:function(){},_setFont:function(){}}),f.Surface=e("dojox.gfx.canvas.Surface",r.Surface,{constructor:function(){r.Container._init.call(this),this.pendingImageCount=0,this.makeDirty()},destroy:function(){r.Container.clear.call(this,!0),this.inherited(arguments)},setDimensions:function(e,t){if(this.width=o.normalizedLength(e),this.height=o.normalizedLength(t),!this.rawNode)return this;var r=!1;return this.rawNode.width!=this.width&&(this.rawNode.width=this.width,r=!0),this.rawNode.height!=this.height&&(this.rawNode.height=this.height,r=!0),r&&this.makeDirty(),this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(e){if(this.rawNode&&(e||!this.pendingImageCount)){var t=this.rawNode.getContext("2d");t.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(t),"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender)}},render:function(e){e.save();for(var t=0;t<this.children.length;++t)this.children[t]._render(e);e.restore()},makeDirty:function(){this.pendingImagesCount||"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(n.hitch(this,this._render),0))},downloadImage:function(e,t){var r=n.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender),e.onload=r,e.onerror=r,e.onabort=r,e.src=t},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}}),f.createSurface=function(e,t,r){if(!t&&!r){var i=l.position(e);t=t||i.w,r=r||i.h}"number"==typeof t&&(t+="px"),"number"==typeof r&&(r+="px");var n=new f.Surface,a=h.byId(e),s=a.ownerDocument.createElement("canvas");return s.width=o.normalizedLength(t),s.height=o.normalizedLength(r),a.appendChild(s),n.rawNode=s,n._parent=a,n.surface=n};var I=r.Container,J={openBatch:function(){return++this._batch,this},closeBatch:function(){return this._batch=0<this._batch?--this._batch:0,this._makeDirty(),this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(e){return this._makeDirty(),I.add.apply(this,arguments)},remove:function(e,t){return this._makeDirty(),I.remove.apply(this,arguments)},clear:function(){return this._makeDirty(),I.clear.apply(this,arguments)},getBoundingBox:I.getBoundingBox,_moveChildToFront:function(e){return this._makeDirty(),I._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(e){return this._makeDirty(),I._moveChildToBack.apply(this,arguments)}},j={createObject:function(e,t){var r=new e;return r.surface=this.surface,r.setShape(t),this.add(r),r}};return S(f.Group,J),S(f.Group,r.Creator),S(f.Group,j),S(f.Surface,J),S(f.Surface,r.Creator),S(f.Surface,j),f.fixTarget=function(e,t){return!0},f}.apply(null,n))||(e.exports=a)},2178:function(e,t,r){var i,n;i=[r(1681),r(21),r(67),r(1712),r(1877)],void 0===(n=function(l,u,e,n,t){var r=e("dojox.gfx.path.Path",t.Shape,{constructor:function(e){this.shape=u.clone(l.defaultPath),this.segments=[],this.tbbox=null,this.absolute=!0,this.last={},this.rawNode=e,this.segmented=!1},setAbsoluteMode:function(e){return this._confirmSegmented(),this.absolute="string"==typeof e?"absolute"==e:e,this},getAbsoluteMode:function(){return this._confirmSegmented(),this.absolute},getBoundingBox:function(){return this._confirmSegmented(),this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){if(this._confirmSegmented(),this.tbbox)return this.tbbox;var e=this.bbox,t=this._getRealMatrix();this.bbox=null;for(var r=0,i=this.segments.length;r<i;++r)this._updateWithSegment(this.segments[r],t);var n=this.bbox;return this.bbox=e,this.tbbox=n?[{x:n.l,y:n.t},{x:n.r,y:n.t},{x:n.r,y:n.b},{x:n.l,y:n.b}]:null,this.tbbox},getLastPosition:function(){return this._confirmSegmented(),"x"in this.last?this.last:null},_applyTransform:function(){return this.tbbox=null,this.inherited(arguments)},_updateBBox:function(e,t,r){if(r){var i=n.multiplyPoint(r,e,t);e=i.x,t=i.y}this.bbox&&"l"in this.bbox?(this.bbox.l>e&&(this.bbox.l=e),this.bbox.r<e&&(this.bbox.r=e),this.bbox.t>t&&(this.bbox.t=t),this.bbox.b<t&&(this.bbox.b=t)):this.bbox={l:e,b:t,r:e,t:t}},_updateWithSegment:function(e,t){var r,i=e.args,n=i.length;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<n;r+=2)this._updateBBox(i[r],i[r+1],t);this.last.x=i[n-2],this.last.y=i[n-1],this.absolute=!0;break;case"H":for(r=0;r<n;++r)this._updateBBox(i[r],this.last.y,t);this.last.x=i[n-1],this.absolute=!0;break;case"V":for(r=0;r<n;++r)this._updateBBox(this.last.x,i[r],t);this.last.y=i[n-1],this.absolute=!0;break;case"m":var a=0;"x"in this.last||(this._updateBBox(this.last.x=i[0],this.last.y=i[1],t),a=2);for(r=a;r<n;r+=2)this._updateBBox(this.last.x+=i[r],this.last.y+=i[r+1],t);this.absolute=!1;break;case"l":case"t":for(r=0;r<n;r+=2)this._updateBBox(this.last.x+=i[r],this.last.y+=i[r+1],t);this.absolute=!1;break;case"h":for(r=0;r<n;++r)this._updateBBox(this.last.x+=i[r],this.last.y,t);this.absolute=!1;break;case"v":for(r=0;r<n;++r)this._updateBBox(this.last.x,this.last.y+=i[r],t);this.absolute=!1;break;case"c":for(r=0;r<n;r+=6)this._updateBBox(this.last.x+i[r],this.last.y+i[r+1],t),this._updateBBox(this.last.x+i[r+2],this.last.y+i[r+3],t),this._updateBBox(this.last.x+=i[r+4],this.last.y+=i[r+5],t);this.absolute=!1;break;case"s":case"q":for(r=0;r<n;r+=4)this._updateBBox(this.last.x+i[r],this.last.y+i[r+1],t),this._updateBBox(this.last.x+=i[r+2],this.last.y+=i[r+3],t);this.absolute=!1;break;case"A":for(r=0;r<n;r+=7)this._updateBBox(i[r+5],i[r+6],t);this.last.x=i[n-2],this.last.y=i[n-1],this.absolute=!0;break;case"a":for(r=0;r<n;r+=7)this._updateBBox(this.last.x+=i[r+5],this.last.y+=i[r+6],t);this.absolute=!1}var s=[e.action];for(r=0;r<n;++r)s.push(l.formatNumber(i[r],!0));if("string"==typeof this.shape.path)this.shape.path+=s.join("");else for(r=0,n=s.length;r<n;++r)this.shape.path.push(s[r])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(e,t){this.tbbox=null;var r,i=this._validSegments[e.toLowerCase()];"number"==typeof i&&(i?t.length>=i&&(r={action:e,args:t.slice(0,t.length-t.length%i)},this.segments.push(r),this._updateWithSegment(r)):(r={action:e,args:[]},this.segments.push(r),this._updateWithSegment(r)))},_collectArgs:function(e,t){for(var r=0;r<t.length;++r){var i=t[r];"boolean"==typeof i?e.push(i?1:0):"number"==typeof i?e.push(i):i instanceof Array?this._collectArgs(e,i):"x"in i&&"y"in i&&e.push(i.x,i.y)}},moveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"M":"m",e),this},lineTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"L":"l",e),this},hLineTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"H":"h",e),this},vLineTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"V":"v",e),this},curveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"C":"c",e),this},smoothCurveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"S":"s",e),this},qCurveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"Q":"q",e),this},qSmoothCurveTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"T":"t",e),this},arcTo:function(){this._confirmSegmented();var e=[];return this._collectArgs(e,arguments),this._pushSegment(this.absolute?"A":"a",e),this},closePath:function(){return this._confirmSegmented(),this._pushSegment("Z",[]),this},_confirmSegmented:function(){if(!this.segmented){var e=this.shape.path;this.shape.path=[],this._setPath(e),this.shape.path=this.shape.path.join(""),this.segmented=!0}},_setPath:function(e){var t=u.isArray(e)?e:e.match(l.pathSvgRegExp);if(this.segments=[],this.absolute=!0,this.bbox={},this.last={},t){for(var r="",i=[],n=t.length,a=0;a<n;++a){var s=t[a],o=parseFloat(s);isNaN(o)?(r&&this._pushSegment(r,i),i=[],r=s):i.push(o)}this._pushSegment(r,i)}},setShape:function(e){return this.inherited(arguments,["string"==typeof e?{path:e}:e]),this.segmented=!1,this.segments=[],l.lazyPathSegmentation||this._confirmSegmented(),this},_2PI:2*Math.PI}),i=e("dojox.gfx.path.TextPath",r,{constructor:function(e){"text"in this||(this.text=u.clone(l.defaultTextPath)),"fontStyle"in this||(this.fontStyle=u.clone(l.defaultFont))},getText:function(){return this.text},setText:function(e){return this.text=l.makeParameters(this.text,"string"==typeof e?{text:e}:e),this._setText(),this},getFont:function(){return this.fontStyle},setFont:function(e){return this.fontStyle="string"==typeof e?l.splitFontString(e):l.makeParameters(l.defaultFont,e),this._setFont(),this}});return l.path={Path:r,TextPath:i}}.apply(null,i))||(e.exports=n)},2179:function(e,t,r){var i,n;i=[r(1681),r(21),r(1712)],void 0===(n=function(e,t,D){var R=2*Math.PI,F=Math.PI/4,O=Math.PI/8,V=F+O,I=J(O);function J(e){var t=Math.cos(e),r=Math.sin(e),i={x:t+4/3*(1-t),y:r-4/3*t*(1-t)/r};return{s:{x:t,y:-r},c1:{x:i.x,y:-i.y},c2:i,e:{x:t,y:r}}}return e.arc={unitArcAsBezier:J,curvePI4:I,arcAsBezier:function(e,t,r,i,n,a,s,o){n=Boolean(n),a=Boolean(a);var l=D._degToRad(i),u=t*t,h=r*r,c=D.multiplyPoint(D.rotate(-l),{x:(e.x-s)/2,y:(e.y-o)/2}),p=c.x*c.x,d=c.y*c.y,f=Math.sqrt((u*h-u*d-h*p)/(u*d+h*p));isNaN(f)&&(f=0);var y={x:f*t*c.y/r,y:-f*r*c.x/t};n==a&&(y={x:-y.x,y:-y.y});var g=D.multiplyPoint([D.translate((e.x+s)/2,(e.y+o)/2),D.rotate(l)],y),v=D.normalize([D.translate(g.x,g.y),D.rotate(l),D.scale(t,r)]),x=D.invert(v),m=D.multiplyPoint(x,e),b=D.multiplyPoint(x,s,o),S=Math.atan2(m.y,m.x),_=S-Math.atan2(b.y,b.x);a&&(_=-_),_<0?_+=R:R<_&&(_-=R);for(var w=O,T=I,P=a?w:-w,M=[],L=_;0<L;L-=F){L<V&&(T=J(w=L/2),P=a?w:-w,L=0);var C,k,N=D.normalize([v,D.rotate(S+P)]);k=a?(f=D.multiplyPoint(N,T.c1),C=D.multiplyPoint(N,T.c2),D.multiplyPoint(N,T.e)):(f=D.multiplyPoint(N,T.c2),C=D.multiplyPoint(N,T.c1),D.multiplyPoint(N,T.s)),M.push([f.x,f.y,C.x,C.y,k.x,k.y]),S+=2*P}return M}}}.apply(null,i))||(e.exports=n)},2180:function(e,t,r){var i,n;i=[r(1681),r(21),r(1712)],void 0===(n=function(e,c,d){function f(e,t){return Math.abs(e-t)<=1e-6*(Math.abs(e)+Math.abs(t))}function s(e,t,r,i){return isFinite(e)?isFinite(r)?((t=Math.abs(t))*e+(i=Math.abs(i))*r)/(t+i):e:r}function o(e){return e.xx*e.yy<0||0<e.xy*e.yx?-1:1}function p(e){var t=d.normalize(e),r=-t.xx-t.yy,i=t.xx*t.yy-t.xy*t.yx,n=Math.sqrt(r*r-4*i),a=-(r+(r<0?-n:n))/2,s=i/a,o=t.xy/(a-t.xx),l=1,u=t.xy/(s-t.xx),h=1;f(a,s)&&(u=l=0,h=o=1),isFinite(o)||(o=1,l=(a-t.xx)/t.xy,isFinite(l)||(o=(a-t.yy)/t.yx,l=1,isFinite(o)||(o=1,l=t.yx/(a-t.yy)))),isFinite(u)||(u=1,h=(s-t.xx)/t.xy,isFinite(h)||(u=(s-t.yy)/t.yx,h=1,isFinite(u)||(u=1,h=t.yx/(s-t.yy))));var c=Math.sqrt(o*o+l*l),p=Math.sqrt(u*u+h*h);return isFinite(o/=c)||(o=0),isFinite(l/=c)||(l=0),isFinite(u/=p)||(u=0),isFinite(h/=p)||(h=0),{value1:a,value2:s,vector1:{x:o,y:l},vector2:{x:u,y:h}}}function y(e,t){var r=o(e),i=t.angle1=(Math.atan2(e.yx,e.yy)+Math.atan2(-r*e.xy,r*e.xx))/2,n=Math.cos(i),a=Math.sin(i);return t.sx=s(e.xx/n,n,-e.xy/a,a),t.sy=s(e.yy/n,n,e.yx/a,a),t}function g(e,t){var r=o(e),i=t.angle2=(Math.atan2(r*e.yx,r*e.xx)+Math.atan2(-e.xy,e.yy))/2,n=Math.cos(i),a=Math.sin(i);return t.sx=s(e.xx/n,n,e.yx/a,a),t.sy=s(e.yy/n,n,-e.xy/a,a),t}return e.decompose=function(e){var t=d.normalize(e),r={dx:t.dx,dy:t.dy,sx:1,sy:1,angle1:0,angle2:0};if(f(t.xy,0)&&f(t.yx,0))return c.mixin(r,{sx:t.xx,sy:t.yy});if(f(t.xx*t.yx,-t.xy*t.yy))return y(t,r);if(f(t.xx*t.xy,-t.yx*t.yy))return g(t,r);var i,n,a=(i=t,n=new d.Matrix2D(i),c.mixin(n,{dx:0,dy:0,xy:n.yx,yx:n.xy})),s=p([t,a]),o=p([a,t]),l=new d.Matrix2D({xx:s.vector1.x,xy:s.vector2.x,yx:s.vector1.y,yy:s.vector2.y}),u=new d.Matrix2D({xx:o.vector1.x,xy:o.vector1.y,yx:o.vector2.x,yy:o.vector2.y}),h=new d.Matrix2D([d.invert(l),t,d.invert(u)]);return y(u,r),h.xx*=r.sx,h.yy*=r.sy,g(l,r),h.xx*=r.sx,h.yy*=r.sy,c.mixin(r,{sx:h.xx,sy:h.yy})}}.apply(null,i))||(e.exports=n)},2181:function(e,t,r){var i,n;i=[r(1681)],void 0===(n=function(e){var t=e.bezierutils={},s=(t.tAtLength=function(a,s){var o=0,l=6==a.length,u=0,h=0,c=l?f:r,p=function(e,t){for(var r=0,i=0;i<e.length-2;i+=2)r+=d(e[i],e[i+1],e[i+2],e[i+3]);if(t<r-(l?d(a[0],a[1],a[4],a[5]):d(a[0],a[1],a[6],a[7]))||s+t<u+r){++h;var n=c(e,.5);if(p(n[0],t),Math.abs(u-s)<=t)return;p(n[1],t)}else u+=r,o+=1/(1<<h)};return s&&p(a,.5),o},t.computeLength=function(e){for(var t=6==e.length,r=0,i=0;i<e.length-2;i+=2)r+=d(e[i],e[i+1],e[i+2],e[i+3]);if(.1<r-(t?d(e[0],e[1],e[4],e[5]):d(e[0],e[1],e[6],e[7]))){var n=(t?f:o)(e,.5),a=s(n[0],t);return a+=s(n[1],t)}return r}),d=t.distance=function(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))},f=function(e,t){var r=1-t,i=r*r,n=t*t,a=e[0],s=e[1],o=e[2],l=e[3],u=e[4],h=e[5],c=i*a+2*r*t*o+n*u,p=i*s+2*r*t*l+n*h;return[[a,s,r*a+t*o,r*s+t*l,c,p],[c,p,r*o+t*u,r*l+t*h,u,h]]},o=function(e,t){var r=1-t,i=r*r,n=i*r,a=t*t,s=a*t,o=e[0],l=e[1],u=e[2],h=e[3],c=e[4],p=e[5],d=e[6],f=e[7],y=n*o+3*i*t*u+3*r*a*c+s*d,g=n*l+3*i*t*h+3*r*a*p+s*f;return[[o,l,r*o+t*u,r*l+t*h,i*o+2*r*t*u+a*c,i*l+2*r*t*h+a*p,y,g],[y,g,i*u+2*r*t*c+a*d,i*h+2*r*t*p+a*f,r*c+t*d,r*p+t*f,d,f]]},r=t.splitBezierAtT=function(e,t){return(6==e.length?f:o)(e,t)};return t}.apply(null,i))||(e.exports=n)},2182:function(e,t,M){var r,i;r=[M.dj.c(e.i),t,M(5),M(1),M(0),M(9),M(10),M(29),M(34),M(4),M(2),M(37),M(31),M(485),M(205),M(2183),M(303),M(2184),M(207),M(1672),M(2185),M(2186),M(2187),M(2188)],void 0===(i=function(e,t,_,r,i,s,n,w,u,h,a,o,l,c,p,d,f,y,g,v,x,m,b,S){return P=a.declared(f),r(T,P),T.prototype.destroy=function(){this._timers.forEach(function(e){clearInterval(e)})},T.prototype.cancelJob=function(e,t){var r=this.parsedUrl.path,i=_({},this.requestOptions,t,{query:{f:"json"}});return this._clearTimer(e),w(r+"/jobs/"+e+"/cancel",i).then(function(e){return x.fromJSON(e.data)})},T.prototype.checkJobStatus=function(e,t){var r=this.parsedUrl.path,i=_({},this.requestOptions,t,{query:{f:"json"}});return w(r+"/jobs/"+e,i).then(function(e){return x.fromJSON(e.data)})},T.prototype.execute=function(e,t){var i=this;return this._constructRequest("execute",e,t).then(function(e){var t=e.data.results||[],r=e.data.messages||[];return{results:t.map(i._decode),messages:r.map(function(e){return v.fromJSON(e)})}})},T.prototype.getResultData=function(e,t,r){var i=this,n=this,a=n.returnFeatureCollection,s=n.returnM,o=n.returnZ,l=n.outSpatialReference,u=n.parsedUrl.path,h={returnFeatureCollection:a||void 0,returnM:s||void 0,returnZ:o||void 0,outSR:l,returnType:"data",f:"json"},c=this._gpEncode(h,null),p=_({},this.requestOptions,r,{query:c});return w(u+"/jobs/"+e+"/results/"+t,p).then(function(e){return i._decode(e.data)})},T.prototype.getResultImage=function(e,t,r,i){var n=this,a=this.parsedUrl.path,s=_({},r.toJSON(),{f:"json"}),o=this._gpEncode(s),l=_({},this.requestOptions,i,{query:o});return w(a+"/jobs/"+e+"/results/"+t,l).then(function(e){return n._decode(e.data)})},T.prototype.getResultMapImageLayer=function(a){return n(this,void 0,void 0,function(){var t,r,i,n;return s(this,function(e){switch(e.label){case 0:return t=this.parsedUrl.path,r=t.indexOf("/GPServer/"),i=t.substring(0,r),n=i+"/MapServer/jobs/"+a,[4,h.create(function(t){return M.e(11).then(function(){var e=[M(1572)];t.apply(null,e)}.bind(this)).catch(M.oe)})];case 1:return[2,new(e.sent())({url:n})]}})})},T.prototype.submitJob=function(e,t){return this._constructRequest("submitJob",e,t).then(function(e){return x.fromJSON(e.data)})},T.prototype.waitForJobCompletion=function(n,e){var a=this;void 0===e&&(e={});var t=e.interval,s=void 0===t?1e3:t,o=e.signal,l=e.statusCallback;return h.create(function(r,i){h.onAbort(o,function(){a._clearTimer(n),i(h.createAbortError())}),a._clearTimer(n);var e=setInterval(function(){a._timers.has(n)||i(h.createAbortError()),a._getJobStatus(n,a.requestOptions).then(function(e){var t=e.jobStatus;switch(t){case"job-succeeded":a._clearTimer(n),r(e);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":l&&l(e);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":a._clearTimer(n),i(e);break;default:u.neverReached(t)}})},s);a._timers.set(n,e)})},T.prototype._clearTimer=function(e){this._timers.has(e)&&(clearInterval(this._timers.get(e)),this._timers.delete(e))},T.prototype._constructRequest=function(g,v,x){var m=this,b={},S={},e=[];return this._collectGeometries(v,e,b),c.normalizeCentralMeridian(e).then(function(e){var t=m.outSpatialReference,r=m.parsedUrl,i=m.processExtent,n=m.processSpatialReference,a=m.returnFeatureCollection,s=m.returnM,o=m.returnZ,l=r.path;for(var u in b){var h=b[u];S[u]=e.slice(h[0],h[1])}var c=t?t.wkid||t:null,p=n?n.wkid||n:null,d=_({},i?{context:{extent:i,outSR:c,processSR:p}}:{"env:outSR":c,"env:processSR":p},v,"execute"===g?{returnFeatureCollection:a||void 0,returnM:s||void 0,returnZ:o||void 0}:null,{f:"json"}),f=m._gpEncode(d,null,S),y=_({},m.requestOptions,x,{query:f});return w(l+"/"+g,y)})},T.prototype._collectGeometries=function(e,t,r){for(var i in e){var n=e[i];if(n&&"object"==typeof n&&n instanceof g){var a=n.features;r[i]=[t.length,t.length+a.length],a.forEach(function(e){t.push(e.geometry)})}}},T.prototype._decode=function(e){var t=e.dataType,r=b.fromJSON(e);switch(t){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":return r;case"GPDate":r.value=new Date(r.value);break;case"GPDataFile":r.value=y.fromJSON(r.value);break;case"GPLinearUnit":r.value=m.fromJSON(r.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":var i=e.value.url;r.value=i?y.fromJSON(r.value):g.fromJSON(r.value);break;case"GPRasterData":case"GPRasterDataLayer":var n=e.value.mapImage;r.value=n?d.fromJSON(n):S.fromJSON(r.value);break;case"GPField":r.value=p.fromJSON(r.value);break;case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return r;case"GPMultiValue:GPDate":var a=r.value;r.value=a.map(function(e){return new Date(e)});break;case"GPMultiValue:GPDataFile":r.value=r.value.map(function(e){return y.fromJSON(e)});break;case"GPMultiValue:GPLinearUnit":r.value=r.value.map(function(e){return m.fromJSON(e)});break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":r.value=r.value.map(function(e){return g.fromJSON(e)});break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":r.value=r.value.map(function(e){return e?d.fromJSON(e):S.fromJSON(r.value)});break;case"GPMultiValue:GPField":r.value=r.value.map(function(e){return p.fromJSON(e)});break;default:u.neverReached(t)}return r},T.prototype._gpEncode=function(e,t,r){var i=this;for(var n in e){var a=e[n];Array.isArray(a)?e[n]=JSON.stringify(a.map(function(e){return i._gpEncode({item:e},!0).item},this)):a instanceof Date&&(e[n]=a.getTime())}return this._encode(e,t,r)},T.prototype._getJobStatus=function(e,t){var r=this.parsedUrl.path+"/jobs/"+e,i=_({},this.requestOptions,t,{query:{f:"json"}});return w(r,i).then(function(e){return x.fromJSON(e.data)})},i([a.property({type:l})],T.prototype,"outSpatialReference",void 0),i([a.property({type:o})],T.prototype,"processExtent",void 0),i([a.property({type:l})],T.prototype,"processSpatialReference",void 0),i([a.property({nonNullable:!0})],T.prototype,"returnFeatureCollection",void 0),i([a.property({nonNullable:!0})],T.prototype,"returnM",void 0),i([a.property({nonNullable:!0})],T.prototype,"returnZ",void 0),i([a.subclass("esri/tasks/Geoprocessor")],T);function T(e){var t=P.call(this,e)||this;return t._timers=new Map,t.outSpatialReference=null,t.processExtent=null,t.processSpatialReference=null,t.returnFeatureCollection=!1,t.returnM=!1,t.returnZ=!1,t}var P}.apply(null,r))||(e.exports=i)},2183:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(91),r(7),r(2),r(37)],void 0===(n=function(e,t,r,i,n,a,s,o){return u=s.declared(a.JSONSupport),r(l,u),i([s.property({type:o})],l.prototype,"extent",void 0),i([s.property()],l.prototype,"height",void 0),i([s.property()],l.prototype,"href",void 0),i([s.property()],l.prototype,"opacity",void 0),i([s.property()],l.prototype,"rotation",void 0),i([s.property()],l.prototype,"scale",void 0),i([s.property()],l.prototype,"visible",void 0),i([s.property()],l.prototype,"width",void 0),i([s.subclass("esri.layer.support.MapImage")],l);function l(){var e=null!==u&&u.apply(this,arguments)||this;return e.extent=null,e.height=null,e.href=null,e.opacity=1,e.rotation=0,e.scale=null,e.visible=!0,e.width=null,e}var u}.apply(null,i))||(e.exports=n)},2184:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(7),r(2)],void 0===(n=function(e,t,r,i,n,a){return o=a.declared(n.JSONSupport),r(s,o),i([a.property({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],s.prototype,"itemId",void 0),i([a.property({type:String,json:{write:!0}})],s.prototype,"url",void 0),i([a.subclass("esri.tasks.support.DataFile")],s);function s(e){var t=o.call(this,e)||this;return t.itemId=null,t.url=null,t}var o}.apply(null,i))||(e.exports=n)},2185:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(17),r(7),r(2),r(1672)],void 0===(n=function(e,t,r,i,n,a,s,o){var l,u=new n.default({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"});return l=s.declared(a.JSONSupport),r(h,l),i([s.property()],h.prototype,"jobId",void 0),i([s.property({json:{read:u.read}})],h.prototype,"jobStatus",void 0),i([s.property({type:[o]})],h.prototype,"messages",void 0),i([s.subclass("esri.tasks.support.JobInfo")],h);function h(e){var t=l.call(this,e)||this;return t.jobId=null,t.jobStatus=null,t.messages=null,t}}.apply(null,i))||(e.exports=n)},2186:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(17),r(7),r(2)],void 0===(n=function(e,t,r,i,n,a,s){var o,l=new n.default({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1});return o=s.declared(a.JSONSupport),r(u,o),i([s.property({json:{write:!0}})],u.prototype,"distance",void 0),i([s.property({json:{read:l.read,write:l.write}})],u.prototype,"units",void 0),i([s.subclass("esri/tasks/support/LinearUnit")],u);function u(e){var t=o.call(this,e)||this;return t.distance=0,t.units=null,t}}.apply(null,i))||(e.exports=n)},2187:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(17),r(7),r(2)],void 0===(n=function(e,t,r,i,n,a,s){var o,l=new n.default({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"});return o=s.declared(a.JSONSupport),r(u,o),i([s.property({json:{read:l.read,write:l.write}})],u.prototype,"dataType",void 0),i([s.property()],u.prototype,"value",void 0),i([s.subclass("esri.tasks.support.ParameterValue")],u);function u(e){var t=o.call(this,e)||this;return t.dataType=null,t.value=null,t}}.apply(null,i))||(e.exports=n)},2188:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(7),r(2)],void 0===(n=function(e,t,r,i,n,a){return o=a.declared(n.JSONSupport),r(s,o),i([a.property()],s.prototype,"format",void 0),i([a.property({json:{read:{source:"itemID"},write:{target:"itemID"}}})],s.prototype,"itemId",void 0),i([a.property()],s.prototype,"url",void 0),i([a.subclass("esri/tasks/support/RasterData")],s);function s(e){var t=o.call(this,e)||this;return t.format=null,t.itemId=null,t.url=null,t}var o}.apply(null,i))||(e.exports=n)},2189:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(17)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=new r.default({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"});t.fromJSON=i.fromJSON.bind(i),t.toJSON=i.toJSON.bind(i)}.apply(null,i))||(e.exports=n)},2190:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(17)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=new r.default({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"});t.fromJSON=i.fromJSON.bind(i),t.toJSON=i.toJSON.bind(i)}.apply(null,i))||(e.exports=n)},2191:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(107),r(24),r(15),r(130)],void 0===(n=function(e,t,l,x,m,b){Object.defineProperty(t,"__esModule",{value:!0});var S="simple-marker",_="simple-line";t.applyVisualVariables=function(e,t){var r=t.graphic,i=t.renderer,n=t.symbol,a=n.type;if("text"!==a&&"shield-label-symbol"!==a&&"visualVariables"in i&&i.visualVariables){var s=i.getVisualVariablesForType("size"),o=i.getVisualVariablesForType("color"),l=i.getVisualVariablesForType("opacity"),u=i.getVisualVariablesForType("rotation"),h=s&&s[0],c=o&&o[0],p=l&&l[0],d=u&&u[0];if(h){var f=a===S?n.style:null,y=b.getSize(h,r,{shape:f});null!=y&&(a===S?e.size=m.px2pt(y):"picture-marker"===a?(e.width=m.px2pt(y),e.height=m.px2pt(y)):a===_?e.width=m.px2pt(y):e.outline&&(e.outline.width=m.px2pt(y)))}if(c){var g=b.getColor(c,r);(g&&a===S||a===_||"simple-fill"===a)&&(e.color=x.toJSON(g))}if(p){var v=b.getOpacity(p,r);null!=v&&e.color&&(e.color[3]=Math.round(255*v))}d&&(e.angle=-b.getRotationAngle(i,r))}},t.createMultipointLayer=function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},t.createPolygonLayer=function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},t.createPointLayer=function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},t.createPolylineLayer=function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}},t.getVisibleLayerViews=function(e,t){var r,i,n=e.allLayerViews.items;if(t===e.scale)r=n.filter(function(e){return!e.suspended});else{r=[];for(var a=0,s=n;a<s.length;a++){var o=s[a];(i=o.parent)&&"esri.views.layers.GroupLayerView"===i.declaredClass&&!l.includes(r,o.parent)||!o.visible||t&&"isVisibleAtScale"in o&&!o.isVisibleAtScale(t)||r.push(o)}}return r},t.isBingMapsLayer=function(e){return e&&"bing-maps"===e.type},t.isCSVLayer=function(e){return e&&"csv"===e.type},t.isFeatureLayer=function(e){return e&&"feature"===e.type},t.isGraphicsLayer=function(e){return e&&"graphics"===e.type},t.isGroupLayer=function(e){return e&&"group"===e.type},t.isImageryLayer=function(e){return e&&"imagery"===e.type},t.isKMLLayer=function(e){return e&&"kml"===e.type},t.isMapImageLayer=function(e){return e&&"map-image"===e.type},t.isMapNotesLayer=function(e){return e&&"map-notes"===e.type},t.isOpenStreetMapLayer=function(e){return e&&"open-street-map"===e.type},t.isStreamLayer=function(e){return e&&"stream"===e.type},t.isTileLayer=function(e){return e&&"tile"===e.type},t.isVectorTileLayer=function(e){return e&&"vector-tile"===e.type},t.isWebTileLayer=function(e){return e&&"web-tile"===e.type},t.isWMSLayer=function(e){return e&&"wms"===e.type},t.isWMTSLayer=function(e){return e&&"wmts"===e.type}}.apply(null,i))||(e.exports=n)},2192:function(e,t,r){var i,n;i=[r(13)],void 0===(n=function(e){return e.createSubclass({declaredClass:"esri.tasks.support.PrintTemplate",properties:{attributionVisible:{value:!0,type:Boolean},exportOptions:{value:{width:800,height:1100,dpi:96},type:Object},forceFeatureAttributes:{value:!1,type:Boolean},format:{value:"png32",type:String},label:{value:null,type:String},layout:{value:"map-only",type:String},layoutOptions:{value:null,type:Object},outScale:{value:0,type:Number},preserveScale:{value:!0,type:Boolean},showLabels:{value:!0,type:Boolean}}})}.apply(null,i))||(e.exports=n)}}]);