(function(){(this||window).webpackJsonp.registerAbsMids({"esri/core/libs/gl-matrix-2/mat4f64":1633,"esri/views/3d/webgl-engine/lib/Util":1642,"esri/views/3d/support/stack":1646,"esri/views/3d/support/geometryUtils":1650,"esri/core/libs/gl-matrix-2/mat3f64":1654,"esri/core/libs/gl-matrix-2/vec4":1660,"esri/core/libs/gl-matrix-2/vec4f64":1661,"esri/views/3d/webgl-engine/lib/ComponentUtils":1673,"esri/core/libs/gl-matrix-2/vec3f32":1684,"esri/core/ObjectStack":1686,"esri/core/libs/gl-matrix-2/factories/mat4f64":1714,"esri/views/3d/support/geometryUtils/ray":1720,"esri/views/3d/webgl-engine/lib/geometryDataUtils":1721,"esri/views/3d/support/geometryUtils/vector":1760,"esri/views/3d/support/geometryUtils/plane":1761,"esri/core/libs/gl-matrix-2/factories/vec3f32":1803,"esri/views/3d/support/geometryUtils/lineSegment":1812,"esri/views/3d/support/geometryUtils/boundedPlane":1906,"esri/views/3d/support/geometryUtils/sphere":1907,"esri/views/3d/support/geometryUtils/triangle":1908,"esri/core/libs/gl-matrix-2/factories/vec4f64":2437,"esri/views/3d/support/geometryUtils/axisAngle":2443,"esri/core/VectorStack":2444,"esri/views/3d/support/geometryUtils/frustum":2445,"esri/views/3d/support/geometryUtils/clipRay":2446})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1633:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1714)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4f64=r}.apply(null,n))||(e.exports=i)},1642:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(33),r(484),r(48),r(127),r(150),r(1660),r(1661)],void 0===(i=function(e,t,o,r,a,u,V,c,n){function s(e,t){if(!e){t=t||"assert";var r=new Error(t);throw r.stack&&console.log(r.stack),new d(t)}}function i(e){for(var t in e)return t}function v(e,t){e[12]=t[0],e[13]=t[1],e[14]=t[2]}function f(e,t){void 0===t&&(t=0);for(var r=0,n=0;n<4;n++)r+=e[t+n]*h[n];return r}Object.defineProperty(t,"__esModule",{value:!0});var l=n.vec4f64.create(),d=(p.prototype.toString=function(){return"AssertException: "+this.message},p);function p(e){this.message=e}t.AssertException=d,t.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex",TANGENT:"tangent"},t.assert=s,t.verify=function(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))},t.encodeInt16=function(e){return o.clamp(Math.round(32767*e),-32767,32767)},t.encodeNormal=function(e,t){var r=Math.abs(e[0]),n=Math.abs(e[1]),i=1/(r+n+Math.abs(e[2])),c=r*i,o=n*i,a=Math.min(e[2]*i,0);t[0]=(e[0]<0?-1:1)*(c-a),t[1]=(e[1]<0?-1:1)*(o-a)},t.fallbackIfUndefined=function(e,t){return void 0===e?t:e},t.hex2rgb=function(e){return[((e=Math.floor(e))>>16&255)/255,(e>>8&255)/255,(255&e)/255]},t.rgb2hex=function(e){return"0x"+((o.clamp(Math.round(255*e[0]),0,255)<<16)+(o.clamp(Math.round(255*e[1]),0,255)<<8)+o.clamp(Math.round(255*e[2]),0,255)).toString(16)},t.dec2hex=function(e){var t=e.toString(16);return"00000000".substr(0,8-t.length)+t},t.rayTriangle3D=function(e,t,r,n,i,c,o,a,s){void 0===s&&(s=V.vec3f64.create());var u=n[o]-r[c],v=n[o+1]-r[c+1],f=n[o+2]-r[c+2],l=i[a]-r[c],d=i[a+1]-r[c+1],p=i[a+2]-r[c+2],g=t[1]*p-d*t[2],h=t[2]*l-p*t[0],m=t[0]*d-l*t[1],y=u*g+v*h+f*m;if(-1e-5<y&&y<1e-5)return!1;var b=1/y,M=e[0]-r[c],P=e[1]-r[c+1],w=e[2]-r[c+2];if(s[1]=b*(M*g+P*h+w*m),s[1]<0||1<s[1])return!1;var j=P*f-v*w,A=w*u-f*M,S=M*v-u*P;return s[2]=b*(t[0]*j+t[1]*A+t[2]*S),!(s[2]<0||1<s[1]+s[2]||(s[0]=b*(l*j+d*A+p*S),0))},t.rayBoxTest=function(e,t,r,n){var i,c=(r[0]-e[0])/t[0],o=(n[0]-e[0])/t[0];o<c&&(i=c,c=o,o=i);var a=(r[1]-e[1])/t[1],s=(n[1]-e[1])/t[1];if(s<a&&(i=a,a=s,s=i),s<c||o<a)return!1;c<a&&(c=a),s<o&&(o=s);var u=(r[2]-e[2])/t[2],v=(n[2]-e[2])/t[2];return v<u&&(i=u,u=v,v=i),!(v<c||o<u||(v<o&&(o=v),o<0))},t.rayRay2D=function(e,t,r,n,i,c){void 0===c&&(c=u.vec2f64.create());var o=(n[i]-r[i])*(t[0]-e[0])-(n[0]-r[0])*(t[i]-e[i]),a=(n[0]-r[0])*(e[i]-r[i])-(n[i]-r[i])*(e[0]-r[0]);if(0==o)return!1;var s=a/o;return c[0]=e[0]+s*(t[0]-e[0]),c[1]=e[i]+s*(t[i]-e[i]),!0},t.project=function(e,t,r,n,i){i=i||e,l[0]=e[0],l[1]=e[1],l[2]=e[2],l[3]=1,c.vec4.transformMat4(l,l,t),2<i.length&&(i[2]=-l[2]),c.vec4.transformMat4(l,l,r),s(0!==l[3]),i[0]=l[0]/l[3],i[1]=l[1]/l[3],i[2]=l[2]/l[3],i[0]=(.5*i[0]+.5)*n[2]+n[0],i[1]=(.5*i[1]+.5)*n[3]+n[1]},t.getFirstObjectKey=i,t.getFirstObjectValue=function(e){return e[i(e)]},t.objectEmpty=function(e){for(var t in e)return!1;return!0},t.logWithBase=function(e,t){return Math.log(e)/Math.log(t)},t.setMatrixTranslation=v,t.setMatrixTranslation3=function(e,t,r,n){e[12]=t,e[13]=r,e[14]=n},t.getMatrixTranslation=function(e,t){return void 0===t&&(t=V.vec3f64.create()),t[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.createTranslationMatrix=function(e,t){return v(e=r.mat4.identity(e),t),e},t.isTranslationMatrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]},t.fovx2fovy=function(e,t,r){return 2*Math.atan(r*Math.tan(.5*e)/t)},t.fovy2fovx=function(e,t,r){return 2*Math.atan(t*Math.tan(.5*e)/r)},t.fovx2fovd=function(e,t,r){return 2*Math.atan(Math.sqrt(t*t+r*r)*Math.tan(.5*e)/t)},t.fovy2fovd=function(e,t,r){return 2*Math.atan(Math.sqrt(t*t+r*r)*Math.tan(.5*e)/r)},t.fovd2fovx=function(e,t,r){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+r*r))},t.fovd2fovy=function(e,t,r){return 2*Math.atan(r*Math.tan(.5*e)/Math.sqrt(t*t+r*r))},t.packFloatRGBA=function(e,t,r){void 0===r&&(r=0);for(var n=o.clamp(e,0,m),i=0;i<4;i++)t[r+i]=Math.floor(256*((c=n*g[i])-Math.floor(c)));var c},t.unpackFloatRGBA=f;var g=[1,256,65536,16777216],h=[1/256,1/65536,1/16777216,1/4294967296],m=f(new Uint8ClampedArray([255,255,255,255]));t.inverseProjectionInfo=function(e,t,r,n,i){var c=e;0===e[11]?(n[0]=2/(t*c[0]),n[1]=2/(r*c[5]),n[2]=(1+c[12])/c[0],n[3]=(1+c[13])/c[5],a.vec2.set(i,0,1)):(n[0]=-2/(t*c[0]),n[1]=-2/(r*c[5]),n[2]=(1-c[8])/c[0],n[3]=(1-c[9])/c[5],a.vec2.set(i,1,0))}}.apply(null,n))||(e.exports=i)},1646:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2444)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.sv2d=r.VectorStack.createVec2f64(),t.sv3d=r.VectorStack.createVec3f64(),t.sv4d=r.VectorStack.createVec4f64(),t.sm3d=r.VectorStack.createMat3f64(),t.sm4d=r.VectorStack.createMat4f64(),t.sq4d=r.VectorStack.createQuatf64()}.apply(null,n))||(e.exports=i)},1650:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2443),r(1906),r(2445),r(1812),r(1761),r(1720),r(1907),r(1908),r(1760)],void 0===(i=function(e,t,r,n,i,c,o,a,s,u,v){Object.defineProperty(t,"__esModule",{value:!0}),t.plane=o,t.boundedPlane=n,t.triangle=u,t.lineSegment=c,t.ray=a,t.sphere=s,t.frustum=i,t.vector=v,t.axisAngle=r}.apply(null,n))||(e.exports=i)},1654:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1659)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat3f64=r}.apply(null,n))||(e.exports=i)},1660:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1670)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=r}.apply(null,n))||(e.exports=i)},1661:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2437)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec4f64=r}.apply(null,n))||(e.exports=i)},1673:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(49),r(12)],void 0===(i=function(e,t,n,f){function c(e,t){if(null==e)return!0;var r=e.isVisibleBit,n=e.data,i=P(n);return t<n.length*i?M(r,n,t,i):b(e)}function s(e){return f.isSome(e.component)?e.component:-1}function l(e,t,r,n,i){c(t,n)&&d(e,r[n],j(r[n+1]),i)}function d(e,t,r,n){var i=0<e.length?e[e.length-1]:null,c=i?i.range[1]:-1,o=i?i.options:null;if(!(t<=c))if(c+1===t&&o===n)i.range[1]=r;else{var a={range:[t,r],options:n};e.push(a)}}function h(e){return void 0===e&&(e=!0),{isVisibleBit:!e,data:new Uint32Array(0)}}function p(e,t){return!i(e,t)}function r(e,t){return o(e,t,!0)}function i(e,t){return o(e,t,!1)}function o(e,t,r){var n=!1,i=(e=e||S).isVisibleBit,c=e.data,o=A(t),a=P(c),s=c.length*a,u=r===i;if(0===c.length||0===o)n=!u;else if(s<o&&!u)n=!0;else{for(var v=g(a),f=g(0),l=0;l<c.length-1;l++)if(n=!u&&c[l]!==v||u&&c[l]!==f)return n;var d=c.length-1,p=g((o-1)%a+1);n=!u&&(c[d]&p)!==p||u&&(c[d]&p)!==f}return n}function m(e,t){return t<A(e)}function y(e){return 0<e.length}function b(e){return!e.isVisibleBit}function M(e,t,r,n){var i=r/n|0,c=r-i*n;return 0!=(t[i]&1<<c)===e}function P(e){return 8*e.BYTES_PER_ELEMENT}function w(e,t,r){return e&~(1<<t)|(r?1:0)<<t}function g(e){return a[e]}function j(e){return e-1}function A(e){return Math.max(0,e.length-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateVisibility=function(e,t,r,n){if(m(t,r)){null==e&&(e=h());var i=e.isVisibleBit,c=e.data,o=P(c),a=r/o|0,s=r-o*a,u=(A(t)-1)/o|0,v=c,f=n===i;if(!(r<v.length*o)&&f){var l=1+a,d=Math.ceil(1.5*v.length),p=1+u,g=Math.max(l,d);g=Math.min(g,p),(c=new Uint32Array(g)).set(v)}a<c.length&&(c[a]=w(c[a],s,f)),e.data=c}return e},t.updateVisibilityWithCount=function(e,t,r,n){if(r<t){null==e&&(e=h());var i=e.isVisibleBit,c=e.data,o=P(c),a=r/o|0,s=r-o*a,u=(t-1)/o|0,v=c,f=n===i;if(!(r<v.length*o)&&f){var l=1+a,d=Math.ceil(1.5*v.length),p=1+u,g=Math.max(l,d);g=Math.min(g,p),(c=new Uint32Array(g)).set(v)}a<c.length&&(c[a]=w(c[a],s,f)),e.data=c}return e},t.getVisibility=c,t.hideAllComponents=function(e){var t;if(null==e)t=h(!1);else{(t=e).isVisibleBit=!0;for(var r=0;r<t.data.length;r++)t.data[r]=0}return t},t.unhideAllComponents=function(e){var t;if(null!=e){(t=e).isVisibleBit=!1;for(var r=0;r<t.data.length;r++)t.data[r]=0}return t},t.generateVisibleIndexRanges=function(e,t){var r;if(e)if(y(t))if(0===e.data.length){var n=[],i=[[t[0],j(t[t.length-1])]];r=b(e)?i:n}else{r=[];for(var c=e.isVisibleBit,o=e.data,a=P(o),s=o.length*a,u=A(t),v=!1,f=0;f<s&&f<u;f++){var l=M(c,o,f,a);if(l!==v){var d=t[f];if(l)r.push([d,0]);else(g=r[r.length-1])[1]=j(d);v=l}}var p=b(e);if(s<u&&p&&!v)r.push([t[s],j(t[u])]);else if(v){var g=r[r.length-1],h=p?u:Math.min(u,s);g[1]=j(t[h])}}else{n=[],i=null;r=b(e)?i:n}else r=null;return r},t.addHighlight=function(e,t,r,n){var i,c={component:t,options:r,id:n};(e=e||[]).push(c);for(var o=s(c),a=e.length-1;0<a&&o<s(e[a-1]);)i=[e[a],e[a-1]],e[a-1]=i[0],e[a]=i[1],--a;return e},t.removeHighlight=function(e,t){if(!e)return e;var r=e.filter(function(e){return e.id!==t});return 0===r.length?null:r},t.generateHighlightedIndexRanges=function(e,t,r){if(!t)return null;if(!y(r))return!e||b(e)?t.map(function(e){return{range:null,options:e.options}}):null;for(var n=r[0],i=j(r[r.length-1]),c=[],o=p(e,r),a=0;a<t.length;++a){var s=t[a].options,u=t[a].component;if(f.isSome(u))l(c,e,r,u,s);else if(o)d(c,n,i,s);else for(var v=0;v<A(r);++v)l(c,e,r,v,s)}return 0<c.length?c:null},t.hasHighlights=function(e,t,r){if(!t)return!1;if(!y(r))return!(e&&!b(e))&&0<t.length;for(var n=p(e,r),i=0,c=t;i<c.length;i++){var o=c[i].component;if(f.isSome(o))return!0;if(n)return!0;if(0<A(r))return!0}return!1},t.defaultVisibilities=h,t.isAllVisible=p,t.isAllHidden=function(e,t){return!r(e,t)},t.hasVisible=r,t.hasHidden=i;var S=h();t.createOffsets=function(e){return e instanceof Uint32Array?e:new Uint32Array(e)},t.hasComponent=m,t.hasComponents=y;for(var a=[],u=0;u<65;u++)a.push(Math.pow(2,u)-1);t.componentCount=A,t.componentFind=function(e,t){var r=n.binaryIndexOf(e,t,!0);return 0<=r?r:null}}.apply(null,n))||(e.exports=i)},1684:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1803)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec3f32=r}.apply(null,n))||(e.exports=i)},1686:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(510)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null),this.items=null},i.prototype.get=function(){return 0===this.itemsPtr&&r(function(){}),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]},i.prototype.reset=function(){var e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*c);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0},i.prototype.grow=function(){for(var e=0;e<Math.max(8,Math.min(this.items.length,c));e++)this.items.push(this.allocator())},i);function i(e){var t=this;this.allocator=e,this.items=[],this.itemsPtr=0,this.tickHandle=r.before(function(){return t.reset()}),this.grow()}t.ObjectStack=n;var c=1024;t.default=n}.apply(null,n))||(e.exports=i)},1714:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r,t.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},t.fromValues=function(e,t,r,n,i,c,o,a,s,u,v,f,l,d,p,g){return[e,t,r,n,i,c,o,a,s,u,v,f,l,d,p,g]},t.createView=function(e,t){return new Float64Array(e,t,16)},t.IDENTITY=r()}.apply(null,n))||(e.exports=i)},1720:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1686),r(15),r(48),r(118),r(150),r(1646)],void 0===(i=function(e,t,r,o,a,s,n,u){function v(e){return e?{origin:n.vec3f64.clone(e.origin),direction:n.vec3f64.clone(e.direction)}:{origin:n.vec3f64.create(),direction:n.vec3f64.create()}}function i(e,t,r){return void 0===r&&(r=v()),s.vec3.copy(r.origin,e),s.vec3.copy(r.direction,t),r}function c(e,t,r){void 0===r&&(r=v());var n=o.castRenderScreenPointArray3(a.vec2.copy(u.sv3d.get(),t));n[2]=0,e.unprojectPoint(n,r.origin);var i=o.castRenderScreenPointArray3(a.vec2.copy(u.sv3d.get(),t));i[2]=1;var c=e.unprojectPoint(i,u.sv3d.get());return s.vec3.subtract(r.direction,c,r.origin),r}function f(e,t,r){void 0===r&&(r=v()),s.vec3.copy(r.origin,e.eye);var n=s.vec3.set(u.sv3d.get(),t[0],t[1],1),i=e.unprojectPoint(n,u.sv3d.get());return s.vec3.subtract(r.direction,i,r.origin),r}function l(e,t){var r=s.vec3.cross(u.sv3d.get(),s.vec3.normalize(u.sv3d.get(),e.direction),s.vec3.subtract(u.sv3d.get(),t,e.origin));return s.vec3.dot(r,r)}function d(){return{origin:null,direction:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=v,t.wrap=function(e,t){var r=p.get();return r.origin=e,r.direction=t,r},t.copy=function(e,t){return void 0===t&&(t=v()),i(e.origin,e.direction,t)},t.fromPoints=function(e,t,r){return void 0===r&&(r=v()),s.vec3.copy(r.origin,e),s.vec3.subtract(r.direction,t,e),r},t.fromValues=i,t.fromScreen=function(e,t,r){return void 0===r&&(r=v()),c(e,e.screenToRender(t,o.castRenderScreenPointArray3(u.sv3d.get())),r)},t.fromRender=c,t.fromScreenAtEye=function(e,t,r){return void 0===r&&(r=v()),f(e,e.screenToRender(t,o.castRenderScreenPointArray3(u.sv3d.get())),r)},t.fromRenderAtEye=f,t.distance2=l,t.distance=function(e,t){return Math.sqrt(l(e,t))},t.closestPoint=function(e,t,r){var n=s.vec3.dot(e.direction,s.vec3.subtract(r,t,e.origin));return s.vec3.add(r,e.origin,s.vec3.scale(r,e.direction,n)),r},t.createWrapper=d;var p=new r.ObjectStack(d)}.apply(null,n))||(e.exports=i)},1721:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(118),r(150),r(1908)],void 0===(i=function(e,t,d,r,p){Object.defineProperty(t,"__esModule",{value:!0});var n=1,i=null,c=new Uint32Array([0]);t.generateDefaultIndexArray=function(e){if(1===e)return c;if(n<e||null==i){for(;n<e;)n*=2;i=new Uint32Array(n);for(var t=0;t<n;t++)i[t]=t}return new Uint32Array(i.buffer,0,e)},t.computeAttachmentOriginTriangles=function(e,t,r){if(!e)return!1;var n=e.strideIdx,i=e.offsetIdx,c=e.data;d.vec3.set(r,0,0,0),d.vec3.set(y,0,0,0);for(var o=0,a=0,s=0;s<t.length-2;s+=3){var u=t[s+0]*n+i,v=t[s+1]*n+i,f=t[s+2]*n+i;d.vec3.set(g,c[u+0],c[u+1],c[u+2]),d.vec3.set(h,c[v+0],c[v+1],c[v+2]),d.vec3.set(m,c[f+0],c[f+1],c[f+2]);var l=p.areaPoints3d(g,h,m);l?(d.vec3.add(g,g,h),d.vec3.add(g,g,m),d.vec3.scale(g,g,1/3*l),d.vec3.add(r,r,g),o+=l):(d.vec3.add(y,y,g),d.vec3.add(y,y,h),d.vec3.add(y,y,m),a+=3)}return!(0===a&&0===o||(0!==o?(d.vec3.scale(r,r,1/o),0):0===a||(d.vec3.scale(r,y,1/a),0)))},t.computeAttachmentOriginPoints=function(e,t,r){if(!e||!t)return!1;var n=e.strideIdx,i=e.offsetIdx,c=e.data;d.vec3.set(r,0,0,0);for(var o=-1,a=0,s=0;s<t.length;s++){var u=t[s]*n+i;o!==u&&(r[0]+=c[u+0],r[1]+=c[u+1],r[2]+=c[u+2],a++),o=u}return 1<a&&d.vec3.scale(r,r,1/a),0<a},t.computeAttachmentOriginLines=function(e,t,r){if(!e)return!1;var n=e.strideIdx,i=e.offsetIdx,c=e.data;d.vec3.set(r,0,0,0),d.vec3.set(y,0,0,0);for(var o=0,a=0,s=t?t.length-1:c.length/n-1,u=0;u<s;u+=2){var v=(t?t[u+0]:u+0)*n+i,f=(t?t[u+1]:u+1)*n+i;g[0]=c[v+0],g[1]=c[v+1],g[2]=c[v+2],h[0]=c[f+0],h[1]=c[f+1],h[2]=c[f+2],d.vec3.scale(g,d.vec3.add(g,g,h),.5);var l=d.vec3.dist(g,h);0<l?(d.vec3.add(r,r,d.vec3.scale(g,g,l)),o+=l):(d.vec3.add(y,y,g),a++)}return 0!==o?(d.vec3.scale(r,r,1/o),!0):0!==a&&(d.vec3.scale(r,y,1/a),!0)};var o=0;t.getNewId=function(){return o++};var g=r.vec3f64.create(),h=r.vec3f64.create(),m=r.vec3f64.create(),y=r.vec3f64.create()}.apply(null,n))||(e.exports=i)},1760:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(33),r(118)],void 0===(i=function(e,t,n,i){function c(e,t){return i.vec3.dot(e,t)/i.vec3.length(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.projectPoint=function(e,t,r){var n=c(e,t);return i.vec3.scale(r,e,n)},t.projectPointSignedLength=c,t.angle=function(e,t){var r=i.vec3.dot(e,t)/(i.vec3.length(e)*i.vec3.length(t));return-n.acosClamped(r)}}.apply(null,n))||(e.exports=i)},1761:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(33),r(118),r(1646)],void 0===(i=function(e,t,s,u,c){function o(e){return void 0===e&&(e=t.UP),[e[0],e[1],e[2],e[3]]}function n(e,t){return void 0===t&&(t=o()),i(e[0],e[1],e[2],e[3],t)}function i(e,t,r,n,i){return void 0===i&&(i=o()),i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function a(e,t,r){void 0===r&&(r=o()),u.vec3.copy(r,t);var n=u.vec3.dot(t,t);return 1e-5<Math.abs(n-1)&&1e-12<n&&u.vec3.scale(r,r,1/Math.sqrt(n)),v(r,e,r),r}function v(e,t,r){return e!==r&&n(e,r),r[3]=-u.vec3.dot(r,t),r}function f(e,t,r,n){return void 0===n&&(n=o()),a(r,u.vec3.cross(c.sv3d.get(),t,e),n)}function l(e,t,r){var n=u.vec3.scale(c.sv3d.get(),e,u.vec3.dot(e,t));return u.vec3.subtract(r,t,n),r}function d(e,t){return u.vec3.dot(e,t)+e[3]}function p(e,t,r,n,i,c){var o=u.vec3.dot(e,r);if(0===o)return!1;var a=-(u.vec3.dot(e,t)+e[3])/o;return i&&(a=n?Math.max(0,a):s.clamp(a,0,1)),!(a<0||!n&&1<a||(u.vec3.add(c,t,u.vec3.scale(c,r,a)),0))}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.wrap=function(e,t,r,n){return i(e,t,r,n,c.sv4d.get())},t.copy=n,t.fromValues=i,t.fromNormalAndOffset=function(e,t,r){return void 0===r&&(r=o()),u.vec3.copy(r,e),r[3]=t,r},t.fromPositionAndNormal=a,t.fromPoints=function(e,t,r,n){return void 0===n&&(n=o()),f(u.vec3.subtract(c.sv3d.get(),e,t),u.vec3.subtract(c.sv3d.get(),r,t),e,n)},t.setOffsetFromPoint=v,t.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},t.fromVectorsAndPoint=f,t.intersectRay=function(e,t,r){return p(e,t.origin,t.direction,!0,!1,r)},t.intersectLineSegment=function(e,t,r){return p(e,t.origin,t.vector,!1,!1,r)},t.intersectLineSegmentClamp=function(e,t,r){return p(e,t.origin,t.vector,!1,!0,r)},t.isSphereFullyInside=function(e,t){var r=t.center,n=t.radius;return 0<=d(e,r)-n},t.isSphereFullyOutside=function(e,t){var r=t.center,n=t.radius;return d(e,r)+n<0},t.isPointInside=function(e,t){return 0<=d(e,t)},t.isPointOutside=function(e,t){return d(e,t)<0},t.isAABBFullyInside=function(e,t){var r=t[0],n=t[1],i=t[2],c=t[3],o=t[4],a=t[5];return 0<=e[0]*(0<e[0]?r:c)+e[1]*(0<e[1]?n:o)+e[2]*(0<e[2]?i:a)+e[3]},t.clip=function(e,t){var r=u.vec3.dot(e,t.ray.direction),n=-d(e,t.ray.origin);if(n<0&&0<=r)return!1;if(-1e-6<r&&r<1e-6)return 0<n;if((n<0||r<0)&&!(n<0&&r<0))return!0;var i=n/r;return 0<r?i<t.c1&&(t.c1=i):i>t.c0&&(t.c0=i),t.c0<=t.c1},t.projectPoint=function(e,t,r){var n=u.vec3.scale(c.sv3d.get(),e,-e[3]),i=l(e,u.vec3.subtract(c.sv3d.get(),t,n),c.sv3d.get());return u.vec3.add(r,i,n),r},t.projectVector=l,t.distance=function(e,t){return Math.abs(d(e,t))},t.signedDistance=d,t.UP=[0,0,1,0]}.apply(null,n))||(e.exports=i)},1803:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(){return new Float32Array(3)}function n(e,t,r){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}function i(){return r()}function c(){return n(1,1,1)}function o(){return n(1,0,0)}function a(){return n(0,1,0)}function s(){return n(0,0,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r,t.clone=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.fromValues=n,t.createView=function(e,t){return new Float32Array(e,t,3)},t.zeros=i,t.ones=c,t.unitX=o,t.unitY=a,t.unitZ=s,t.ZEROS=i(),t.ONES=c(),t.UNIT_X=o(),t.UNIT_Y=a(),t.UNIT_Z=s()}.apply(null,n))||(e.exports=i)},1812:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(33),r(1686),r(118),r(150),r(1646)],void 0===(i=function(e,t,M,r,P,n,w){function i(e){return e?{origin:n.vec3f64.clone(e.origin),vector:n.vec3f64.clone(e.vector)}:{origin:n.vec3f64.create(),vector:n.vec3f64.create()}}function c(e,t){var r=f.get();return r.origin=e,r.vector=t,r}function o(e,t,r){return void 0===r&&(r=i()),P.vec3.copy(r.origin,e),P.vec3.copy(r.vector,t),r}function a(e,t){var r=P.vec3.subtract(w.sv3d.get(),t,e.origin),n=P.vec3.dot(e.vector,r),i=P.vec3.dot(e.vector,e.vector),c=M.clamp(n/i,0,1),o=P.vec3.subtract(w.sv3d.get(),P.vec3.scale(w.sv3d.get(),e.vector,c),r);return P.vec3.dot(o,o)}function s(e,t,r,n,i){var c=e.vector,o=e.origin,a=P.vec3.subtract(w.sv3d.get(),t,o),s=P.vec3.length(c),u=P.vec3.dot(c,a)/s;return P.vec3.scale(i,c,M.clamp(u,r,n)),P.vec3.add(i,i,e.origin)}function u(e,t,r,n){var i=e.origin,c=P.vec3.add(w.sv3d.get(),i,e.vector),o=t.origin,a=P.vec3.add(w.sv3d.get(),o,t.vector),s=w.sv3d.get(),u=w.sv3d.get();if(s[0]=i[0]-o[0],s[1]=i[1]-o[1],s[2]=i[2]-o[2],u[0]=a[0]-o[0],u[1]=a[1]-o[1],u[2]=a[2]-o[2],Math.abs(u[0])<1e-6&&Math.abs(u[1])<1e-6&&Math.abs(u[2])<1e-6)return!1;var v=w.sv3d.get();if(v[0]=c[0]-i[0],v[1]=c[1]-i[1],v[2]=c[2]-i[2],Math.abs(v[0])<1e-6&&Math.abs(v[1])<1e-6&&Math.abs(v[2])<1e-6)return!1;var f=s[0]*u[0]+s[1]*u[1]+s[2]*u[2],l=u[0]*v[0]+u[1]*v[1]+u[2]*v[2],d=s[0]*v[0]+s[1]*v[1]+s[2]*v[2],p=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],g=(v[0]*v[0]+v[1]*v[1]+v[2]*v[2])*p-l*l;if(Math.abs(g)<1e-6)return!1;var h=(f*l-d*p)/g,m=(f+l*h)/p;r&&(h=M.clamp(h,0,1),m=M.clamp(m,0,1));var y=w.sv3d.get(),b=w.sv3d.get();return y[0]=i[0]+h*v[0],y[1]=i[1]+h*v[1],y[2]=i[2]+h*v[2],b[0]=o[0]+m*u[0],b[1]=o[1]+m*u[1],b[2]=o[2]+m*u[2],n.tA=h,n.tB=m,n.pA=y,n.pB=b,n.distance2=P.vec3.squaredDistance(y,b),!0}Object.defineProperty(t,"__esModule",{value:!0}),t.create=i,t.wrap=c,t.copy=function(e,t){return void 0===t&&(t=i()),o(e.origin,e.vector,t)},t.fromValues=o,t.fromPoints=function(e,t,r){return void 0===r&&(r=i()),P.vec3.copy(r.origin,e),P.vec3.subtract(r.vector,t,e),r},t.distance2=a,t.distance=function(e,t){return Math.sqrt(a(e,t))},t.projectPoint=function(e,t,r){return s(e,t,0,1,r)},t.projectPointClamp=s,t.closestRayDistance2=function(e,t){if(u(e,c(t.origin,t.direction),!1,v)){var r=v.tA,n=v.pB,i=v.distance2;if(0<=r&&r<=1)return i;if(r<0)return P.vec3.squaredDistance(e.origin,n);if(1<r)return P.vec3.squaredDistance(P.vec3.add(w.sv3d.get(),e.origin,e.vector),n)}return null},t.closestLineSegmentPoint=function(e,t,r){return!!u(e,t,!0,v)&&(P.vec3.copy(r,v.pA),!0)},t.closestLineSegmentDistance2=function(e,t){return u(e,t,!0,v)?v.distance2:null};var v={tA:0,tB:0,pA:n.vec3f64.create(),pB:n.vec3f64.create(),distance2:0},f=new r.ObjectStack(function(){return{origin:null,vector:null}})}.apply(null,n))||(e.exports=i)},1906:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(34),r(3),r(33),r(1686),r(484),r(1633),r(118),r(150),r(500),r(1646),r(1812),r(1761),r(1720),r(1760)],void 0===(i=function(e,t,i,r,f,n,c,o,l,a,d,p,s,g,h,v){function u(e){return void 0===e&&(e=t.UP),{plane:g.create(e.plane),origin:a.vec3f64.clone(e.origin),basis1:a.vec3f64.clone(e.basis1),basis2:a.vec3f64.clone(e.basis2)}}function m(e,t){return void 0===t&&(t=u()),y(e.origin,e.basis1,e.basis2,t)}function y(e,t,r,n){return void 0===n&&(n=u()),l.vec3.copy(n.origin,e),l.vec3.copy(n.basis1,t),l.vec3.copy(n.basis2,r),g.fromVectorsAndPoint(r,t,e,n.plane),i=n,c="fromValues()",1e-6<Math.abs(l.vec3.dot(i.basis1,i.basis2)/(l.vec3.length(i.basis1)*l.vec3.length(i.basis2)))&&B.warn(c,"Provided basis vectors are not perpendicular"),1e-6<Math.abs(l.vec3.dot(i.basis1,i.plane))&&B.warn(c,"Basis vectors and plane normal are not perpendicular"),1e-6<Math.abs(-l.vec3.dot(i.plane,i.origin)-i.plane[3])&&B.warn(c,"Plane offset is not consistent with plane origin"),n;var i,c}function b(e,t,r){e!==r&&m(e,r);var n=l.vec3.scale(p.sv3d.get(),e.plane,t);return l.vec3.add(r.origin,r.origin,n),r.plane[3]-=t,r}function M(e,t){void 0===t&&(t=u());var r=(e[2]-e[0])/2,n=(e[3]-e[1])/2;return l.vec3.set(t.origin,e[0]+r,e[1]+n,0),l.vec3.set(t.basis1,r,0,0),l.vec3.set(t.basis2,0,n,0),g.fromValues(0,0,1,0,t.plane),t}function P(e,t,r){return!!g.intersectRay(e.plane,t,r)&&x(e,r)}function w(e,t,r){var n=k.get();I(e,t,n,k.get());for(var i=Number.POSITIVE_INFINITY,c=0,o=E;c<o.length;c++){var a=_(e,o[c],N.get()),s=p.sv3d.get();if(g.intersectLineSegment(n,a,s)){var u=d.directionFromTo(p.sv3d.get(),t.origin,s),v=Math.abs(f.acosClamped(l.vec3.dot(t.direction,u)));v<i&&(i=v,l.vec3.copy(r,s))}}return i===Number.POSITIVE_INFINITY?j(e,t,r):r}function j(e,t,r){if(P(e,t,r))return r;var n=k.get(),i=k.get();I(e,t,n,i);for(var c=Number.POSITIVE_INFINITY,o=0,a=E;o<a.length;o++){var s=_(e,a[o],N.get()),u=p.sv3d.get();if(g.intersectLineSegmentClamp(n,s,u)){var v=h.distance2(t,u);if(!g.isPointInside(i,u))continue;v<c&&(c=v,l.vec3.copy(r,u))}}return S(e,t.origin)<c&&l.vec3.copy(r,t.origin),r}function A(e,t,r){var n=e.origin,i=e.basis1,c=e.basis2,o=l.vec3.subtract(p.sv3d.get(),t,n),a=v.projectPointSignedLength(i,o)/l.vec3.length(i),s=v.projectPointSignedLength(c,o)/l.vec3.length(c),u=v.projectPointSignedLength(e.plane,o);return l.vec3.set(r,a,s,u)}function S(e,t){var r=A(e,t,p.sv3d.get()),n=e.basis1,i=e.basis2,c=l.vec3.length(n),o=l.vec3.length(i),a=Math.max(Math.abs(r[0])-c,0),s=Math.max(Math.abs(r[1])-o,0),u=r[2];return a*a+s*s+u*u}function V(e,t){var r=-e.plane[3];return v.projectPointSignedLength(e.plane,t)-r}function x(e,t){var r=l.vec3.subtract(p.sv3d.get(),t,e.origin),n=l.vec3.squaredLength(e.basis1),i=l.vec3.squaredLength(e.basis2),c=l.vec3.dot(e.basis1,r),o=l.vec3.dot(e.basis2,r);return-c-n<0&&c-n<0&&-o-i<0&&o-i<0}function O(e,t){var r=N.get();return l.vec3.copy(r.origin,e.origin),l.vec3.copy(r.vector,t),r}function _(e,t,r){var n=e.basis1,i=e.basis2,c=e.origin,o=l.vec3.scale(p.sv3d.get(),n,t.origin[0]),a=l.vec3.scale(p.sv3d.get(),i,t.origin[1]);l.vec3.add(r.origin,o,a),l.vec3.add(r.origin,r.origin,c);var s=l.vec3.scale(p.sv3d.get(),n,t.direction[0]),u=l.vec3.scale(p.sv3d.get(),i,t.direction[1]);return l.vec3.scale(r.vector,l.vec3.add(s,s,u),2),r}function I(e,t,r,n){var i=e.plane;g.fromVectorsAndPoint(i,t.direction,t.origin,r),g.fromVectorsAndPoint(r,i,t.origin,n)}Object.defineProperty(t,"__esModule",{value:!0});function U(){this.plane=g.create(),this.origin=a.vec3f64.create(),this.basis1=a.vec3f64.create(),this.basis2=a.vec3f64.create()}var B=r.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");t.BoundedPlaneClass=U,t.create=u,t.wrap=function(e,t,r){var n=R.get();return n.origin=e,n.basis1=t,n.basis2=r,n.plane=g.fromVectorsAndPoint(r,t,e,g.wrap(0,0,0,0)),n},t.copy=m,t.fromValues=y,t.elevate=b,t.setExtent=function(e,t,r){return M(t,r),b(r,V(e,e.origin),r),r},t.fromAABoundingRect=M,t.intersectRay=P,t.intersectRayClosestSilhouette=function(e,t,r){if(P(e,t,r))return r;var n=w(e,t,p.sv3d.get());return l.vec3.add(r,t.origin,l.vec3.scale(p.sv3d.get(),t.direction,l.vec3.distance(t.origin,n)/l.vec3.length(t.direction))),r},t.closestPointOnSilhouette=w,t.closestPoint=j,t.projectPoint=function(e,t,r){var n=g.projectPoint(e.plane,t,p.sv3d.get()),i=s.projectPointClamp(O(e,e.basis1),n,-1,1,p.sv3d.get()),c=s.projectPointClamp(O(e,e.basis2),n,-1,1,p.sv3d.get());return l.vec3.subtract(r,l.vec3.add(p.sv3d.get(),i,c),e.origin),r},t.projectPointLocal=A,t.distance2=S,t.distance=function(e,t){return Math.sqrt(S(e,t))},t.distanceToSilhouette=function(e,t){for(var r=Number.NEGATIVE_INFINITY,n=0,i=E;n<i.length;n++){var c=_(e,i[n],N.get()),o=s.distance2(c,t);r<o&&(r=o)}return Math.sqrt(r)},t.extrusionContainsPoint=function(e,t){return g.isPointInside(e.plane,t)&&x(e,t)},t.axisAt=function(e,t,r,n){return function(e,t,r){switch(t){case 0:l.vec3.copy(r,e.basis1),l.vec3.normalize(r,r);break;case 1:l.vec3.copy(r,e.basis2),l.vec3.normalize(r,r);break;case 2:l.vec3.copy(r,e.plane);break;default:i.neverReached(t)}return r}(e,r,n)},t.altitudeAt=V,t.setAltitudeAt=function(e,t,r,n){var i=V(e,t),c=l.vec3.scale(T,e.plane,r-i);return l.vec3.add(n,t,c),n},t.transform=function(e,t,r){return e!==r&&m(e,r),c.mat4.invert(L,t),c.mat4.transpose(L,L),l.vec3.transformMat4(r.basis1,e.basis1,L),l.vec3.transformMat4(r.basis2,e.basis2,L),l.vec3.transformMat4(r.plane,e.plane,L),l.vec3.transformMat4(r.origin,e.origin,t),g.setOffsetFromPoint(r.plane,r.origin,r.plane),r},t.UP={plane:g.create(),origin:a.vec3f64.fromValues(0,0,0),basis1:a.vec3f64.fromValues(1,0,0),basis2:a.vec3f64.fromValues(0,1,0)};var k=new n.ObjectStack(g.create),N=new n.ObjectStack(s.create),T=a.vec3f64.create(),R=new n.ObjectStack(function(){return{origin:null,basis1:null,basis2:null,plane:null}}),E=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],L=o.mat4f64.create()}.apply(null,n))||(e.exports=i)},1907:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(34),r(3),r(33),r(1686),r(484),r(118),r(150),r(1650),r(500),r(1646),r(1720)],void 0===(i=function(e,t,u,r,c,n,a,v,i,s,f,l,o){function d(e){return e?{radius:e.radius,center:i.vec3f64.clone(e.center)}:{radius:1,center:i.vec3f64.create()}}function p(e,t){return void 0===t&&(t=d()),g(e.radius,e.center,t)}function g(e,t,r){return void 0===r&&(r=d()),v.vec3.copy(r.center,t),r.radius=e,r}function h(e,t,r){var n=v.vec3.subtract(l.sv3d.get(),t.origin,e.center),i=v.vec3.dot(t.direction,t.direction),c=2*v.vec3.dot(t.direction,n),o=c*c-4*i*(v.vec3.dot(n,n)-e.radius*e.radius);if(o<0)return!1;var a=Math.sqrt(o),s=(-c-a)/(2*i),u=(-c+a)/(2*i);return(s<0||u<s&&0<u)&&(s=u),!(s<0||(r&&v.vec3.add(r,t.origin,v.vec3.scale(l.sv3d.get(),t.direction,s)),0))}function m(e,t,r){var n=l.sv3d.get(),i=l.sm4d.get();v.vec3.cross(n,t.origin,t.direction),v.vec3.cross(r,n,t.origin),v.vec3.scale(r,r,1/v.vec3.length(r)*e.radius);var c=b(e,t.origin),o=s.vector.angle(t.origin,r);return a.mat4.identity(i),a.mat4.rotate(i,i,o+c,n),v.vec3.transformMat4(r,r,i),r}function y(e,t,r){var n=v.vec3.subtract(l.sv3d.get(),t,e.center),i=v.vec3.scale(l.sv3d.get(),n,e.radius/v.vec3.length(n));return v.vec3.add(r,i,e.center)}function b(e,t){var r=v.vec3.subtract(l.sv3d.get(),t,e.center),n=v.vec3.length(r),i=e.radius+Math.abs(e.radius-n);return c.acosClamped(e.radius/i)}function M(e,t,r,n){var i=v.vec3.subtract(j,t,e.center);switch(r){case 0:var c=(o=f.cartesianToSpherical(i,j))[2];return v.vec3.set(n,-Math.sin(c),Math.cos(c),0);case 1:var o,a=(o=f.cartesianToSpherical(i,j))[1],s=(c=o[2],Math.sin(a));return v.vec3.set(n,-s*Math.cos(c),-s*Math.sin(c),Math.cos(a));case 2:return v.vec3.normalize(n,i);default:return void u.neverReached(r)}}function P(e,t){var r=v.vec3.subtract(x,t,e.center);return v.vec3.length(r)-e.radius}Object.defineProperty(t,"__esModule",{value:!0});var w=r.getLogger("esri.views.3d.support.geometryUtils.sphere");t.create=d,t.wrap=function(e,t){var r=A.get();return r.radius=e,r.center=t||V,r},t.copy=p,t.fromValues=g,t.elevate=function(e,t,r){return e!==r&&v.vec3.copy(r.center,e.center),r.radius=e.radius+t,r},t.setExtent=function(e,t,r){return w.error("sphere.setExtent is not yet supported"),e===r?r:p(e,r)},t.intersectRay=h,t.intersectScreen=function(e,t,r,n){return h(e,o.fromScreenAtEye(t,r,S),n)},t.intersectsRay=function(e,t){return h(e,t,null)},t.intersectRayClosestSilhouette=function(e,t,r){if(h(e,t,r))return r;var n=m(e,t,l.sv3d.get());return v.vec3.add(r,t.origin,v.vec3.scale(l.sv3d.get(),t.direction,v.vec3.distance(t.origin,n)/v.vec3.length(t.direction))),r},t.closestPointOnSilhouette=m,t.closestPoint=function(e,t,r){return h(e,t,r)?r:(o.closestPoint(t,e.center,r),y(e,r,r))},t.projectPoint=y,t.distanceToSilhouette=function(e,t){var r=v.vec3.subtract(l.sv3d.get(),t,e.center),n=v.vec3.squaredLength(r),i=e.radius*e.radius;return Math.sqrt(Math.abs(n-i))},t.angleToSilhouette=b;var j=i.vec3f64.create();t.axisAt=M,t.altitudeAt=P,t.setAltitudeAt=function(e,t,r,n){var i=P(e,t),c=M(e,t,2,x),o=v.vec3.scale(x,c,r-i);return v.vec3.add(n,t,o),n};var A=new n.ObjectStack(function(){return{center:null,radius:0}}),S=o.create(),V=i.vec3f64.create(),x=i.vec3f64.create();Object.freeze(V)}.apply(null,n))||(e.exports=i)},1908:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1686),r(48),r(118),r(150),r(1646),r(1812)],void 0===(i=function(e,t,r,s,O,n,b,M){function i(e){return e?{p0:n.vec3f64.clone(e.p0),p1:n.vec3f64.clone(e.p1),p2:n.vec3f64.clone(e.p2)}:{p0:n.vec3f64.create(),p1:n.vec3f64.create(),p2:n.vec3f64.create()}}function c(e,t,r,n){return void 0===n&&(n=i()),O.vec3.copy(n.p0,e),O.vec3.copy(n.p1,t),O.vec3.copy(n.p2,r),n}function o(e,t,r){var n=s.vec2.distance(e,t),i=s.vec2.distance(t,r),c=s.vec2.distance(r,e),o=(n+i+c)/2,a=o*(o-n)*(o-i)*(o-c);return a<=0?0:Math.sqrt(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=i,t.wrap=function(e,t,r){var n=a.get();return n.p0=e,n.p1=t,n.p2=r,n},t.copy=function(e,t){return void 0===t&&(t=i()),c(e.p0,e.p1,e.p2,t)},t.fromValues=c,t.distance2=function(e,t){var r=e.p0,n=e.p1,i=e.p2,c=O.vec3.subtract(b.sv3d.get(),n,r),o=O.vec3.subtract(b.sv3d.get(),i,n),a=O.vec3.subtract(b.sv3d.get(),r,i),s=O.vec3.subtract(b.sv3d.get(),t,r),u=O.vec3.subtract(b.sv3d.get(),t,n),v=O.vec3.subtract(b.sv3d.get(),t,i),f=O.vec3.cross(c,c,a),l=O.vec3.dot(O.vec3.cross(b.sv3d.get(),c,f),s),d=O.vec3.dot(O.vec3.cross(b.sv3d.get(),o,f),u),p=O.vec3.dot(O.vec3.cross(b.sv3d.get(),a,f),v);if(0<l&&0<d&&0<p){var g=O.vec3.dot(f,s);return g*g/O.vec3.dot(f,f)}var h=M.distance2(M.fromValues(r,c,P.get()),t),m=M.distance2(M.fromValues(n,o,P.get()),t),y=M.distance2(M.fromValues(i,a,P.get()),t);return Math.min(h,m,y)},t.intersectRay=function(e,t,r){var n=t.direction,i=t.origin,c=e.p0,o=e.p1,a=e.p2,s=o[0]-c[0],u=o[1]-c[1],v=o[2]-c[2],f=a[0]-c[0],l=a[1]-c[1],d=a[2]-c[2],p=n[1]*d-l*n[2],g=n[2]*f-d*n[0],h=n[0]*l-f*n[1],m=s*p+u*g+v*h;if(-1e-5<m&&m<1e-5)return!1;var y=1/m,b=i[0]-c[0],M=i[1]-c[1],P=i[2]-c[2],w=y*(b*p+M*g+P*h);if(w<0||1<w)return!1;var j=M*v-u*P,A=P*s-v*b,S=b*u-s*M,V=y*(n[0]*j+n[1]*A+n[2]*S);if(V<0||1<w+V)return!1;if(r){var x=y*(f*j+l*A+d*S);O.vec3.scale(r,n,x),O.vec3.add(r,i,r)}return!0},t.areaPoints2d=o,t.area2d=function(e){return o(e.p0,e.p1,e.p2)},t.areaPoints3d=function(e,t,r){return O.vec3.subtract(u,t,e),O.vec3.subtract(v,r,e),O.vec3.length(O.vec3.cross(u,u,v))/2};var P=new r.ObjectStack(M.create),a=new r.ObjectStack(function(){return{p0:null,p1:null,p2:null}}),u=n.vec3f64.create(),v=n.vec3f64.create()}.apply(null,n))||(e.exports=i)},2437:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function i(){return[0,0,0,0]}function r(e,t,r,n){return[e,t,r,n]}function n(){return i()}function c(){return r(1,1,1,1)}function o(){return r(1,0,0,0)}function a(){return r(0,1,0,0)}function s(){return r(0,0,1,0)}function u(){return r(0,0,0,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=i,t.clone=function(e){return[e[0],e[1],e[2],e[3]]},t.fromValues=r,t.fromArray=function(e){for(var t=i(),r=Math.min(4,e.length),n=0;n<r;++n)t[n]=e[n];return t},t.createView=function(e,t){return new Float64Array(e,t,4)},t.zeros=n,t.ones=c,t.unitX=o,t.unitY=a,t.unitZ=s,t.unitW=u,t.ZEROS=n(),t.ONES=c(),t.UNIT_X=o(),t.UNIT_Y=a(),t.UNIT_Z=s(),t.UNIT_W=u()}.apply(null,n))||(e.exports=i)},2443:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(118),r(1646),r(1760)],void 0===(i=function(e,t,n,i,c){function o(e){return void 0===e&&(e=t.UP),[e[0],e[1],e[2],e[3]]}function a(e,t,r,n,i){return void 0===i&&(i=o()),i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.wrap=function(e,t,r,n){return a(e,t,r,n,i.sv4d.get())},t.wrapAxisAngle=function(e,t){return a(e[0],e[1],e[2],t,i.sv4d.get())},t.copy=function(e,t){return void 0===t&&(t=o()),a(e[0],e[1],e[2],e[3],t)},t.fromValues=a,t.fromAxisAndAngle=function(e,t,r){return void 0===r&&(r=o()),n.vec3.copy(r,e),r[3]=t,r},t.fromPoints=function(e,t,r){return void 0===r&&(r=o()),n.vec3.cross(r,e,t),n.vec3.normalize(r,r),r[3]=c.angle(e,t),r},t.UP=[0,0,1,0]}.apply(null,n))||(e.exports=i)},2444:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(510),r(1654),r(1633),r(1708),r(127),r(150),r(1661)],void 0===(i=function(e,t,i,r,n,c,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var u=(v.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null),this.itemsPtr=0,this.items=null,this.buffers=null},v.prototype.get=function(){0===this.itemsPtr&&i(function(){});for(var e=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=e;){for(var t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),r=0;r<this.itemsPerBuffer;++r)this.items.push(this.itemCreate(t,r*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]},v.prototype.reset=function(){for(var e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0},v.createVec2f64=function(e){return void 0===e&&(e=f),new v(16,o.vec2f64.createView,e)},v.createVec3f64=function(e){return void 0===e&&(e=f),new v(24,a.vec3f64.createView,e)},v.createVec4f64=function(e){return void 0===e&&(e=f),new v(32,s.vec4f64.createView,e)},v.createMat3f64=function(e){return void 0===e&&(e=f),new v(72,r.mat3f64.createView,e)},v.createMat4f64=function(e){return void 0===e&&(e=f),new v(128,n.mat4f64.createView,e)},v.createQuatf64=function(e){return void 0===e&&(e=f),new v(32,c.quatf64.createView,e)},Object.defineProperty(v.prototype,"test",{get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}},enumerable:!0,configurable:!0}),v);function v(e,t,r){var n=this;this.itemByteSize=e,this.itemCreate=t,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(r/this.itemByteSize),this.tickHandle=i.before(function(){return n.reset()})}t.VectorStack=u;var f=4096}.apply(null,n))||(e.exports=i)},2445:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1686),r(484),r(118),r(150),r(1660),r(1661),r(1646),r(2446),r(1761)],void 0===(i=function(e,t,r,a,s,n,u,i,v,c,o){function f(e){if(e){var t=e.planes,r=e.points;return{planes:[o.create(t[0]),o.create(t[1]),o.create(t[2]),o.create(t[3]),o.create(t[4]),o.create(t[5])],points:[n.vec3f64.clone(r[0]),n.vec3f64.clone(r[1]),n.vec3f64.clone(r[2]),n.vec3f64.clone(r[3]),n.vec3f64.clone(r[4]),n.vec3f64.clone(r[5]),n.vec3f64.clone(r[6]),n.vec3f64.clone(r[7])]}}return{planes:[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()],points:[n.vec3f64.create(),n.vec3f64.create(),n.vec3f64.create(),n.vec3f64.create(),n.vec3f64.create(),n.vec3f64.create(),n.vec3f64.create(),n.vec3f64.create()]}}function l(e,t,r){void 0===r&&(r=f());for(var n=0;n<6;n++)o.copy(e[n],r.planes[n]);for(n=0;n<8;n++)s.vec3.copy(r.points[n],t[n]);return r}function d(e){var t=e.planes,r=e.points;o.fromPoints(r[4],r[0],r[3],t[0]),o.fromPoints(r[1],r[5],r[6],t[1]),o.fromPoints(r[4],r[5],r[1],t[2]),o.fromPoints(r[3],r[2],r[6],t[3]),o.fromPoints(r[0],r[1],r[2],t[4]),o.fromPoints(r[5],r[4],r[7],t[5])}function p(e,t){for(var r=0;r<6;r++)if(!o.clip(e[r],t))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.create=f,t.copy=function(e,t){return void 0===t&&(t=f()),l(e.planes,e.points,t)},t.fromValues=l,t.fromMatrix=function(e,t,r){void 0===r&&(r=f());var n=r.points,i=a.mat4.multiply(v.sm4d.get(),t,e);a.mat4.invert(i,i);for(var c=0;c<8;++c){var o=u.vec4.transformMat4(v.sv4d.get(),g[c],i);s.vec3.set(n[c],o[0]/o[3],o[1]/o[3],o[2]/o[3])}return d(r),r},t.recomputePlanes=d,t.intersectsSphere=function(e,t){for(var r=0;r<6;r++)if(o.isSphereFullyInside(e[r],t))return!1;return!0},t.intersectsRay=function(e,t){return p(e,c.fromRay(t,h.get()))},t.intersectsLineSegment=function(e,t,r){return p(e,c.fromLineSegmentAndDirection(t,r,h.get()))},t.intersectsPoint=function(e,t){for(var r=0;r<6;r++)if(0<o.signedDistance(e[r],t))return!1;return!0},t.intersectsAABB=function(e,t){for(var r=0;r<6;r++)if(o.isAABBFullyInside(e[r],t))return!1;return!0},t.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};var g=[i.vec4f64.fromValues(-1,-1,-1,1),i.vec4f64.fromValues(1,-1,-1,1),i.vec4f64.fromValues(1,1,-1,1),i.vec4f64.fromValues(-1,1,-1,1),i.vec4f64.fromValues(-1,-1,1,1),i.vec4f64.fromValues(1,-1,1,1),i.vec4f64.fromValues(1,1,1,1),i.vec4f64.fromValues(-1,1,1,1)],h=new r.ObjectStack(c.create)}.apply(null,n))||(e.exports=i)},2446:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1686),r(118),r(1646),r(1720)],void 0===(i=function(e,t,r,i,n,c){function o(e){return e?{ray:c.create(e.ray),c0:e.c0,c1:e.c1}:{ray:c.create(),c0:0,c1:Number.MAX_VALUE}}function a(e,t,r,n){return void 0===n&&(n=o()),c.copy(e,n.ray),n.c0=t,n.c1=r,n}function s(e,t,r){void 0===r&&(r=o());var n=i.vec3.length(e.vector);return c.fromValues(e.origin,t,r.ray),r.c0=0,r.c1=n,r}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.wrap=function(e,t,r){var n=u.get();return n.ray=e,n.c0=t,n.c1=r,n},t.copy=function(e,t){return void 0===t&&(t=o()),a(e.ray,e.c0,e.c1,t)},t.fromValues=a,t.fromRay=function(e,t){return void 0===t&&(t=o()),c.copy(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t},t.fromLineSegment=function(e,t){return void 0===t&&(t=o()),s(e,i.vec3.normalize(n.sv3d.get(),e.vector),t)},t.fromLineSegmentAndDirection=s;var u=new r.ObjectStack(function(){return{c0:0,c1:0,ray:null}})}.apply(null,n))||(e.exports=i)}}]);